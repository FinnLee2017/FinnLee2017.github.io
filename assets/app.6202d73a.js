var za=Object.defineProperty,Xa=Object.defineProperties;var Ha=Object.getOwnPropertyDescriptors;var Yr=Object.getOwnPropertySymbols;var Ya=Object.prototype.hasOwnProperty,Wa=Object.prototype.propertyIsEnumerable;var Wr=(t,e,g)=>e in t?za(t,e,{enumerable:!0,configurable:!0,writable:!0,value:g}):t[e]=g,Jt=(t,e)=>{for(var g in e||(e={}))Ya.call(e,g)&&Wr(t,g,e[g]);if(Yr)for(var g of Yr(e))Wa.call(e,g)&&Wr(t,g,e[g]);return t},ni=(t,e)=>Xa(t,Ha(e));const Nr={};function pn(t,e){const g=Object.create(null),p=t.split(",");for(let _=0;_<p.length;_++)g[p[_]]=!0;return e?_=>!!g[_.toLowerCase()]:_=>!!g[_]}const Ua="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Va=pn(Ua);function Ur(t){return!!t||t===""}function Mi(t){if(ut(t)){const e={};for(let g=0;g<t.length;g++){const p=t[g],_=Ct(p)?qa(p):Mi(p);if(_)for(const y in _)e[y]=_[y]}return e}else{if(Ct(t))return t;if(Ot(t))return t}}const Ga=/;(?![^(]*\))/g,$a=/:(.+)/;function qa(t){const e={};return t.split(Ga).forEach(g=>{if(g){const p=g.split($a);p.length>1&&(e[p[0].trim()]=p[1].trim())}}),e}function ri(t){let e="";if(Ct(t))e=t;else if(ut(t))for(let g=0;g<t.length;g++){const p=ri(t[g]);p&&(e+=p+" ")}else if(Ot(t))for(const g in t)t[g]&&(e+=g+" ");return e.trim()}const vn=t=>t==null?"":ut(t)||Ot(t)&&(t.toString===qr||!gt(t.toString))?JSON.stringify(t,Vr,2):String(t),Vr=(t,e)=>e&&e.__v_isRef?Vr(t,e.value):je(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((g,[p,_])=>(g[`${p} =>`]=_,g),{})}:Gr(e)?{[`Set(${e.size})`]:[...e.values()]}:Ot(e)&&!ut(e)&&!Kr(e)?String(e):e,_t={},Fe=[],Gt=()=>{},Ka=()=>!1,Ja=/^on[^a-z]/,si=t=>Ja.test(t),_n=t=>t.startsWith("onUpdate:"),Dt=Object.assign,yn=(t,e)=>{const g=t.indexOf(e);g>-1&&t.splice(g,1)},Za=Object.prototype.hasOwnProperty,pt=(t,e)=>Za.call(t,e),ut=Array.isArray,je=t=>Li(t)==="[object Map]",Gr=t=>Li(t)==="[object Set]",gt=t=>typeof t=="function",Ct=t=>typeof t=="string",bn=t=>typeof t=="symbol",Ot=t=>t!==null&&typeof t=="object",$r=t=>Ot(t)&&gt(t.then)&&gt(t.catch),qr=Object.prototype.toString,Li=t=>qr.call(t),Qa=t=>Li(t).slice(8,-1),Kr=t=>Li(t)==="[object Object]",Cn=t=>Ct(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,oi=pn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ri=t=>{const e=Object.create(null);return g=>e[g]||(e[g]=t(g))},tl=/-(\w)/g,Zt=Ri(t=>t.replace(tl,(e,g)=>g?g.toUpperCase():"")),el=/\B([A-Z])/g,Ie=Ri(t=>t.replace(el,"-$1").toLowerCase()),Fi=Ri(t=>t.charAt(0).toUpperCase()+t.slice(1)),wn=Ri(t=>t?`on${Fi(t)}`:""),ai=(t,e)=>!Object.is(t,e),ji=(t,e)=>{for(let g=0;g<t.length;g++)t[g](e)},Ii=(t,e,g)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:g})},Bi=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Jr;const il=()=>Jr||(Jr=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Qt;const Ni=[];class nl{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Qt&&(this.parent=Qt,this.index=(Qt.scopes||(Qt.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Ni.push(this),Qt=this)}off(){this.active&&(Ni.pop(),Qt=Ni[Ni.length-1])}stop(e){if(this.active){if(this.effects.forEach(g=>g.stop()),this.cleanups.forEach(g=>g()),this.scopes&&this.scopes.forEach(g=>g.stop(!0)),this.parent&&!e){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.active=!1}}}function rl(t,e){e=e||Qt,e&&e.active&&e.effects.push(t)}function sl(){return Qt}function ol(t){Qt&&Qt.cleanups.push(t)}const Sn=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Zr=t=>(t.w&he)>0,Qr=t=>(t.n&he)>0,al=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=he},ll=t=>{const{deps:e}=t;if(e.length){let g=0;for(let p=0;p<e.length;p++){const _=e[p];Zr(_)&&!Qr(_)?_.delete(t):e[g++]=_,_.w&=~he,_.n&=~he}e.length=g}},xn=new WeakMap;let li=0,he=1;const Tn=30,ci=[];let be;const Ce=Symbol(""),On=Symbol("");class En{constructor(e,g=null,p){this.fn=e,this.scheduler=g,this.active=!0,this.deps=[],rl(this,p)}run(){if(!this.active)return this.fn();if(!ci.includes(this))try{return ci.push(be=this),cl(),he=1<<++li,li<=Tn?al(this):ts(this),this.fn()}finally{li<=Tn&&ll(this),he=1<<--li,we(),ci.pop();const e=ci.length;be=e>0?ci[e-1]:void 0}}stop(){this.active&&(ts(this),this.onStop&&this.onStop(),this.active=!1)}}function ts(t){const{deps:e}=t;if(e.length){for(let g=0;g<e.length;g++)e[g].delete(t);e.length=0}}let Be=!0;const Pn=[];function Ne(){Pn.push(Be),Be=!1}function cl(){Pn.push(Be),Be=!0}function we(){const t=Pn.pop();Be=t===void 0?!0:t}function Nt(t,e,g){if(!es())return;let p=xn.get(t);p||xn.set(t,p=new Map);let _=p.get(g);_||p.set(g,_=Sn()),is(_)}function es(){return Be&&be!==void 0}function is(t,e){let g=!1;li<=Tn?Qr(t)||(t.n|=he,g=!Zr(t)):g=!t.has(be),g&&(t.add(be),be.deps.push(t))}function re(t,e,g,p,_,y){const S=xn.get(t);if(!S)return;let f=[];if(e==="clear")f=[...S.values()];else if(g==="length"&&ut(t))S.forEach((i,c)=>{(c==="length"||c>=p)&&f.push(i)});else switch(g!==void 0&&f.push(S.get(g)),e){case"add":ut(t)?Cn(g)&&f.push(S.get("length")):(f.push(S.get(Ce)),je(t)&&f.push(S.get(On)));break;case"delete":ut(t)||(f.push(S.get(Ce)),je(t)&&f.push(S.get(On)));break;case"set":je(t)&&f.push(S.get(Ce));break}if(f.length===1)f[0]&&An(f[0]);else{const i=[];for(const c of f)c&&i.push(...c);An(Sn(i))}}function An(t,e){for(const g of ut(t)?t:[...t])(g!==be||g.allowRecurse)&&(g.scheduler?g.scheduler():g.run())}const hl=pn("__proto__,__v_isRef,__isVue"),ns=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(bn)),ul=kn(),fl=kn(!1,!0),dl=kn(!0),rs=gl();function gl(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...g){const p=vt(this);for(let y=0,S=this.length;y<S;y++)Nt(p,"get",y+"");const _=p[e](...g);return _===-1||_===!1?p[e](...g.map(vt)):_}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...g){Ne();const p=vt(this)[e].apply(this,g);return we(),p}}),t}function kn(t=!1,e=!1){return function(p,_,y){if(_==="__v_isReactive")return!t;if(_==="__v_isReadonly")return t;if(_==="__v_raw"&&y===(t?e?kl:ds:e?fs:us).get(p))return p;const S=ut(p);if(!t&&S&&pt(rs,_))return Reflect.get(rs,_,y);const f=Reflect.get(p,_,y);return(bn(_)?ns.has(_):hl(_))||(t||Nt(p,"get",_),e)?f:Mt(f)?!S||!Cn(_)?f.value:f:Ot(f)?t?Ln(f):hi(f):f}}const ml=ss(),pl=ss(!0);function ss(t=!1){return function(g,p,_,y){let S=g[p];if(!t&&!Fn(_)&&(_=vt(_),S=vt(S),!ut(g)&&Mt(S)&&!Mt(_)))return S.value=_,!0;const f=ut(g)&&Cn(p)?Number(p)<g.length:pt(g,p),i=Reflect.set(g,p,_,y);return g===vt(y)&&(f?ai(_,S)&&re(g,"set",p,_):re(g,"add",p,_)),i}}function vl(t,e){const g=pt(t,e);t[e];const p=Reflect.deleteProperty(t,e);return p&&g&&re(t,"delete",e,void 0),p}function _l(t,e){const g=Reflect.has(t,e);return(!bn(e)||!ns.has(e))&&Nt(t,"has",e),g}function yl(t){return Nt(t,"iterate",ut(t)?"length":Ce),Reflect.ownKeys(t)}const os={get:ul,set:ml,deleteProperty:vl,has:_l,ownKeys:yl},bl={get:dl,set(t,e){return!0},deleteProperty(t,e){return!0}},Cl=Dt({},os,{get:fl,set:pl}),Dn=t=>t,zi=t=>Reflect.getPrototypeOf(t);function Xi(t,e,g=!1,p=!1){t=t.__v_raw;const _=vt(t),y=vt(e);e!==y&&!g&&Nt(_,"get",e),!g&&Nt(_,"get",y);const{has:S}=zi(_),f=p?Dn:g?jn:ui;if(S.call(_,e))return f(t.get(e));if(S.call(_,y))return f(t.get(y));t!==_&&t.get(e)}function Hi(t,e=!1){const g=this.__v_raw,p=vt(g),_=vt(t);return t!==_&&!e&&Nt(p,"has",t),!e&&Nt(p,"has",_),t===_?g.has(t):g.has(t)||g.has(_)}function Yi(t,e=!1){return t=t.__v_raw,!e&&Nt(vt(t),"iterate",Ce),Reflect.get(t,"size",t)}function as(t){t=vt(t);const e=vt(this);return zi(e).has.call(e,t)||(e.add(t),re(e,"add",t,t)),this}function ls(t,e){e=vt(e);const g=vt(this),{has:p,get:_}=zi(g);let y=p.call(g,t);y||(t=vt(t),y=p.call(g,t));const S=_.call(g,t);return g.set(t,e),y?ai(e,S)&&re(g,"set",t,e):re(g,"add",t,e),this}function cs(t){const e=vt(this),{has:g,get:p}=zi(e);let _=g.call(e,t);_||(t=vt(t),_=g.call(e,t)),p&&p.call(e,t);const y=e.delete(t);return _&&re(e,"delete",t,void 0),y}function hs(){const t=vt(this),e=t.size!==0,g=t.clear();return e&&re(t,"clear",void 0,void 0),g}function Wi(t,e){return function(p,_){const y=this,S=y.__v_raw,f=vt(S),i=e?Dn:t?jn:ui;return!t&&Nt(f,"iterate",Ce),S.forEach((c,r)=>p.call(_,i(c),i(r),y))}}function Ui(t,e,g){return function(...p){const _=this.__v_raw,y=vt(_),S=je(y),f=t==="entries"||t===Symbol.iterator&&S,i=t==="keys"&&S,c=_[t](...p),r=g?Dn:e?jn:ui;return!e&&Nt(y,"iterate",i?On:Ce),{next(){const{value:n,done:o}=c.next();return o?{value:n,done:o}:{value:f?[r(n[0]),r(n[1])]:r(n),done:o}},[Symbol.iterator](){return this}}}}function ue(t){return function(...e){return t==="delete"?!1:this}}function wl(){const t={get(y){return Xi(this,y)},get size(){return Yi(this)},has:Hi,add:as,set:ls,delete:cs,clear:hs,forEach:Wi(!1,!1)},e={get(y){return Xi(this,y,!1,!0)},get size(){return Yi(this)},has:Hi,add:as,set:ls,delete:cs,clear:hs,forEach:Wi(!1,!0)},g={get(y){return Xi(this,y,!0)},get size(){return Yi(this,!0)},has(y){return Hi.call(this,y,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:Wi(!0,!1)},p={get(y){return Xi(this,y,!0,!0)},get size(){return Yi(this,!0)},has(y){return Hi.call(this,y,!0)},add:ue("add"),set:ue("set"),delete:ue("delete"),clear:ue("clear"),forEach:Wi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=Ui(y,!1,!1),g[y]=Ui(y,!0,!1),e[y]=Ui(y,!1,!0),p[y]=Ui(y,!0,!0)}),[t,g,e,p]}const[Sl,xl,Tl,Ol]=wl();function Mn(t,e){const g=e?t?Ol:Tl:t?xl:Sl;return(p,_,y)=>_==="__v_isReactive"?!t:_==="__v_isReadonly"?t:_==="__v_raw"?p:Reflect.get(pt(g,_)&&_ in p?g:p,_,y)}const El={get:Mn(!1,!1)},Pl={get:Mn(!1,!0)},Al={get:Mn(!0,!1)},us=new WeakMap,fs=new WeakMap,ds=new WeakMap,kl=new WeakMap;function Dl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ml(t){return t.__v_skip||!Object.isExtensible(t)?0:Dl(Qa(t))}function hi(t){return t&&t.__v_isReadonly?t:Rn(t,!1,os,El,us)}function Ll(t){return Rn(t,!1,Cl,Pl,fs)}function Ln(t){return Rn(t,!0,bl,Al,ds)}function Rn(t,e,g,p,_){if(!Ot(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const y=_.get(t);if(y)return y;const S=Ml(t);if(S===0)return t;const f=new Proxy(t,S===2?p:g);return _.set(t,f),f}function ze(t){return Fn(t)?ze(t.__v_raw):!!(t&&t.__v_isReactive)}function Fn(t){return!!(t&&t.__v_isReadonly)}function gs(t){return ze(t)||Fn(t)}function vt(t){const e=t&&t.__v_raw;return e?vt(e):t}function ms(t){return Ii(t,"__v_skip",!0),t}const ui=t=>Ot(t)?hi(t):t,jn=t=>Ot(t)?Ln(t):t;function ps(t){es()&&(t=vt(t),t.dep||(t.dep=Sn()),is(t.dep))}function vs(t,e){t=vt(t),t.dep&&An(t.dep)}function Mt(t){return Boolean(t&&t.__v_isRef===!0)}function At(t){return ys(t,!1)}function _s(t){return ys(t,!0)}function ys(t,e){return Mt(t)?t:new Rl(t,e)}class Rl{constructor(e,g){this._shallow=g,this.dep=void 0,this.__v_isRef=!0,this._rawValue=g?e:vt(e),this._value=g?e:ui(e)}get value(){return ps(this),this._value}set value(e){e=this._shallow?e:vt(e),ai(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:ui(e),vs(this))}}function se(t){return Mt(t)?t.value:t}const Fl={get:(t,e,g)=>se(Reflect.get(t,e,g)),set:(t,e,g,p)=>{const _=t[e];return Mt(_)&&!Mt(g)?(_.value=g,!0):Reflect.set(t,e,g,p)}};function bs(t){return ze(t)?t:new Proxy(t,Fl)}function Hp(t){const e=ut(t)?new Array(t.length):{};for(const g in t)e[g]=Il(t,g);return e}class jl{constructor(e,g,p){this._object=e,this._key=g,this._defaultValue=p,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Il(t,e,g){const p=t[e];return Mt(p)?p:new jl(t,e,g)}class Bl{constructor(e,g,p){this._setter=g,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new En(e,()=>{this._dirty||(this._dirty=!0,vs(this))}),this.__v_isReadonly=p}get value(){const e=vt(this);return ps(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function xt(t,e){let g,p;const _=gt(t);return _?(g=t,p=Gt):(g=t.get,p=t.set),new Bl(g,p,_||!p)}Promise.resolve();function Nl(t,e,...g){const p=t.vnode.props||_t;let _=g;const y=e.startsWith("update:"),S=y&&e.slice(7);if(S&&S in p){const r=`${S==="modelValue"?"model":S}Modifiers`,{number:n,trim:o}=p[r]||_t;o?_=g.map(a=>a.trim()):n&&(_=g.map(Bi))}let f,i=p[f=wn(e)]||p[f=wn(Zt(e))];!i&&y&&(i=p[f=wn(Ie(e))]),i&&Vt(i,t,6,_);const c=p[f+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,Vt(c,t,6,_)}}function Cs(t,e,g=!1){const p=e.emitsCache,_=p.get(t);if(_!==void 0)return _;const y=t.emits;let S={},f=!1;if(!gt(t)){const i=c=>{const r=Cs(c,e,!0);r&&(f=!0,Dt(S,r))};!g&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return!y&&!f?(p.set(t,null),null):(ut(y)?y.forEach(i=>S[i]=null):Dt(S,y),p.set(t,S),S)}function In(t,e){return!t||!si(e)?!1:(e=e.slice(2).replace(/Once$/,""),pt(t,e[0].toLowerCase()+e.slice(1))||pt(t,Ie(e))||pt(t,e))}let zt=null,Vi=null;function Gi(t){const e=zt;return zt=t,Vi=t&&t.type.__scopeId||null,e}function zl(t){Vi=t}function Xl(){Vi=null}function ws(t,e=zt,g){if(!e||t._n)return t;const p=(..._)=>{p._d&&Gs(-1);const y=Gi(e),S=t(..._);return Gi(y),p._d&&Gs(1),S};return p._n=!0,p._c=!0,p._d=!0,p}function Bn(t){const{type:e,vnode:g,proxy:p,withProxy:_,props:y,propsOptions:[S],slots:f,attrs:i,emit:c,render:r,renderCache:n,data:o,setupState:a,ctx:u,inheritAttrs:l}=t;let s,h;const d=Gi(t);try{if(g.shapeFlag&4){const v=_||p;s=qt(r.call(v,v,n,y,a,o,u)),h=i}else{const v=e;s=qt(v.length>1?v(y,{attrs:i,slots:f,emit:c}):v(y,null)),h=e.props?i:Hl(i)}}catch(v){mi.length=0,vi(v,t,1),s=Tt(Wt)}let m=s;if(h&&l!==!1){const v=Object.keys(h),{shapeFlag:b}=m;v.length&&b&(1|6)&&(S&&v.some(_n)&&(h=Yl(h,S)),m=Xe(m,h))}return g.dirs&&(m.dirs=m.dirs?m.dirs.concat(g.dirs):g.dirs),g.transition&&(m.transition=g.transition),s=m,Gi(d),s}const Hl=t=>{let e;for(const g in t)(g==="class"||g==="style"||si(g))&&((e||(e={}))[g]=t[g]);return e},Yl=(t,e)=>{const g={};for(const p in t)(!_n(p)||!(p.slice(9)in e))&&(g[p]=t[p]);return g};function Wl(t,e,g){const{props:p,children:_,component:y}=t,{props:S,children:f,patchFlag:i}=e,c=y.emitsOptions;if(e.dirs||e.transition)return!0;if(g&&i>=0){if(i&1024)return!0;if(i&16)return p?Ss(p,S,c):!!S;if(i&8){const r=e.dynamicProps;for(let n=0;n<r.length;n++){const o=r[n];if(S[o]!==p[o]&&!In(c,o))return!0}}}else return(_||f)&&(!f||!f.$stable)?!0:p===S?!1:p?S?Ss(p,S,c):!0:!!S;return!1}function Ss(t,e,g){const p=Object.keys(e);if(p.length!==Object.keys(t).length)return!0;for(let _=0;_<p.length;_++){const y=p[_];if(e[y]!==t[y]&&!In(g,y))return!0}return!1}function Ul({vnode:t,parent:e},g){for(;e&&e.subTree===t;)(t=e.vnode).el=g,e=e.parent}const Vl=t=>t.__isSuspense;function xs(t,e){e&&e.pendingBranch?ut(t)?e.effects.push(...t):e.effects.push(t):Uc(t)}function Se(t,e){if(Pt){let g=Pt.provides;const p=Pt.parent&&Pt.parent.provides;p===g&&(g=Pt.provides=Object.create(p)),g[t]=e}}function kt(t,e,g=!1){const p=Pt||zt;if(p){const _=p.parent==null?p.vnode.appContext&&p.vnode.appContext.provides:p.parent.provides;if(_&&t in _)return _[t];if(arguments.length>1)return g&&gt(e)?e.call(p.proxy):e}}function Gl(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return te(()=>{t.isMounted=!0}),Yn(()=>{t.isUnmounting=!0}),t}const Yt=[Function,Array],$l={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yt,onEnter:Yt,onAfterEnter:Yt,onEnterCancelled:Yt,onBeforeLeave:Yt,onLeave:Yt,onAfterLeave:Yt,onLeaveCancelled:Yt,onBeforeAppear:Yt,onAppear:Yt,onAfterAppear:Yt,onAppearCancelled:Yt},setup(t,{slots:e}){const g=Zs(),p=Gl();let _;return()=>{const y=e.default&&Ps(e.default(),!0);if(!y||!y.length)return;const S=vt(t),{mode:f}=S,i=y[0];if(p.isLeaving)return zn(i);const c=Es(i);if(!c)return zn(i);const r=Nn(c,S,p,g);Xn(c,r);const n=g.subTree,o=n&&Es(n);let a=!1;const{getTransitionKey:u}=c.type;if(u){const l=u();_===void 0?_=l:l!==_&&(_=l,a=!0)}if(o&&o.type!==Wt&&(!Pe(c,o)||a)){const l=Nn(o,S,p,g);if(Xn(o,l),f==="out-in")return p.isLeaving=!0,l.afterLeave=()=>{p.isLeaving=!1,g.update()},zn(i);f==="in-out"&&c.type!==Wt&&(l.delayLeave=(s,h,d)=>{const m=Os(p,o);m[String(o.key)]=o,s._leaveCb=()=>{h(),s._leaveCb=void 0,delete r.delayedLeave},r.delayedLeave=d})}return i}}},Ts=$l;function Os(t,e){const{leavingVNodes:g}=t;let p=g.get(e.type);return p||(p=Object.create(null),g.set(e.type,p)),p}function Nn(t,e,g,p){const{appear:_,mode:y,persisted:S=!1,onBeforeEnter:f,onEnter:i,onAfterEnter:c,onEnterCancelled:r,onBeforeLeave:n,onLeave:o,onAfterLeave:a,onLeaveCancelled:u,onBeforeAppear:l,onAppear:s,onAfterAppear:h,onAppearCancelled:d}=e,m=String(t.key),v=Os(g,t),b=(C,x)=>{C&&Vt(C,p,9,x)},w={mode:y,persisted:S,beforeEnter(C){let x=f;if(!g.isMounted)if(_)x=l||f;else return;C._leaveCb&&C._leaveCb(!0);const T=v[m];T&&Pe(t,T)&&T.el._leaveCb&&T.el._leaveCb(),b(x,[C])},enter(C){let x=i,T=c,A=r;if(!g.isMounted)if(_)x=s||i,T=h||c,A=d||r;else return;let R=!1;const P=C._enterCb=D=>{R||(R=!0,D?b(A,[C]):b(T,[C]),w.delayedLeave&&w.delayedLeave(),C._enterCb=void 0)};x?(x(C,P),x.length<=1&&P()):P()},leave(C,x){const T=String(t.key);if(C._enterCb&&C._enterCb(!0),g.isUnmounting)return x();b(n,[C]);let A=!1;const R=C._leaveCb=P=>{A||(A=!0,x(),P?b(u,[C]):b(a,[C]),C._leaveCb=void 0,v[T]===t&&delete v[T])};v[T]=t,o?(o(C,R),o.length<=1&&R()):R()},clone(C){return Nn(C,e,g,p)}};return w}function zn(t){if(fi(t))return t=Xe(t),t.children=null,t}function Es(t){return fi(t)?t.children?t.children[0]:void 0:t}function Xn(t,e){t.shapeFlag&6&&t.component?Xn(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ps(t,e=!1){let g=[],p=0;for(let _=0;_<t.length;_++){const y=t[_];y.type===It?(y.patchFlag&128&&p++,g=g.concat(Ps(y.children,e))):(e||y.type!==Wt)&&g.push(y)}if(p>1)for(let _=0;_<g.length;_++)g[_].patchFlag=-2;return g}function $t(t){return gt(t)?{setup:t,name:t.name}:t}const $i=t=>!!t.type.__asyncLoader;function yt(t){gt(t)&&(t={loader:t});const{loader:e,loadingComponent:g,errorComponent:p,delay:_=200,timeout:y,suspensible:S=!0,onError:f}=t;let i=null,c,r=0;const n=()=>(r++,i=null,o()),o=()=>{let a;return i||(a=i=e().catch(u=>{if(u=u instanceof Error?u:new Error(String(u)),f)return new Promise((l,s)=>{f(u,()=>l(n()),()=>s(u),r+1)});throw u}).then(u=>a!==i&&i?i:(u&&(u.__esModule||u[Symbol.toStringTag]==="Module")&&(u=u.default),c=u,u)))};return $t({name:"AsyncComponentWrapper",__asyncLoader:o,get __asyncResolved(){return c},setup(){const a=Pt;if(c)return()=>Hn(c,a);const u=d=>{i=null,vi(d,a,13,!p)};if(S&&a.suspense||pi)return o().then(d=>()=>Hn(d,a)).catch(d=>(u(d),()=>p?Tt(p,{error:d}):null));const l=At(!1),s=At(),h=At(!!_);return _&&setTimeout(()=>{h.value=!1},_),y!=null&&setTimeout(()=>{if(!l.value&&!s.value){const d=new Error(`Async component timed out after ${y}ms.`);u(d),s.value=d}},y),o().then(()=>{l.value=!0,a.parent&&fi(a.parent.vnode)&&sr(a.parent.update)}).catch(d=>{u(d),s.value=d}),()=>{if(l.value&&c)return Hn(c,a);if(s.value&&p)return Tt(p,{error:s.value});if(g&&!h.value)return Tt(g)}}})}function Hn(t,{vnode:{ref:e,props:g,children:p}}){const _=Tt(t,g,p);return _.ref=e,_}const fi=t=>t.type.__isKeepAlive;function ql(t,e){As(t,"a",e)}function Kl(t,e){As(t,"da",e)}function As(t,e,g=Pt){const p=t.__wdc||(t.__wdc=()=>{let _=g;for(;_;){if(_.isDeactivated)return;_=_.parent}return t()});if(qi(e,p,g),g){let _=g.parent;for(;_&&_.parent;)fi(_.parent.vnode)&&Jl(p,e,g,_),_=_.parent}}function Jl(t,e,g,p){const _=qi(e,t,p,!0);Wn(()=>{yn(p[e],_)},g)}function qi(t,e,g=Pt,p=!1){if(g){const _=g[t]||(g[t]=[]),y=e.__weh||(e.__weh=(...S)=>{if(g.isUnmounted)return;Ne(),He(g);const f=Vt(e,g,t,S);return Ae(),we(),f});return p?_.unshift(y):_.push(y),y}}const oe=t=>(e,g=Pt)=>(!pi||t==="sp")&&qi(t,e,g),Zl=oe("bm"),te=oe("m"),Ql=oe("bu"),tc=oe("u"),Yn=oe("bum"),Wn=oe("um"),ec=oe("sp"),ic=oe("rtg"),nc=oe("rtc");function rc(t,e=Pt){qi("ec",t,e)}let Un=!0;function sc(t){const e=Ms(t),g=t.proxy,p=t.ctx;Un=!1,e.beforeCreate&&ks(e.beforeCreate,t,"bc");const{data:_,computed:y,methods:S,watch:f,provide:i,inject:c,created:r,beforeMount:n,mounted:o,beforeUpdate:a,updated:u,activated:l,deactivated:s,beforeDestroy:h,beforeUnmount:d,destroyed:m,unmounted:v,render:b,renderTracked:w,renderTriggered:C,errorCaptured:x,serverPrefetch:T,expose:A,inheritAttrs:R,components:P,directives:D,filters:N}=e;if(c&&oc(c,p,null,t.appContext.config.unwrapInjectedRef),S)for(const Q in S){const nt=S[Q];gt(nt)&&(p[Q]=nt.bind(g))}if(_){const Q=_.call(g,g);Ot(Q)&&(t.data=hi(Q))}if(Un=!0,y)for(const Q in y){const nt=y[Q],k=gt(nt)?nt.bind(g,g):gt(nt.get)?nt.get.bind(g,g):Gt,z=!gt(nt)&&gt(nt.set)?nt.set.bind(g):Gt,Y=xt({get:k,set:z});Object.defineProperty(p,Q,{enumerable:!0,configurable:!0,get:()=>Y.value,set:G=>Y.value=G})}if(f)for(const Q in f)Ds(f[Q],p,g,Q);if(i){const Q=gt(i)?i.call(g):i;Reflect.ownKeys(Q).forEach(nt=>{Se(nt,Q[nt])})}r&&ks(r,t,"c");function W(Q,nt){ut(nt)?nt.forEach(k=>Q(k.bind(g))):nt&&Q(nt.bind(g))}if(W(Zl,n),W(te,o),W(Ql,a),W(tc,u),W(ql,l),W(Kl,s),W(rc,x),W(nc,w),W(ic,C),W(Yn,d),W(Wn,v),W(ec,T),ut(A))if(A.length){const Q=t.exposed||(t.exposed={});A.forEach(nt=>{Object.defineProperty(Q,nt,{get:()=>g[nt],set:k=>g[nt]=k})})}else t.exposed||(t.exposed={});b&&t.render===Gt&&(t.render=b),R!=null&&(t.inheritAttrs=R),P&&(t.components=P),D&&(t.directives=D)}function oc(t,e,g=Gt,p=!1){ut(t)&&(t=Vn(t));for(const _ in t){const y=t[_];let S;Ot(y)?"default"in y?S=kt(y.from||_,y.default,!0):S=kt(y.from||_):S=kt(y),Mt(S)&&p?Object.defineProperty(e,_,{enumerable:!0,configurable:!0,get:()=>S.value,set:f=>S.value=f}):e[_]=S}}function ks(t,e,g){Vt(ut(t)?t.map(p=>p.bind(e.proxy)):t.bind(e.proxy),e,g)}function Ds(t,e,g,p){const _=p.includes(".")?co(g,p):()=>g[p];if(Ct(t)){const y=e[t];gt(y)&&le(_,y)}else if(gt(t))le(_,t.bind(g));else if(Ot(t))if(ut(t))t.forEach(y=>Ds(y,e,g,p));else{const y=gt(t.handler)?t.handler.bind(g):e[t.handler];gt(y)&&le(_,y,t)}}function Ms(t){const e=t.type,{mixins:g,extends:p}=e,{mixins:_,optionsCache:y,config:{optionMergeStrategies:S}}=t.appContext,f=y.get(e);let i;return f?i=f:!_.length&&!g&&!p?i=e:(i={},_.length&&_.forEach(c=>Ki(i,c,S,!0)),Ki(i,e,S)),y.set(e,i),i}function Ki(t,e,g,p=!1){const{mixins:_,extends:y}=e;y&&Ki(t,y,g,!0),_&&_.forEach(S=>Ki(t,S,g,!0));for(const S in e)if(!(p&&S==="expose")){const f=ac[S]||g&&g[S];t[S]=f?f(t[S],e[S]):e[S]}return t}const ac={data:Ls,props:xe,emits:xe,methods:xe,computed:xe,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:xe,directives:xe,watch:cc,provide:Ls,inject:lc};function Ls(t,e){return e?t?function(){return Dt(gt(t)?t.call(this,this):t,gt(e)?e.call(this,this):e)}:e:t}function lc(t,e){return xe(Vn(t),Vn(e))}function Vn(t){if(ut(t)){const e={};for(let g=0;g<t.length;g++)e[t[g]]=t[g];return e}return t}function Rt(t,e){return t?[...new Set([].concat(t,e))]:e}function xe(t,e){return t?Dt(Dt(Object.create(null),t),e):e}function cc(t,e){if(!t)return e;if(!e)return t;const g=Dt(Object.create(null),t);for(const p in e)g[p]=Rt(t[p],e[p]);return g}function hc(t,e,g,p=!1){const _={},y={};Ii(y,en,1),t.propsDefaults=Object.create(null),Rs(t,e,_,y);for(const S in t.propsOptions[0])S in _||(_[S]=void 0);g?t.props=p?_:Ll(_):t.type.props?t.props=_:t.props=y,t.attrs=y}function uc(t,e,g,p){const{props:_,attrs:y,vnode:{patchFlag:S}}=t,f=vt(_),[i]=t.propsOptions;let c=!1;if((p||S>0)&&!(S&16)){if(S&8){const r=t.vnode.dynamicProps;for(let n=0;n<r.length;n++){let o=r[n];const a=e[o];if(i)if(pt(y,o))a!==y[o]&&(y[o]=a,c=!0);else{const u=Zt(o);_[u]=Gn(i,f,u,a,t,!1)}else a!==y[o]&&(y[o]=a,c=!0)}}}else{Rs(t,e,_,y)&&(c=!0);let r;for(const n in f)(!e||!pt(e,n)&&((r=Ie(n))===n||!pt(e,r)))&&(i?g&&(g[n]!==void 0||g[r]!==void 0)&&(_[n]=Gn(i,f,n,void 0,t,!0)):delete _[n]);if(y!==f)for(const n in y)(!e||!pt(e,n))&&(delete y[n],c=!0)}c&&re(t,"set","$attrs")}function Rs(t,e,g,p){const[_,y]=t.propsOptions;let S=!1,f;if(e)for(let i in e){if(oi(i))continue;const c=e[i];let r;_&&pt(_,r=Zt(i))?!y||!y.includes(r)?g[r]=c:(f||(f={}))[r]=c:In(t.emitsOptions,i)||(!(i in p)||c!==p[i])&&(p[i]=c,S=!0)}if(y){const i=vt(g),c=f||_t;for(let r=0;r<y.length;r++){const n=y[r];g[n]=Gn(_,i,n,c[n],t,!pt(c,n))}}return S}function Gn(t,e,g,p,_,y){const S=t[g];if(S!=null){const f=pt(S,"default");if(f&&p===void 0){const i=S.default;if(S.type!==Function&&gt(i)){const{propsDefaults:c}=_;g in c?p=c[g]:(He(_),p=c[g]=i.call(null,e),Ae())}else p=i}S[0]&&(y&&!f?p=!1:S[1]&&(p===""||p===Ie(g))&&(p=!0))}return p}function Fs(t,e,g=!1){const p=e.propsCache,_=p.get(t);if(_)return _;const y=t.props,S={},f=[];let i=!1;if(!gt(t)){const r=n=>{i=!0;const[o,a]=Fs(n,e,!0);Dt(S,o),a&&f.push(...a)};!g&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!y&&!i)return p.set(t,Fe),Fe;if(ut(y))for(let r=0;r<y.length;r++){const n=Zt(y[r]);js(n)&&(S[n]=_t)}else if(y)for(const r in y){const n=Zt(r);if(js(n)){const o=y[r],a=S[n]=ut(o)||gt(o)?{type:o}:o;if(a){const u=Ns(Boolean,a.type),l=Ns(String,a.type);a[0]=u>-1,a[1]=l<0||u<l,(u>-1||pt(a,"default"))&&f.push(n)}}}const c=[S,f];return p.set(t,c),c}function js(t){return t[0]!=="$"}function Is(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Bs(t,e){return Is(t)===Is(e)}function Ns(t,e){return ut(e)?e.findIndex(g=>Bs(g,t)):gt(e)&&Bs(e,t)?0:-1}const zs=t=>t[0]==="_"||t==="$stable",$n=t=>ut(t)?t.map(qt):[qt(t)],fc=(t,e,g)=>{const p=ws((..._)=>$n(e(..._)),g);return p._c=!1,p},Xs=(t,e,g)=>{const p=t._ctx;for(const _ in t){if(zs(_))continue;const y=t[_];if(gt(y))e[_]=fc(_,y,p);else if(y!=null){const S=$n(y);e[_]=()=>S}}},Hs=(t,e)=>{const g=$n(e);t.slots.default=()=>g},dc=(t,e)=>{if(t.vnode.shapeFlag&32){const g=e._;g?(t.slots=vt(e),Ii(e,"_",g)):Xs(e,t.slots={})}else t.slots={},e&&Hs(t,e);Ii(t.slots,en,1)},gc=(t,e,g)=>{const{vnode:p,slots:_}=t;let y=!0,S=_t;if(p.shapeFlag&32){const f=e._;f?g&&f===1?y=!1:(Dt(_,e),!g&&f===1&&delete _._):(y=!e.$stable,Xs(e,_)),S=e}else e&&(Hs(t,e),S={default:1});if(y)for(const f in _)!zs(f)&&!(f in S)&&delete _[f]};function mc(t,e){const g=zt;if(g===null)return t;const p=g.proxy,_=t.dirs||(t.dirs=[]);for(let y=0;y<e.length;y++){let[S,f,i,c=_t]=e[y];gt(S)&&(S={mounted:S,updated:S}),S.deep&&ke(f),_.push({dir:S,instance:p,value:f,oldValue:void 0,arg:i,modifiers:c})}return t}function ee(t,e,g,p){const _=t.dirs,y=e&&e.dirs;for(let S=0;S<_.length;S++){const f=_[S];y&&(f.oldValue=y[S].value);let i=f.dir[p];i&&(Ne(),Vt(i,g,8,[t.el,f,t,e]),we())}}function Ys(){return{app:null,config:{isNativeTag:Ka,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pc=0;function vc(t,e){return function(p,_=null){_!=null&&!Ot(_)&&(_=null);const y=Ys(),S=new Set;let f=!1;const i=y.app={_uid:pc++,_component:p,_props:_,_container:null,_context:y,_instance:null,version:Gc,get config(){return y.config},set config(c){},use(c,...r){return S.has(c)||(c&&gt(c.install)?(S.add(c),c.install(i,...r)):gt(c)&&(S.add(c),c(i,...r))),i},mixin(c){return y.mixins.includes(c)||y.mixins.push(c),i},component(c,r){return r?(y.components[c]=r,i):y.components[c]},directive(c,r){return r?(y.directives[c]=r,i):y.directives[c]},mount(c,r,n){if(!f){const o=Tt(p,_);return o.appContext=y,r&&e?e(o,c):t(o,c,n),f=!0,i._container=c,c.__vue_app__=i,tr(o.component)||o.component.proxy}},unmount(){f&&(t(null,i._container),delete i._container.__vue_app__)},provide(c,r){return y.provides[c]=r,i}};return i}}function Ji(t,e,g,p,_=!1){if(ut(t)){t.forEach((o,a)=>Ji(o,e&&(ut(e)?e[a]:e),g,p,_));return}if($i(p)&&!_)return;const y=p.shapeFlag&4?tr(p.component)||p.component.proxy:p.el,S=_?null:y,{i:f,r:i}=t,c=e&&e.r,r=f.refs===_t?f.refs={}:f.refs,n=f.setupState;if(c!=null&&c!==i&&(Ct(c)?(r[c]=null,pt(n,c)&&(n[c]=null)):Mt(c)&&(c.value=null)),gt(i))ge(i,f,12,[S,r]);else{const o=Ct(i),a=Mt(i);if(o||a){const u=()=>{if(t.f){const l=o?r[i]:i.value;_?ut(l)&&yn(l,y):ut(l)?l.includes(y)||l.push(y):o?r[i]=[y]:(i.value=[y],t.k&&(r[t.k]=i.value))}else o?(r[i]=S,pt(n,i)&&(n[i]=S)):Mt(i)&&(i.value=S,t.k&&(r[t.k]=S))};S?(u.id=-1,jt(u,g)):u()}}}let fe=!1;const Zi=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",qn=t=>t.nodeType===8;function _c(t){const{mt:e,p:g,o:{patchProp:p,nextSibling:_,parentNode:y,remove:S,insert:f,createComment:i}}=t,c=(s,h)=>{if(!h.hasChildNodes()){g(null,s,h),on();return}fe=!1,r(h.firstChild,s,null,null,null),on(),fe&&console.error("Hydration completed but contains mismatches.")},r=(s,h,d,m,v,b=!1)=>{const w=qn(s)&&s.data==="[",C=()=>u(s,h,d,m,v,w),{type:x,ref:T,shapeFlag:A}=h,R=s.nodeType;h.el=s;let P=null;switch(x){case di:R!==3?P=C():(s.data!==h.children&&(fe=!0,s.data=h.children),P=_(s));break;case Wt:R!==8||w?P=C():P=_(s);break;case gi:if(R!==1)P=C();else{P=s;const D=!h.children.length;for(let N=0;N<h.staticCount;N++)D&&(h.children+=P.outerHTML),N===h.staticCount-1&&(h.anchor=P),P=_(P);return P}break;case It:w?P=a(s,h,d,m,v,b):P=C();break;default:if(A&1)R!==1||h.type.toLowerCase()!==s.tagName.toLowerCase()?P=C():P=n(s,h,d,m,v,b);else if(A&6){h.slotScopeIds=v;const D=y(s);if(e(h,D,null,d,m,Zi(D),b),P=w?l(s):_(s),$i(h)){let N;w?(N=Tt(It),N.anchor=P?P.previousSibling:D.lastChild):N=s.nodeType===3?Jn(""):Tt("div"),N.el=s,h.component.subTree=N}}else A&64?R!==8?P=C():P=h.type.hydrate(s,h,d,m,v,b,t,o):A&128&&(P=h.type.hydrate(s,h,d,m,Zi(y(s)),v,b,t,r))}return T!=null&&Ji(T,null,m,h),P},n=(s,h,d,m,v,b)=>{b=b||!!h.dynamicChildren;const{type:w,props:C,patchFlag:x,shapeFlag:T,dirs:A}=h,R=w==="input"&&A||w==="option";if(R||x!==-1){if(A&&ee(h,null,d,"created"),C)if(R||!b||x&(16|32))for(const D in C)(R&&D.endsWith("value")||si(D)&&!oi(D))&&p(s,D,null,C[D],!1,void 0,d);else C.onClick&&p(s,"onClick",null,C.onClick,!1,void 0,d);let P;if((P=C&&C.onVnodeBeforeMount)&&Ut(P,d,h),A&&ee(h,null,d,"beforeMount"),((P=C&&C.onVnodeMounted)||A)&&xs(()=>{P&&Ut(P,d,h),A&&ee(h,null,d,"mounted")},m),T&16&&!(C&&(C.innerHTML||C.textContent))){let D=o(s.firstChild,h,s,d,m,v,b);for(;D;){fe=!0;const N=D;D=D.nextSibling,S(N)}}else T&8&&s.textContent!==h.children&&(fe=!0,s.textContent=h.children)}return s.nextSibling},o=(s,h,d,m,v,b,w)=>{w=w||!!h.dynamicChildren;const C=h.children,x=C.length;for(let T=0;T<x;T++){const A=w?C[T]:C[T]=qt(C[T]);if(s)s=r(s,A,m,v,b,w);else{if(A.type===di&&!A.children)continue;fe=!0,g(null,A,d,null,m,v,Zi(d),b)}}return s},a=(s,h,d,m,v,b)=>{const{slotScopeIds:w}=h;w&&(v=v?v.concat(w):w);const C=y(s),x=o(_(s),h,C,d,m,v,b);return x&&qn(x)&&x.data==="]"?_(h.anchor=x):(fe=!0,f(h.anchor=i("]"),C,x),x)},u=(s,h,d,m,v,b)=>{if(fe=!0,h.el=null,b){const x=l(s);for(;;){const T=_(s);if(T&&T!==x)S(T);else break}}const w=_(s),C=y(s);return S(s),g(null,h,C,w,d,m,Zi(C),v),w},l=s=>{let h=0;for(;s;)if(s=_(s),s&&qn(s)&&(s.data==="["&&h++,s.data==="]")){if(h===0)return _(s);h--}return s};return[c,r]}const jt=xs;function yc(t){return bc(t,_c)}function bc(t,e){const g=il();g.__VUE__=!0;const{insert:p,remove:_,patchProp:y,createElement:S,createText:f,createComment:i,setText:c,setElementText:r,parentNode:n,nextSibling:o,setScopeId:a=Gt,cloneNode:u,insertStaticContent:l}=t,s=(E,M,I,H=null,U=null,Z=null,et=!1,it=null,ot=!!M.dynamicChildren)=>{if(E===M)return;E&&!Pe(E,M)&&(H=X(E),lt(E,U,Z,!0),E=null),M.patchFlag===-2&&(ot=!1,M.dynamicChildren=null);const{type:B,ref:J,shapeFlag:q}=M;switch(B){case di:h(E,M,I,H);break;case Wt:d(E,M,I,H);break;case gi:E==null&&m(M,I,H,et);break;case It:D(E,M,I,H,U,Z,et,it,ot);break;default:q&1?w(E,M,I,H,U,Z,et,it,ot):q&6?N(E,M,I,H,U,Z,et,it,ot):(q&64||q&128)&&B.process(E,M,I,H,U,Z,et,it,ot,tt)}J!=null&&U&&Ji(J,E&&E.ref,Z,M||E,!M)},h=(E,M,I,H)=>{if(E==null)p(M.el=f(M.children),I,H);else{const U=M.el=E.el;M.children!==E.children&&c(U,M.children)}},d=(E,M,I,H)=>{E==null?p(M.el=i(M.children||""),I,H):M.el=E.el},m=(E,M,I,H)=>{[E.el,E.anchor]=l(E.children,M,I,H)},v=({el:E,anchor:M},I,H)=>{let U;for(;E&&E!==M;)U=o(E),p(E,I,H),E=U;p(M,I,H)},b=({el:E,anchor:M})=>{let I;for(;E&&E!==M;)I=o(E),_(E),E=I;_(M)},w=(E,M,I,H,U,Z,et,it,ot)=>{et=et||M.type==="svg",E==null?C(M,I,H,U,Z,et,it,ot):A(E,M,U,Z,et,it,ot)},C=(E,M,I,H,U,Z,et,it)=>{let ot,B;const{type:J,props:q,shapeFlag:st,transition:at,patchFlag:ft,dirs:ct}=E;if(E.el&&u!==void 0&&ft===-1)ot=E.el=u(E.el);else{if(ot=E.el=S(E.type,Z,q&&q.is,q),st&8?r(ot,E.children):st&16&&T(E.children,ot,null,H,U,Z&&J!=="foreignObject",et,it),ct&&ee(E,null,H,"created"),q){for(const mt in q)mt!=="value"&&!oi(mt)&&y(ot,mt,null,q[mt],Z,E.children,H,U,j);"value"in q&&y(ot,"value",null,q.value),(B=q.onVnodeBeforeMount)&&Ut(B,H,E)}x(ot,E,E.scopeId,et,H)}ct&&ee(E,null,H,"beforeMount");const dt=(!U||U&&!U.pendingBranch)&&at&&!at.persisted;dt&&at.beforeEnter(ot),p(ot,M,I),((B=q&&q.onVnodeMounted)||dt||ct)&&jt(()=>{B&&Ut(B,H,E),dt&&at.enter(ot),ct&&ee(E,null,H,"mounted")},U)},x=(E,M,I,H,U)=>{if(I&&a(E,I),H)for(let Z=0;Z<H.length;Z++)a(E,H[Z]);if(U){let Z=U.subTree;if(M===Z){const et=U.vnode;x(E,et,et.scopeId,et.slotScopeIds,U.parent)}}},T=(E,M,I,H,U,Z,et,it,ot=0)=>{for(let B=ot;B<E.length;B++){const J=E[B]=it?de(E[B]):qt(E[B]);s(null,J,M,I,H,U,Z,et,it)}},A=(E,M,I,H,U,Z,et)=>{const it=M.el=E.el;let{patchFlag:ot,dynamicChildren:B,dirs:J}=M;ot|=E.patchFlag&16;const q=E.props||_t,st=M.props||_t;let at;I&&Te(I,!1),(at=st.onVnodeBeforeUpdate)&&Ut(at,I,M,E),J&&ee(M,E,I,"beforeUpdate"),I&&Te(I,!0);const ft=U&&M.type!=="foreignObject";if(B?R(E.dynamicChildren,B,it,I,H,ft,Z):et||k(E,M,it,null,I,H,ft,Z,!1),ot>0){if(ot&16)P(it,M,q,st,I,H,U);else if(ot&2&&q.class!==st.class&&y(it,"class",null,st.class,U),ot&4&&y(it,"style",q.style,st.style,U),ot&8){const ct=M.dynamicProps;for(let dt=0;dt<ct.length;dt++){const mt=ct[dt],Ft=q[mt],ne=st[mt];(ne!==Ft||mt==="value")&&y(it,mt,Ft,ne,U,E.children,I,H,j)}}ot&1&&E.children!==M.children&&r(it,M.children)}else!et&&B==null&&P(it,M,q,st,I,H,U);((at=st.onVnodeUpdated)||J)&&jt(()=>{at&&Ut(at,I,M,E),J&&ee(M,E,I,"updated")},H)},R=(E,M,I,H,U,Z,et)=>{for(let it=0;it<M.length;it++){const ot=E[it],B=M[it],J=ot.el&&(ot.type===It||!Pe(ot,B)||ot.shapeFlag&(6|64))?n(ot.el):I;s(ot,B,J,null,H,U,Z,et,!0)}},P=(E,M,I,H,U,Z,et)=>{if(I!==H){for(const it in H){if(oi(it))continue;const ot=H[it],B=I[it];ot!==B&&it!=="value"&&y(E,it,B,ot,et,M.children,U,Z,j)}if(I!==_t)for(const it in I)!oi(it)&&!(it in H)&&y(E,it,I[it],null,et,M.children,U,Z,j);"value"in H&&y(E,"value",I.value,H.value)}},D=(E,M,I,H,U,Z,et,it,ot)=>{const B=M.el=E?E.el:f(""),J=M.anchor=E?E.anchor:f("");let{patchFlag:q,dynamicChildren:st,slotScopeIds:at}=M;at&&(it=it?it.concat(at):at),E==null?(p(B,I,H),p(J,I,H),T(M.children,I,J,U,Z,et,it,ot)):q>0&&q&64&&st&&E.dynamicChildren?(R(E.dynamicChildren,st,I,U,Z,et,it),(M.key!=null||U&&M===U.subTree)&&Ws(E,M,!0)):k(E,M,I,J,U,Z,et,it,ot)},N=(E,M,I,H,U,Z,et,it,ot)=>{M.slotScopeIds=it,E==null?M.shapeFlag&512?U.ctx.activate(M,I,H,et,ot):K(M,I,H,U,Z,et,ot):W(E,M,ot)},K=(E,M,I,H,U,Z,et)=>{const it=E.component=Rc(E,H,U);if(fi(E)&&(it.ctx.renderer=tt),Fc(it),it.asyncDep){if(U&&U.registerDep(it,Q),!E.el){const ot=it.subTree=Tt(Wt);d(null,ot,M,I)}return}Q(it,E,M,I,U,Z,et)},W=(E,M,I)=>{const H=M.component=E.component;if(Wl(E,M,I))if(H.asyncDep&&!H.asyncResolved){nt(H,M,I);return}else H.next=M,Yc(H.update),H.update();else M.component=E.component,M.el=E.el,H.vnode=M},Q=(E,M,I,H,U,Z,et)=>{const it=()=>{if(E.isMounted){let{next:J,bu:q,u:st,parent:at,vnode:ft}=E,ct=J,dt;Te(E,!1),J?(J.el=ft.el,nt(E,J,et)):J=ft,q&&ji(q),(dt=J.props&&J.props.onVnodeBeforeUpdate)&&Ut(dt,at,J,ft),Te(E,!0);const mt=Bn(E),Ft=E.subTree;E.subTree=mt,s(Ft,mt,n(Ft.el),X(Ft),E,U,Z),J.el=mt.el,ct===null&&Ul(E,mt.el),st&&jt(st,U),(dt=J.props&&J.props.onVnodeUpdated)&&jt(()=>Ut(dt,at,J,ft),U)}else{let J;const{el:q,props:st}=M,{bm:at,m:ft,parent:ct}=E,dt=$i(M);if(Te(E,!1),at&&ji(at),!dt&&(J=st&&st.onVnodeBeforeMount)&&Ut(J,ct,M),Te(E,!0),q&&rt){const mt=()=>{E.subTree=Bn(E),rt(q,E.subTree,E,U,null)};dt?M.type.__asyncLoader().then(()=>!E.isUnmounted&&mt()):mt()}else{const mt=E.subTree=Bn(E);s(null,mt,I,H,E,U,Z),M.el=mt.el}if(ft&&jt(ft,U),!dt&&(J=st&&st.onVnodeMounted)){const mt=M;jt(()=>Ut(J,ct,mt),U)}M.shapeFlag&256&&E.a&&jt(E.a,U),E.isMounted=!0,M=I=H=null}},ot=E.effect=new En(it,()=>sr(E.update),E.scope),B=E.update=ot.run.bind(ot);B.id=E.uid,Te(E,!0),B()},nt=(E,M,I)=>{M.component=E;const H=E.vnode.props;E.vnode=M,E.next=null,uc(E,M.props,H,I),gc(E,M.children,I),Ne(),or(void 0,E.update),we()},k=(E,M,I,H,U,Z,et,it,ot=!1)=>{const B=E&&E.children,J=E?E.shapeFlag:0,q=M.children,{patchFlag:st,shapeFlag:at}=M;if(st>0){if(st&128){Y(B,q,I,H,U,Z,et,it,ot);return}else if(st&256){z(B,q,I,H,U,Z,et,it,ot);return}}at&8?(J&16&&j(B,U,Z),q!==B&&r(I,q)):J&16?at&16?Y(B,q,I,H,U,Z,et,it,ot):j(B,U,Z,!0):(J&8&&r(I,""),at&16&&T(q,I,H,U,Z,et,it,ot))},z=(E,M,I,H,U,Z,et,it,ot)=>{E=E||Fe,M=M||Fe;const B=E.length,J=M.length,q=Math.min(B,J);let st;for(st=0;st<q;st++){const at=M[st]=ot?de(M[st]):qt(M[st]);s(E[st],at,I,null,U,Z,et,it,ot)}B>J?j(E,U,Z,!0,!1,q):T(M,I,H,U,Z,et,it,ot,q)},Y=(E,M,I,H,U,Z,et,it,ot)=>{let B=0;const J=M.length;let q=E.length-1,st=J-1;for(;B<=q&&B<=st;){const at=E[B],ft=M[B]=ot?de(M[B]):qt(M[B]);if(Pe(at,ft))s(at,ft,I,null,U,Z,et,it,ot);else break;B++}for(;B<=q&&B<=st;){const at=E[q],ft=M[st]=ot?de(M[st]):qt(M[st]);if(Pe(at,ft))s(at,ft,I,null,U,Z,et,it,ot);else break;q--,st--}if(B>q){if(B<=st){const at=st+1,ft=at<J?M[at].el:H;for(;B<=st;)s(null,M[B]=ot?de(M[B]):qt(M[B]),I,ft,U,Z,et,it,ot),B++}}else if(B>st)for(;B<=q;)lt(E[B],U,Z,!0),B++;else{const at=B,ft=B,ct=new Map;for(B=ft;B<=st;B++){const Bt=M[B]=ot?de(M[B]):qt(M[B]);Bt.key!=null&&ct.set(Bt.key,B)}let dt,mt=0;const Ft=st-ft+1;let ne=!1,zr=0;const ii=new Array(Ft);for(B=0;B<Ft;B++)ii[B]=0;for(B=at;B<=q;B++){const Bt=E[B];if(mt>=Ft){lt(Bt,U,Z,!0);continue}let Kt;if(Bt.key!=null)Kt=ct.get(Bt.key);else for(dt=ft;dt<=st;dt++)if(ii[dt-ft]===0&&Pe(Bt,M[dt])){Kt=dt;break}Kt===void 0?lt(Bt,U,Z,!0):(ii[Kt-ft]=B+1,Kt>=zr?zr=Kt:ne=!0,s(Bt,M[Kt],I,null,U,Z,et,it,ot),mt++)}const Xr=ne?Cc(ii):Fe;for(dt=Xr.length-1,B=Ft-1;B>=0;B--){const Bt=ft+B,Kt=M[Bt],Hr=Bt+1<J?M[Bt+1].el:H;ii[B]===0?s(null,Kt,I,Hr,U,Z,et,it,ot):ne&&(dt<0||B!==Xr[dt]?G(Kt,I,Hr,2):dt--)}}},G=(E,M,I,H,U=null)=>{const{el:Z,type:et,transition:it,children:ot,shapeFlag:B}=E;if(B&6){G(E.component.subTree,M,I,H);return}if(B&128){E.suspense.move(M,I,H);return}if(B&64){et.move(E,M,I,tt);return}if(et===It){p(Z,M,I);for(let q=0;q<ot.length;q++)G(ot[q],M,I,H);p(E.anchor,M,I);return}if(et===gi){v(E,M,I);return}if(H!==2&&B&1&&it)if(H===0)it.beforeEnter(Z),p(Z,M,I),jt(()=>it.enter(Z),U);else{const{leave:q,delayLeave:st,afterLeave:at}=it,ft=()=>p(Z,M,I),ct=()=>{q(Z,()=>{ft(),at&&at()})};st?st(Z,ft,ct):ct()}else p(Z,M,I)},lt=(E,M,I,H=!1,U=!1)=>{const{type:Z,props:et,ref:it,children:ot,dynamicChildren:B,shapeFlag:J,patchFlag:q,dirs:st}=E;if(it!=null&&Ji(it,null,I,E,!0),J&256){M.ctx.deactivate(E);return}const at=J&1&&st,ft=!$i(E);let ct;if(ft&&(ct=et&&et.onVnodeBeforeUnmount)&&Ut(ct,M,E),J&6)L(E.component,I,H);else{if(J&128){E.suspense.unmount(I,H);return}at&&ee(E,null,M,"beforeUnmount"),J&64?E.type.remove(E,M,I,U,tt,H):B&&(Z!==It||q>0&&q&64)?j(B,M,I,!1,!0):(Z===It&&q&(128|256)||!U&&J&16)&&j(ot,M,I),H&&F(E)}(ft&&(ct=et&&et.onVnodeUnmounted)||at)&&jt(()=>{ct&&Ut(ct,M,E),at&&ee(E,null,M,"unmounted")},I)},F=E=>{const{type:M,el:I,anchor:H,transition:U}=E;if(M===It){O(I,H);return}if(M===gi){b(E);return}const Z=()=>{_(I),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(E.shapeFlag&1&&U&&!U.persisted){const{leave:et,delayLeave:it}=U,ot=()=>et(I,Z);it?it(E.el,Z,ot):ot()}else Z()},O=(E,M)=>{let I;for(;E!==M;)I=o(E),_(E),E=I;_(M)},L=(E,M,I)=>{const{bum:H,scope:U,update:Z,subTree:et,um:it}=E;H&&ji(H),U.stop(),Z&&(Z.active=!1,lt(et,E,M,I)),it&&jt(it,M),jt(()=>{E.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},j=(E,M,I,H=!1,U=!1,Z=0)=>{for(let et=Z;et<E.length;et++)lt(E[et],M,I,H,U)},X=E=>E.shapeFlag&6?X(E.component.subTree):E.shapeFlag&128?E.suspense.next():o(E.anchor||E.el),V=(E,M,I)=>{E==null?M._vnode&&lt(M._vnode,null,null,!0):s(M._vnode||null,E,M,null,null,null,I),on(),M._vnode=E},tt={p:s,um:lt,m:G,r:F,mt:K,mc:T,pc:k,pbc:R,n:X,o:t};let $,rt;return e&&([$,rt]=e(tt)),{render:V,hydrate:$,createApp:vc(V,$)}}function Te({effect:t,update:e},g){t.allowRecurse=e.allowRecurse=g}function Ws(t,e,g=!1){const p=t.children,_=e.children;if(ut(p)&&ut(_))for(let y=0;y<p.length;y++){const S=p[y];let f=_[y];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=_[y]=de(_[y]),f.el=S.el),g||Ws(S,f))}}function Cc(t){const e=t.slice(),g=[0];let p,_,y,S,f;const i=t.length;for(p=0;p<i;p++){const c=t[p];if(c!==0){if(_=g[g.length-1],t[_]<c){e[p]=_,g.push(p);continue}for(y=0,S=g.length-1;y<S;)f=y+S>>1,t[g[f]]<c?y=f+1:S=f;c<t[g[y]]&&(y>0&&(e[p]=g[y-1]),g[y]=p)}}for(y=g.length,S=g[y-1];y-- >0;)g[y]=S,S=e[S];return g}const wc=t=>t.__isTeleport,Us="components";function Sc(t,e){return Tc(Us,t,!0,e)||t}const xc=Symbol();function Tc(t,e,g=!0,p=!1){const _=zt||Pt;if(_){const y=_.type;if(t===Us){const f=Nc(y);if(f&&(f===e||f===Zt(e)||f===Fi(Zt(e))))return y}const S=Vs(_[t]||y[t],e)||Vs(_.appContext[t],e);return!S&&p?y:S}}function Vs(t,e){return t&&(t[e]||t[Zt(e)]||t[Fi(Zt(e))])}const It=Symbol(void 0),di=Symbol(void 0),Wt=Symbol(void 0),gi=Symbol(void 0),mi=[];let Oe=null;function ie(t=!1){mi.push(Oe=t?null:[])}function Oc(){mi.pop(),Oe=mi[mi.length-1]||null}let Qi=1;function Gs(t){Qi+=t}function $s(t){return t.dynamicChildren=Qi>0?Oe||Fe:null,Oc(),Qi>0&&Oe&&Oe.push(t),t}function Ee(t,e,g,p,_,y){return $s(Xt(t,e,g,p,_,y,!0))}function Kn(t,e,g,p,_){return $s(Tt(t,e,g,p,_,!0))}function tn(t){return t?t.__v_isVNode===!0:!1}function Pe(t,e){return t.type===e.type&&t.key===e.key}const en="__vInternal",qs=({key:t})=>t!=null?t:null,nn=({ref:t,ref_key:e,ref_for:g})=>t!=null?Ct(t)||Mt(t)||gt(t)?{i:zt,r:t,k:e,f:!!g}:t:null;function Xt(t,e=null,g=null,p=0,_=null,y=t===It?0:1,S=!1,f=!1){const i={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&qs(e),ref:e&&nn(e),scopeId:Vi,slotScopeIds:null,children:g,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:p,dynamicProps:_,dynamicChildren:null,appContext:null};return f?(Zn(i,g),y&128&&t.normalize(i)):g&&(i.shapeFlag|=Ct(g)?8:16),Qi>0&&!S&&Oe&&(i.patchFlag>0||y&6)&&i.patchFlag!==32&&Oe.push(i),i}const Tt=Ec;function Ec(t,e=null,g=null,p=0,_=null,y=!1){if((!t||t===xc)&&(t=Wt),tn(t)){const f=Xe(t,e,!0);return g&&Zn(f,g),f}if(zc(t)&&(t=t.__vccOpts),e){e=Pc(e);let{class:f,style:i}=e;f&&!Ct(f)&&(e.class=ri(f)),Ot(i)&&(gs(i)&&!ut(i)&&(i=Dt({},i)),e.style=Mi(i))}const S=Ct(t)?1:Vl(t)?128:wc(t)?64:Ot(t)?4:gt(t)?2:0;return Xt(t,e,g,p,_,S,y,!0)}function Pc(t){return t?gs(t)||en in t?Dt({},t):t:null}function Xe(t,e,g=!1){const{props:p,ref:_,patchFlag:y,children:S}=t,f=e?kc(p||{},e):p;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&qs(f),ref:e&&e.ref?g&&_?ut(_)?_.concat(nn(e)):[_,nn(e)]:nn(e):_,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:S,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==It?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Xe(t.ssContent),ssFallback:t.ssFallback&&Xe(t.ssFallback),el:t.el,anchor:t.anchor}}function Jn(t=" ",e=0){return Tt(di,null,t,e)}function Yp(t,e){const g=Tt(gi,null,t);return g.staticCount=e,g}function Ac(t="",e=!1){return e?(ie(),Kn(Wt,null,t)):Tt(Wt,null,t)}function qt(t){return t==null||typeof t=="boolean"?Tt(Wt):ut(t)?Tt(It,null,t.slice()):typeof t=="object"?de(t):Tt(di,null,String(t))}function de(t){return t.el===null||t.memo?t:Xe(t)}function Zn(t,e){let g=0;const{shapeFlag:p}=t;if(e==null)e=null;else if(ut(e))g=16;else if(typeof e=="object")if(p&(1|64)){const _=e.default;_&&(_._c&&(_._d=!1),Zn(t,_()),_._c&&(_._d=!0));return}else{g=32;const _=e._;!_&&!(en in e)?e._ctx=zt:_===3&&zt&&(zt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else gt(e)?(e={default:e,_ctx:zt},g=32):(e=String(e),p&64?(g=16,e=[Jn(e)]):g=8);t.children=e,t.shapeFlag|=g}function kc(...t){const e={};for(let g=0;g<t.length;g++){const p=t[g];for(const _ in p)if(_==="class")e.class!==p.class&&(e.class=ri([e.class,p.class]));else if(_==="style")e.style=Mi([e.style,p.style]);else if(si(_)){const y=e[_],S=p[_];y!==S&&!(ut(y)&&y.includes(S))&&(e[_]=y?[].concat(y,S):S)}else _!==""&&(e[_]=p[_])}return e}function Ut(t,e,g,p=null){Vt(t,e,7,[g,p])}function Wp(t,e,g,p){let _;const y=g&&g[p];if(ut(t)||Ct(t)){_=new Array(t.length);for(let S=0,f=t.length;S<f;S++)_[S]=e(t[S],S,void 0,y&&y[S])}else if(typeof t=="number"){_=new Array(t);for(let S=0;S<t;S++)_[S]=e(S+1,S,void 0,y&&y[S])}else if(Ot(t))if(t[Symbol.iterator])_=Array.from(t,(S,f)=>e(S,f,void 0,y&&y[f]));else{const S=Object.keys(t);_=new Array(S.length);for(let f=0,i=S.length;f<i;f++){const c=S[f];_[f]=e(t[c],c,f,y&&y[f])}}else _=[];return g&&(g[p]=_),_}function Ks(t,e,g={},p,_){if(zt.isCE)return Tt("slot",e==="default"?null:{name:e},p&&p());let y=t[e];y&&y._c&&(y._d=!1),ie();const S=y&&Js(y(g)),f=Kn(It,{key:g.key||`_${e}`},S||(p?p():[]),S&&t._===1?64:-2);return!_&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),y&&y._c&&(y._d=!0),f}function Js(t){return t.some(e=>tn(e)?!(e.type===Wt||e.type===It&&!Js(e.children)):!0)?t:null}const Qn=t=>t?Qs(t)?tr(t)||t.proxy:Qn(t.parent):null,rn=Dt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qn(t.parent),$root:t=>Qn(t.root),$emit:t=>t.emit,$options:t=>Ms(t),$forceUpdate:t=>()=>sr(t.update),$nextTick:t=>rr.bind(t.proxy),$watch:t=>Vc.bind(t)}),Dc={get({_:t},e){const{ctx:g,setupState:p,data:_,props:y,accessCache:S,type:f,appContext:i}=t;let c;if(e[0]!=="$"){const a=S[e];if(a!==void 0)switch(a){case 1:return p[e];case 2:return _[e];case 4:return g[e];case 3:return y[e]}else{if(p!==_t&&pt(p,e))return S[e]=1,p[e];if(_!==_t&&pt(_,e))return S[e]=2,_[e];if((c=t.propsOptions[0])&&pt(c,e))return S[e]=3,y[e];if(g!==_t&&pt(g,e))return S[e]=4,g[e];Un&&(S[e]=0)}}const r=rn[e];let n,o;if(r)return e==="$attrs"&&Nt(t,"get",e),r(t);if((n=f.__cssModules)&&(n=n[e]))return n;if(g!==_t&&pt(g,e))return S[e]=4,g[e];if(o=i.config.globalProperties,pt(o,e))return o[e]},set({_:t},e,g){const{data:p,setupState:_,ctx:y}=t;if(_!==_t&&pt(_,e))_[e]=g;else if(p!==_t&&pt(p,e))p[e]=g;else if(pt(t.props,e))return!1;return e[0]==="$"&&e.slice(1)in t?!1:(y[e]=g,!0)},has({_:{data:t,setupState:e,accessCache:g,ctx:p,appContext:_,propsOptions:y}},S){let f;return!!g[S]||t!==_t&&pt(t,S)||e!==_t&&pt(e,S)||(f=y[0])&&pt(f,S)||pt(p,S)||pt(rn,S)||pt(_.config.globalProperties,S)}},Mc=Ys();let Lc=0;function Rc(t,e,g){const p=t.type,_=(e?e.appContext:t.appContext)||Mc,y={uid:Lc++,vnode:t,type:p,parent:e,appContext:_,root:null,next:null,subTree:null,effect:null,update:null,scope:new nl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(_.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fs(p,_),emitsOptions:Cs(p,_),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:p.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,suspense:g,suspenseId:g?g.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=e?e.root:y,y.emit=Nl.bind(null,y),t.ce&&t.ce(y),y}let Pt=null;const Zs=()=>Pt||zt,He=t=>{Pt=t,t.scope.on()},Ae=()=>{Pt&&Pt.scope.off(),Pt=null};function Qs(t){return t.vnode.shapeFlag&4}let pi=!1;function Fc(t,e=!1){pi=e;const{props:g,children:p}=t.vnode,_=Qs(t);hc(t,g,_,e),dc(t,p);const y=_?jc(t,e):void 0;return pi=!1,y}function jc(t,e){const g=t.type;t.accessCache=Object.create(null),t.proxy=ms(new Proxy(t.ctx,Dc));const{setup:p}=g;if(p){const _=t.setupContext=p.length>1?Bc(t):null;He(t),Ne();const y=ge(p,t,0,[t.props,_]);if(we(),Ae(),$r(y)){if(y.then(Ae,Ae),e)return y.then(S=>{to(t,S,e)}).catch(S=>{vi(S,t,0)});t.asyncDep=y}else to(t,y,e)}else io(t,e)}function to(t,e,g){gt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ot(e)&&(t.setupState=bs(e)),io(t,g)}let eo;function io(t,e,g){const p=t.type;if(!t.render){if(!e&&eo&&!p.render){const _=p.template;if(_){const{isCustomElement:y,compilerOptions:S}=t.appContext.config,{delimiters:f,compilerOptions:i}=p,c=Dt(Dt({isCustomElement:y,delimiters:f},S),i);p.render=eo(_,c)}}t.render=p.render||Gt}He(t),Ne(),sc(t),we(),Ae()}function Ic(t){return new Proxy(t.attrs,{get(e,g){return Nt(t,"get","$attrs"),e[g]}})}function Bc(t){const e=p=>{t.exposed=p||{}};let g;return{get attrs(){return g||(g=Ic(t))},slots:t.slots,emit:t.emit,expose:e}}function tr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(bs(ms(t.exposed)),{get(e,g){if(g in e)return e[g];if(g in rn)return rn[g](t)}}))}function Nc(t){return gt(t)&&t.displayName||t.name}function zc(t){return gt(t)&&"__vccOpts"in t}function ge(t,e,g,p){let _;try{_=p?t(...p):t()}catch(y){vi(y,e,g)}return _}function Vt(t,e,g,p){if(gt(t)){const y=ge(t,e,g,p);return y&&$r(y)&&y.catch(S=>{vi(S,e,g)}),y}const _=[];for(let y=0;y<t.length;y++)_.push(Vt(t[y],e,g,p));return _}function vi(t,e,g,p=!0){const _=e?e.vnode:null;if(e){let y=e.parent;const S=e.proxy,f=g;for(;y;){const c=y.ec;if(c){for(let r=0;r<c.length;r++)if(c[r](t,S,f)===!1)return}y=y.parent}const i=e.appContext.config.errorHandler;if(i){ge(i,null,10,[t,S,f]);return}}Xc(t,g,_,p)}function Xc(t,e,g,p=!0){console.error(t)}let sn=!1,er=!1;const Ht=[];let ae=0;const _i=[];let yi=null,Ye=0;const bi=[];let me=null,We=0;const no=Promise.resolve();let ir=null,nr=null;function rr(t){const e=ir||no;return t?e.then(this?t.bind(this):t):e}function Hc(t){let e=ae+1,g=Ht.length;for(;e<g;){const p=e+g>>>1;Ci(Ht[p])<t?e=p+1:g=p}return e}function sr(t){(!Ht.length||!Ht.includes(t,sn&&t.allowRecurse?ae+1:ae))&&t!==nr&&(t.id==null?Ht.push(t):Ht.splice(Hc(t.id),0,t),ro())}function ro(){!sn&&!er&&(er=!0,ir=no.then(oo))}function Yc(t){const e=Ht.indexOf(t);e>ae&&Ht.splice(e,1)}function so(t,e,g,p){ut(t)?g.push(...t):(!e||!e.includes(t,t.allowRecurse?p+1:p))&&g.push(t),ro()}function Wc(t){so(t,yi,_i,Ye)}function Uc(t){so(t,me,bi,We)}function or(t,e=null){if(_i.length){for(nr=e,yi=[...new Set(_i)],_i.length=0,Ye=0;Ye<yi.length;Ye++)yi[Ye]();yi=null,Ye=0,nr=null,or(t,e)}}function on(t){if(bi.length){const e=[...new Set(bi)];if(bi.length=0,me){me.push(...e);return}for(me=e,me.sort((g,p)=>Ci(g)-Ci(p)),We=0;We<me.length;We++)me[We]();me=null,We=0}}const Ci=t=>t.id==null?1/0:t.id;function oo(t){er=!1,sn=!0,or(t),Ht.sort((g,p)=>Ci(g)-Ci(p));const e=Gt;try{for(ae=0;ae<Ht.length;ae++){const g=Ht[ae];g&&g.active!==!1&&ge(g,null,14)}}finally{ae=0,Ht.length=0,on(),sn=!1,ir=null,(Ht.length||_i.length||bi.length)&&oo(t)}}const ao={};function le(t,e,g){return lo(t,e,g)}function lo(t,e,{immediate:g,deep:p,flush:_,onTrack:y,onTrigger:S}=_t){const f=Pt;let i,c=!1,r=!1;if(Mt(t)?(i=()=>t.value,c=!!t._shallow):ze(t)?(i=()=>t,p=!0):ut(t)?(r=!0,c=t.some(ze),i=()=>t.map(h=>{if(Mt(h))return h.value;if(ze(h))return ke(h);if(gt(h))return ge(h,f,2)})):gt(t)?e?i=()=>ge(t,f,2):i=()=>{if(!(f&&f.isUnmounted))return n&&n(),Vt(t,f,3,[o])}:i=Gt,e&&p){const h=i;i=()=>ke(h())}let n,o=h=>{n=s.onStop=()=>{ge(h,f,4)}};if(pi)return o=Gt,e?g&&Vt(e,f,3,[i(),r?[]:void 0,o]):i(),Gt;let a=r?[]:ao;const u=()=>{if(!!s.active)if(e){const h=s.run();(p||c||(r?h.some((d,m)=>ai(d,a[m])):ai(h,a)))&&(n&&n(),Vt(e,f,3,[h,a===ao?void 0:a,o]),a=h)}else s.run()};u.allowRecurse=!!e;let l;_==="sync"?l=u:_==="post"?l=()=>jt(u,f&&f.suspense):l=()=>{!f||f.isMounted?Wc(u):u()};const s=new En(i,l);return e?g?u():a=s.run():_==="post"?jt(s.run.bind(s),f&&f.suspense):s.run(),()=>{s.stop(),f&&f.scope&&yn(f.scope.effects,s)}}function Vc(t,e,g){const p=this.proxy,_=Ct(t)?t.includes(".")?co(p,t):()=>p[t]:t.bind(p,p);let y;gt(e)?y=e:(y=e.handler,g=e);const S=Pt;He(this);const f=lo(_,y.bind(p),g);return S?He(S):Ae(),f}function co(t,e){const g=e.split(".");return()=>{let p=t;for(let _=0;_<g.length&&p;_++)p=p[g[_]];return p}}function ke(t,e){if(!Ot(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Mt(t))ke(t.value,e);else if(ut(t))for(let g=0;g<t.length;g++)ke(t[g],e);else if(Gr(t)||je(t))t.forEach(g=>{ke(g,e)});else if(Kr(t))for(const g in t)ke(t[g],e);return t}function Et(t,e,g){const p=arguments.length;return p===2?Ot(e)&&!ut(e)?tn(e)?Tt(t,null,[e]):Tt(t,e):Tt(t,null,e):(p>3?g=Array.prototype.slice.call(arguments,2):p===3&&tn(g)&&(g=[g]),Tt(t,e,g))}const Gc="3.2.26",$c="http://www.w3.org/2000/svg",Ue=typeof document!="undefined"?document:null,ho=new Map,qc={insert:(t,e,g)=>{e.insertBefore(t,g||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,g,p)=>{const _=e?Ue.createElementNS($c,t):Ue.createElement(t,g?{is:g}:void 0);return t==="select"&&p&&p.multiple!=null&&_.setAttribute("multiple",p.multiple),_},createText:t=>Ue.createTextNode(t),createComment:t=>Ue.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ue.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,g,p){const _=g?g.previousSibling:e.lastChild;let y=ho.get(t);if(!y){const S=Ue.createElement("template");if(S.innerHTML=p?`<svg>${t}</svg>`:t,y=S.content,p){const f=y.firstChild;for(;f.firstChild;)y.appendChild(f.firstChild);y.removeChild(f)}ho.set(t,y)}return e.insertBefore(y.cloneNode(!0),g),[_?_.nextSibling:e.firstChild,g?g.previousSibling:e.lastChild]}};function Kc(t,e,g){const p=t._vtc;p&&(e=(e?[e,...p]:[...p]).join(" ")),e==null?t.removeAttribute("class"):g?t.setAttribute("class",e):t.className=e}function Jc(t,e,g){const p=t.style,_=Ct(g);if(g&&!_){for(const y in g)ar(p,y,g[y]);if(e&&!Ct(e))for(const y in e)g[y]==null&&ar(p,y,"")}else{const y=p.display;_?e!==g&&(p.cssText=g):e&&t.removeAttribute("style"),"_vod"in t&&(p.display=y)}}const uo=/\s*!important$/;function ar(t,e,g){if(ut(g))g.forEach(p=>ar(t,e,p));else if(e.startsWith("--"))t.setProperty(e,g);else{const p=Zc(t,e);uo.test(g)?t.setProperty(Ie(p),g.replace(uo,""),"important"):t[p]=g}}const fo=["Webkit","Moz","ms"],lr={};function Zc(t,e){const g=lr[e];if(g)return g;let p=Zt(e);if(p!=="filter"&&p in t)return lr[e]=p;p=Fi(p);for(let _=0;_<fo.length;_++){const y=fo[_]+p;if(y in t)return lr[e]=y}return e}const go="http://www.w3.org/1999/xlink";function Qc(t,e,g,p,_){if(p&&e.startsWith("xlink:"))g==null?t.removeAttributeNS(go,e.slice(6,e.length)):t.setAttributeNS(go,e,g);else{const y=Va(e);g==null||y&&!Ur(g)?t.removeAttribute(e):t.setAttribute(e,y?"":g)}}function th(t,e,g,p,_,y,S){if(e==="innerHTML"||e==="textContent"){p&&S(p,_,y),t[e]=g==null?"":g;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=g;const f=g==null?"":g;(t.value!==f||t.tagName==="OPTION")&&(t.value=f),g==null&&t.removeAttribute(e);return}if(g===""||g==null){const f=typeof t[e];if(f==="boolean"){t[e]=Ur(g);return}else if(g==null&&f==="string"){t[e]="",t.removeAttribute(e);return}else if(f==="number"){try{t[e]=0}catch{}t.removeAttribute(e);return}}try{t[e]=g}catch{}}let an=Date.now,mo=!1;if(typeof window!="undefined"){an()>document.createEvent("Event").timeStamp&&(an=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);mo=!!(t&&Number(t[1])<=53)}let cr=0;const eh=Promise.resolve(),ih=()=>{cr=0},nh=()=>cr||(eh.then(ih),cr=an());function Ve(t,e,g,p){t.addEventListener(e,g,p)}function rh(t,e,g,p){t.removeEventListener(e,g,p)}function sh(t,e,g,p,_=null){const y=t._vei||(t._vei={}),S=y[e];if(p&&S)S.value=p;else{const[f,i]=oh(e);if(p){const c=y[e]=ah(p,_);Ve(t,f,c,i)}else S&&(rh(t,f,S,i),y[e]=void 0)}}const po=/(?:Once|Passive|Capture)$/;function oh(t){let e;if(po.test(t)){e={};let g;for(;g=t.match(po);)t=t.slice(0,t.length-g[0].length),e[g[0].toLowerCase()]=!0}return[Ie(t.slice(2)),e]}function ah(t,e){const g=p=>{const _=p.timeStamp||an();(mo||_>=g.attached-1)&&Vt(lh(p,g.value),e,5,[p])};return g.value=t,g.attached=nh(),g}function lh(t,e){if(ut(e)){const g=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{g.call(t),t._stopped=!0},e.map(p=>_=>!_._stopped&&p(_))}else return e}const vo=/^on[a-z]/,ch=(t,e,g,p,_=!1,y,S,f,i)=>{e==="class"?Kc(t,p,_):e==="style"?Jc(t,g,p):si(e)?_n(e)||sh(t,e,g,p,S):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hh(t,e,p,_))?th(t,e,p,y,S,f,i):(e==="true-value"?t._trueValue=p:e==="false-value"&&(t._falseValue=p),Qc(t,e,p,_))};function hh(t,e,g,p){return p?!!(e==="innerHTML"||e==="textContent"||e in t&&vo.test(e)&&gt(g)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||vo.test(e)&&Ct(g)?!1:e in t}const pe="transition",wi="animation",hr=(t,{slots:e})=>Et(Ts,uh(t),e);hr.displayName="Transition";const _o={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};hr.props=Dt({},Ts.props,_o);const De=(t,e=[])=>{ut(t)?t.forEach(g=>g(...e)):t&&t(...e)},yo=t=>t?ut(t)?t.some(e=>e.length>1):t.length>1:!1;function uh(t){const e={};for(const P in t)P in _o||(e[P]=t[P]);if(t.css===!1)return e;const{name:g="v",type:p,duration:_,enterFromClass:y=`${g}-enter-from`,enterActiveClass:S=`${g}-enter-active`,enterToClass:f=`${g}-enter-to`,appearFromClass:i=y,appearActiveClass:c=S,appearToClass:r=f,leaveFromClass:n=`${g}-leave-from`,leaveActiveClass:o=`${g}-leave-active`,leaveToClass:a=`${g}-leave-to`}=t,u=fh(_),l=u&&u[0],s=u&&u[1],{onBeforeEnter:h,onEnter:d,onEnterCancelled:m,onLeave:v,onLeaveCancelled:b,onBeforeAppear:w=h,onAppear:C=d,onAppearCancelled:x=m}=e,T=(P,D,N)=>{Ge(P,D?r:f),Ge(P,D?c:S),N&&N()},A=(P,D)=>{Ge(P,a),Ge(P,o),D&&D()},R=P=>(D,N)=>{const K=P?C:d,W=()=>T(D,P,N);De(K,[D,W]),bo(()=>{Ge(D,P?i:y),ve(D,P?r:f),yo(K)||Co(D,p,l,W)})};return Dt(e,{onBeforeEnter(P){De(h,[P]),ve(P,y),ve(P,S)},onBeforeAppear(P){De(w,[P]),ve(P,i),ve(P,c)},onEnter:R(!1),onAppear:R(!0),onLeave(P,D){const N=()=>A(P,D);ve(P,n),mh(),ve(P,o),bo(()=>{Ge(P,n),ve(P,a),yo(v)||Co(P,p,s,N)}),De(v,[P,N])},onEnterCancelled(P){T(P,!1),De(m,[P])},onAppearCancelled(P){T(P,!0),De(x,[P])},onLeaveCancelled(P){A(P),De(b,[P])}})}function fh(t){if(t==null)return null;if(Ot(t))return[ur(t.enter),ur(t.leave)];{const e=ur(t);return[e,e]}}function ur(t){return Bi(t)}function ve(t,e){e.split(/\s+/).forEach(g=>g&&t.classList.add(g)),(t._vtc||(t._vtc=new Set)).add(e)}function Ge(t,e){e.split(/\s+/).forEach(p=>p&&t.classList.remove(p));const{_vtc:g}=t;g&&(g.delete(e),g.size||(t._vtc=void 0))}function bo(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let dh=0;function Co(t,e,g,p){const _=t._endId=++dh,y=()=>{_===t._endId&&p()};if(g)return setTimeout(y,g);const{type:S,timeout:f,propCount:i}=gh(t,e);if(!S)return p();const c=S+"end";let r=0;const n=()=>{t.removeEventListener(c,o),y()},o=a=>{a.target===t&&++r>=i&&n()};setTimeout(()=>{r<i&&n()},f+1),t.addEventListener(c,o)}function gh(t,e){const g=window.getComputedStyle(t),p=u=>(g[u]||"").split(", "),_=p(pe+"Delay"),y=p(pe+"Duration"),S=wo(_,y),f=p(wi+"Delay"),i=p(wi+"Duration"),c=wo(f,i);let r=null,n=0,o=0;e===pe?S>0&&(r=pe,n=S,o=y.length):e===wi?c>0&&(r=wi,n=c,o=i.length):(n=Math.max(S,c),r=n>0?S>c?pe:wi:null,o=r?r===pe?y.length:i.length:0);const a=r===pe&&/\b(transform|all)(,|$)/.test(g[pe+"Property"]);return{type:r,timeout:n,propCount:o,hasTransform:a}}function wo(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((g,p)=>So(g)+So(t[p])))}function So(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function mh(){return document.body.offsetHeight}const xo=t=>{const e=t.props["onUpdate:modelValue"];return ut(e)?g=>ji(e,g):e};function ph(t){t.target.composing=!0}function To(t){const e=t.target;e.composing&&(e.composing=!1,vh(e,"input"))}function vh(t,e){const g=document.createEvent("HTMLEvents");g.initEvent(e,!0,!0),t.dispatchEvent(g)}const _h={created(t,{modifiers:{lazy:e,trim:g,number:p}},_){t._assign=xo(_);const y=p||_.props&&_.props.type==="number";Ve(t,e?"change":"input",S=>{if(S.target.composing)return;let f=t.value;g?f=f.trim():y&&(f=Bi(f)),t._assign(f)}),g&&Ve(t,"change",()=>{t.value=t.value.trim()}),e||(Ve(t,"compositionstart",ph),Ve(t,"compositionend",To),Ve(t,"change",To))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:g,trim:p,number:_}},y){if(t._assign=xo(y),t.composing||document.activeElement===t&&(g||p&&t.value.trim()===e||(_||t.type==="number")&&Bi(t.value)===e))return;const S=e==null?"":e;t.value!==S&&(t.value=S)}},Up={beforeMount(t,{value:e},{transition:g}){t._vod=t.style.display==="none"?"":t.style.display,g&&e?g.beforeEnter(t):Si(t,e)},mounted(t,{value:e},{transition:g}){g&&e&&g.enter(t)},updated(t,{value:e,oldValue:g},{transition:p}){!e!=!g&&(p?e?(p.beforeEnter(t),Si(t,!0),p.enter(t)):p.leave(t,()=>{Si(t,!1)}):Si(t,e))},beforeUnmount(t,{value:e}){Si(t,e)}};function Si(t,e){t.style.display=e?t._vod:"none"}const yh=Dt({patchProp:ch},qc);let fr,Oo=!1;function bh(){return fr=Oo?fr:yc(yh),Oo=!0,fr}const Ch=(...t)=>{const e=bh().createApp(...t),{mount:g}=e;return e.mount=p=>{const _=wh(p);if(_)return g(_,!0,_ instanceof SVGElement)},e};function wh(t){return Ct(t)?document.querySelector(t):t}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Eo=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",$e=t=>Eo?Symbol(t):"_vr_"+t,Sh=$e("rvlm"),Po=$e("rvd"),ln=$e("r"),dr=$e("rl"),gr=$e("rvl"),qe=typeof window!="undefined";function xh(t){return t.__esModule||Eo&&t[Symbol.toStringTag]==="Module"}const bt=Object.assign;function mr(t,e){const g={};for(const p in e){const _=e[p];g[p]=Array.isArray(_)?_.map(t):t(_)}return g}const xi=()=>{},Th=/\/$/,Oh=t=>t.replace(Th,"");function pr(t,e,g="/"){let p,_={},y="",S="";const f=e.indexOf("?"),i=e.indexOf("#",f>-1?f:0);return f>-1&&(p=e.slice(0,f),y=e.slice(f+1,i>-1?i:e.length),_=t(y)),i>-1&&(p=p||e.slice(0,i),S=e.slice(i,e.length)),p=kh(p!=null?p:e,g),{fullPath:p+(y&&"?")+y+S,path:p,query:_,hash:S}}function Eh(t,e){const g=e.query?t(e.query):"";return e.path+(g&&"?")+g+(e.hash||"")}function Ao(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Ph(t,e,g){const p=e.matched.length-1,_=g.matched.length-1;return p>-1&&p===_&&Ke(e.matched[p],g.matched[_])&&ko(e.params,g.params)&&t(e.query)===t(g.query)&&e.hash===g.hash}function Ke(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function ko(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const g in t)if(!Ah(t[g],e[g]))return!1;return!0}function Ah(t,e){return Array.isArray(t)?Do(t,e):Array.isArray(e)?Do(e,t):t===e}function Do(t,e){return Array.isArray(e)?t.length===e.length&&t.every((g,p)=>g===e[p]):t.length===1&&t[0]===e}function kh(t,e){if(t.startsWith("/"))return t;if(!t)return e;const g=e.split("/"),p=t.split("/");let _=g.length-1,y,S;for(y=0;y<p.length;y++)if(S=p[y],!(_===1||S==="."))if(S==="..")_--;else break;return g.slice(0,_).join("/")+"/"+p.slice(y-(y===p.length?1:0)).join("/")}var Ti;(function(t){t.pop="pop",t.push="push"})(Ti||(Ti={}));var Oi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Oi||(Oi={}));function Dh(t){if(!t)if(qe){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Oh(t)}const Mh=/^[^#]+#/;function Lh(t,e){return t.replace(Mh,"#")+e}function Rh(t,e){const g=document.documentElement.getBoundingClientRect(),p=t.getBoundingClientRect();return{behavior:e.behavior,left:p.left-g.left-(e.left||0),top:p.top-g.top-(e.top||0)}}const cn=()=>({left:window.pageXOffset,top:window.pageYOffset});function Fh(t){let e;if("el"in t){const g=t.el,p=typeof g=="string"&&g.startsWith("#"),_=typeof g=="string"?p?document.getElementById(g.slice(1)):document.querySelector(g):g;if(!_)return;e=Rh(_,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Mo(t,e){return(history.state?history.state.position-e:-1)+t}const vr=new Map;function jh(t,e){vr.set(t,e)}function Ih(t){const e=vr.get(t);return vr.delete(t),e}let Bh=()=>location.protocol+"//"+location.host;function Lo(t,e){const{pathname:g,search:p,hash:_}=e,y=t.indexOf("#");if(y>-1){let f=_.includes(t.slice(y))?t.slice(y).length:1,i=_.slice(f);return i[0]!=="/"&&(i="/"+i),Ao(i,"")}return Ao(g,t)+p+_}function Nh(t,e,g,p){let _=[],y=[],S=null;const f=({state:o})=>{const a=Lo(t,location),u=g.value,l=e.value;let s=0;if(o){if(g.value=a,e.value=o,S&&S===u){S=null;return}s=l?o.position-l.position:0}else p(a);_.forEach(h=>{h(g.value,u,{delta:s,type:Ti.pop,direction:s?s>0?Oi.forward:Oi.back:Oi.unknown})})};function i(){S=g.value}function c(o){_.push(o);const a=()=>{const u=_.indexOf(o);u>-1&&_.splice(u,1)};return y.push(a),a}function r(){const{history:o}=window;!o.state||o.replaceState(bt({},o.state,{scroll:cn()}),"")}function n(){for(const o of y)o();y=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",r)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",r),{pauseListeners:i,listen:c,destroy:n}}function Ro(t,e,g,p=!1,_=!1){return{back:t,current:e,forward:g,replaced:p,position:window.history.length,scroll:_?cn():null}}function zh(t){const{history:e,location:g}=window,p={value:Lo(t,g)},_={value:e.state};_.value||y(p.value,{back:null,current:p.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function y(i,c,r){const n=t.indexOf("#"),o=n>-1?(g.host&&document.querySelector("base")?t:t.slice(n))+i:Bh()+t+i;try{e[r?"replaceState":"pushState"](c,"",o),_.value=c}catch(a){console.error(a),g[r?"replace":"assign"](o)}}function S(i,c){const r=bt({},e.state,Ro(_.value.back,i,_.value.forward,!0),c,{position:_.value.position});y(i,r,!0),p.value=i}function f(i,c){const r=bt({},_.value,e.state,{forward:i,scroll:cn()});y(r.current,r,!0);const n=bt({},Ro(p.value,i,null),{position:r.position+1},c);y(i,n,!1),p.value=i}return{location:p,state:_,push:f,replace:S}}function Xh(t){t=Dh(t);const e=zh(t),g=Nh(t,e.state,e.location,e.replace);function p(y,S=!0){S||g.pauseListeners(),history.go(y)}const _=bt({location:"",base:t,go:p,createHref:Lh.bind(null,t)},e,g);return Object.defineProperty(_,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(_,"state",{enumerable:!0,get:()=>e.state.value}),_}function Hh(t){return typeof t=="string"||t&&typeof t=="object"}function Fo(t){return typeof t=="string"||typeof t=="symbol"}const ce={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},jo=$e("nf");var Io;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Io||(Io={}));function Je(t,e){return bt(new Error,{type:t,[jo]:!0},e)}function Me(t,e){return t instanceof Error&&jo in t&&(e==null||!!(t.type&e))}const Bo="[^/]+?",Yh={sensitive:!1,strict:!1,start:!0,end:!0},Wh=/[.+*?^${}()[\]/\\]/g;function Uh(t,e){const g=bt({},Yh,e),p=[];let _=g.start?"^":"";const y=[];for(const c of t){const r=c.length?[]:[90];g.strict&&!c.length&&(_+="/");for(let n=0;n<c.length;n++){const o=c[n];let a=40+(g.sensitive?.25:0);if(o.type===0)n||(_+="/"),_+=o.value.replace(Wh,"\\$&"),a+=40;else if(o.type===1){const{value:u,repeatable:l,optional:s,regexp:h}=o;y.push({name:u,repeatable:l,optional:s});const d=h||Bo;if(d!==Bo){a+=10;try{new RegExp(`(${d})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${u}" (${d}): `+v.message)}}let m=l?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;n||(m=s&&c.length<2?`(?:/${m})`:"/"+m),s&&(m+="?"),_+=m,a+=20,s&&(a+=-8),l&&(a+=-20),d===".*"&&(a+=-50)}r.push(a)}p.push(r)}if(g.strict&&g.end){const c=p.length-1;p[c][p[c].length-1]+=.7000000000000001}g.strict||(_+="/?"),g.end?_+="$":g.strict&&(_+="(?:/|$)");const S=new RegExp(_,g.sensitive?"":"i");function f(c){const r=c.match(S),n={};if(!r)return null;for(let o=1;o<r.length;o++){const a=r[o]||"",u=y[o-1];n[u.name]=a&&u.repeatable?a.split("/"):a}return n}function i(c){let r="",n=!1;for(const o of t){(!n||!r.endsWith("/"))&&(r+="/"),n=!1;for(const a of o)if(a.type===0)r+=a.value;else if(a.type===1){const{value:u,repeatable:l,optional:s}=a,h=u in c?c[u]:"";if(Array.isArray(h)&&!l)throw new Error(`Provided param "${u}" is an array but it is not repeatable (* or + modifiers)`);const d=Array.isArray(h)?h.join("/"):h;if(!d)if(s)o.length<2&&(r.endsWith("/")?r=r.slice(0,-1):n=!0);else throw new Error(`Missing required param "${u}"`);r+=d}}return r}return{re:S,score:p,keys:y,parse:f,stringify:i}}function Vh(t,e){let g=0;for(;g<t.length&&g<e.length;){const p=e[g]-t[g];if(p)return p;g++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Gh(t,e){let g=0;const p=t.score,_=e.score;for(;g<p.length&&g<_.length;){const y=Vh(p[g],_[g]);if(y)return y;g++}return _.length-p.length}const $h={type:0,value:""},qh=/[a-zA-Z0-9_]/;function Kh(t){if(!t)return[[]];if(t==="/")return[[$h]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(a){throw new Error(`ERR (${g})/"${c}": ${a}`)}let g=0,p=g;const _=[];let y;function S(){y&&_.push(y),y=[]}let f=0,i,c="",r="";function n(){!c||(g===0?y.push({type:0,value:c}):g===1||g===2||g===3?(y.length>1&&(i==="*"||i==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),y.push({type:1,value:c,regexp:r,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):e("Invalid state to consume buffer"),c="")}function o(){c+=i}for(;f<t.length;){if(i=t[f++],i==="\\"&&g!==2){p=g,g=4;continue}switch(g){case 0:i==="/"?(c&&n(),S()):i===":"?(n(),g=1):o();break;case 4:o(),g=p;break;case 1:i==="("?g=2:qh.test(i)?o():(n(),g=0,i!=="*"&&i!=="?"&&i!=="+"&&f--);break;case 2:i===")"?r[r.length-1]=="\\"?r=r.slice(0,-1)+i:g=3:r+=i;break;case 3:n(),g=0,i!=="*"&&i!=="?"&&i!=="+"&&f--,r="";break;default:e("Unknown state");break}}return g===2&&e(`Unfinished custom RegExp for param "${c}"`),n(),S(),_}function Jh(t,e,g){const p=Uh(Kh(t.path),g),_=bt(p,{record:t,parent:e,children:[],alias:[]});return e&&!_.record.aliasOf==!e.record.aliasOf&&e.children.push(_),_}function Zh(t,e){const g=[],p=new Map;e=zo({strict:!1,end:!0,sensitive:!1},e);function _(r){return p.get(r)}function y(r,n,o){const a=!o,u=tu(r);u.aliasOf=o&&o.record;const l=zo(e,r),s=[u];if("alias"in r){const m=typeof r.alias=="string"?[r.alias]:r.alias;for(const v of m)s.push(bt({},u,{components:o?o.record.components:u.components,path:v,aliasOf:o?o.record:u}))}let h,d;for(const m of s){const{path:v}=m;if(n&&v[0]!=="/"){const b=n.record.path,w=b[b.length-1]==="/"?"":"/";m.path=n.record.path+(v&&w+v)}if(h=Jh(m,n,l),o?o.alias.push(h):(d=d||h,d!==h&&d.alias.push(h),a&&r.name&&!No(h)&&S(r.name)),"children"in u){const b=u.children;for(let w=0;w<b.length;w++)y(b[w],h,o&&o.children[w])}o=o||h,i(h)}return d?()=>{S(d)}:xi}function S(r){if(Fo(r)){const n=p.get(r);n&&(p.delete(r),g.splice(g.indexOf(n),1),n.children.forEach(S),n.alias.forEach(S))}else{const n=g.indexOf(r);n>-1&&(g.splice(n,1),r.record.name&&p.delete(r.record.name),r.children.forEach(S),r.alias.forEach(S))}}function f(){return g}function i(r){let n=0;for(;n<g.length&&Gh(r,g[n])>=0;)n++;g.splice(n,0,r),r.record.name&&!No(r)&&p.set(r.record.name,r)}function c(r,n){let o,a={},u,l;if("name"in r&&r.name){if(o=p.get(r.name),!o)throw Je(1,{location:r});l=o.record.name,a=bt(Qh(n.params,o.keys.filter(d=>!d.optional).map(d=>d.name)),r.params),u=o.stringify(a)}else if("path"in r)u=r.path,o=g.find(d=>d.re.test(u)),o&&(a=o.parse(u),l=o.record.name);else{if(o=n.name?p.get(n.name):g.find(d=>d.re.test(n.path)),!o)throw Je(1,{location:r,currentLocation:n});l=o.record.name,a=bt({},n.params,r.params),u=o.stringify(a)}const s=[];let h=o;for(;h;)s.unshift(h.record),h=h.parent;return{name:l,path:u,params:a,matched:s,meta:iu(s)}}return t.forEach(r=>y(r)),{addRoute:y,resolve:c,removeRoute:S,getRoutes:f,getRecordMatcher:_}}function Qh(t,e){const g={};for(const p of e)p in t&&(g[p]=t[p]);return g}function tu(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:eu(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function eu(t){const e={},g=t.props||!1;if("component"in t)e.default=g;else for(const p in t.components)e[p]=typeof g=="boolean"?g:g[p];return e}function No(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function iu(t){return t.reduce((e,g)=>bt(e,g.meta),{})}function zo(t,e){const g={};for(const p in t)g[p]=p in e?e[p]:t[p];return g}const Xo=/#/g,nu=/&/g,ru=/\//g,su=/=/g,ou=/\?/g,Ho=/\+/g,au=/%5B/g,lu=/%5D/g,Yo=/%5E/g,cu=/%60/g,Wo=/%7B/g,hu=/%7C/g,Uo=/%7D/g,uu=/%20/g;function _r(t){return encodeURI(""+t).replace(hu,"|").replace(au,"[").replace(lu,"]")}function fu(t){return _r(t).replace(Wo,"{").replace(Uo,"}").replace(Yo,"^")}function yr(t){return _r(t).replace(Ho,"%2B").replace(uu,"+").replace(Xo,"%23").replace(nu,"%26").replace(cu,"`").replace(Wo,"{").replace(Uo,"}").replace(Yo,"^")}function du(t){return yr(t).replace(su,"%3D")}function gu(t){return _r(t).replace(Xo,"%23").replace(ou,"%3F")}function mu(t){return t==null?"":gu(t).replace(ru,"%2F")}function hn(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function pu(t){const e={};if(t===""||t==="?")return e;const p=(t[0]==="?"?t.slice(1):t).split("&");for(let _=0;_<p.length;++_){const y=p[_].replace(Ho," "),S=y.indexOf("="),f=hn(S<0?y:y.slice(0,S)),i=S<0?null:hn(y.slice(S+1));if(f in e){let c=e[f];Array.isArray(c)||(c=e[f]=[c]),c.push(i)}else e[f]=i}return e}function Vo(t){let e="";for(let g in t){const p=t[g];if(g=du(g),p==null){p!==void 0&&(e+=(e.length?"&":"")+g);continue}(Array.isArray(p)?p.map(y=>y&&yr(y)):[p&&yr(p)]).forEach(y=>{y!==void 0&&(e+=(e.length?"&":"")+g,y!=null&&(e+="="+y))})}return e}function vu(t){const e={};for(const g in t){const p=t[g];p!==void 0&&(e[g]=Array.isArray(p)?p.map(_=>_==null?null:""+_):p==null?p:""+p)}return e}function Ei(){let t=[];function e(p){return t.push(p),()=>{const _=t.indexOf(p);_>-1&&t.splice(_,1)}}function g(){t=[]}return{add:e,list:()=>t,reset:g}}function _e(t,e,g,p,_){const y=p&&(p.enterCallbacks[_]=p.enterCallbacks[_]||[]);return()=>new Promise((S,f)=>{const i=n=>{n===!1?f(Je(4,{from:g,to:e})):n instanceof Error?f(n):Hh(n)?f(Je(2,{from:e,to:n})):(y&&p.enterCallbacks[_]===y&&typeof n=="function"&&y.push(n),S())},c=t.call(p&&p.instances[_],e,g,i);let r=Promise.resolve(c);t.length<3&&(r=r.then(i)),r.catch(n=>f(n))})}function br(t,e,g,p){const _=[];for(const y of t)for(const S in y.components){let f=y.components[S];if(!(e!=="beforeRouteEnter"&&!y.instances[S]))if(_u(f)){const c=(f.__vccOpts||f)[e];c&&_.push(_e(c,g,p,y,S))}else{let i=f();_.push(()=>i.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${S}" at "${y.path}"`));const r=xh(c)?c.default:c;y.components[S]=r;const o=(r.__vccOpts||r)[e];return o&&_e(o,g,p,y,S)()}))}}return _}function _u(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Go(t){const e=kt(ln),g=kt(dr),p=xt(()=>e.resolve(se(t.to))),_=xt(()=>{const{matched:i}=p.value,{length:c}=i,r=i[c-1],n=g.matched;if(!r||!n.length)return-1;const o=n.findIndex(Ke.bind(null,r));if(o>-1)return o;const a=$o(i[c-2]);return c>1&&$o(r)===a&&n[n.length-1].path!==a?n.findIndex(Ke.bind(null,i[c-2])):o}),y=xt(()=>_.value>-1&&wu(g.params,p.value.params)),S=xt(()=>_.value>-1&&_.value===g.matched.length-1&&ko(g.params,p.value.params));function f(i={}){return Cu(i)?e[se(t.replace)?"replace":"push"](se(t.to)).catch(xi):Promise.resolve()}return{route:p,href:xt(()=>p.value.href),isActive:y,isExactActive:S,navigate:f}}const yu=$t({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Go,setup(t,{slots:e}){const g=hi(Go(t)),{options:p}=kt(ln),_=xt(()=>({[qo(t.activeClass,p.linkActiveClass,"router-link-active")]:g.isActive,[qo(t.exactActiveClass,p.linkExactActiveClass,"router-link-exact-active")]:g.isExactActive}));return()=>{const y=e.default&&e.default(g);return t.custom?y:Et("a",{"aria-current":g.isExactActive?t.ariaCurrentValue:null,href:g.href,onClick:g.navigate,class:_.value},y)}}}),bu=yu;function Cu(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function wu(t,e){for(const g in e){const p=e[g],_=t[g];if(typeof p=="string"){if(p!==_)return!1}else if(!Array.isArray(_)||_.length!==p.length||p.some((y,S)=>y!==_[S]))return!1}return!0}function $o(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const qo=(t,e,g)=>t!=null?t:e!=null?e:g,Su=$t({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:g}){const p=kt(gr),_=xt(()=>t.route||p.value),y=kt(Po,0),S=xt(()=>_.value.matched[y]);Se(Po,y+1),Se(Sh,S),Se(gr,_);const f=At();return le(()=>[f.value,S.value,t.name],([i,c,r],[n,o,a])=>{c&&(c.instances[r]=i,o&&o!==c&&i&&i===n&&(c.leaveGuards.size||(c.leaveGuards=o.leaveGuards),c.updateGuards.size||(c.updateGuards=o.updateGuards))),i&&c&&(!o||!Ke(c,o)||!n)&&(c.enterCallbacks[r]||[]).forEach(u=>u(i))},{flush:"post"}),()=>{const i=_.value,c=S.value,r=c&&c.components[t.name],n=t.name;if(!r)return Ko(g.default,{Component:r,route:i});const o=c.props[t.name],a=o?o===!0?i.params:typeof o=="function"?o(i):o:null,l=Et(r,bt({},a,e,{onVnodeUnmounted:s=>{s.component.isUnmounted&&(c.instances[n]=null)},ref:f}));return Ko(g.default,{Component:l,route:i})||l}}});function Ko(t,e){if(!t)return null;const g=t(e);return g.length===1?g[0]:g}const Jo=Su;function xu(t){const e=Zh(t.routes,t),g=t.parseQuery||pu,p=t.stringifyQuery||Vo,_=t.history,y=Ei(),S=Ei(),f=Ei(),i=_s(ce);let c=ce;qe&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const r=mr.bind(null,O=>""+O),n=mr.bind(null,mu),o=mr.bind(null,hn);function a(O,L){let j,X;return Fo(O)?(j=e.getRecordMatcher(O),X=L):X=O,e.addRoute(X,j)}function u(O){const L=e.getRecordMatcher(O);L&&e.removeRoute(L)}function l(){return e.getRoutes().map(O=>O.record)}function s(O){return!!e.getRecordMatcher(O)}function h(O,L){if(L=bt({},L||i.value),typeof O=="string"){const rt=pr(g,O,L.path),E=e.resolve({path:rt.path},L),M=_.createHref(rt.fullPath);return bt(rt,E,{params:o(E.params),hash:hn(rt.hash),redirectedFrom:void 0,href:M})}let j;if("path"in O)j=bt({},O,{path:pr(g,O.path,L.path).path});else{const rt=bt({},O.params);for(const E in rt)rt[E]==null&&delete rt[E];j=bt({},O,{params:n(O.params)}),L.params=n(L.params)}const X=e.resolve(j,L),V=O.hash||"";X.params=r(o(X.params));const tt=Eh(p,bt({},O,{hash:fu(V),path:X.path})),$=_.createHref(tt);return bt({fullPath:tt,hash:V,query:p===Vo?vu(O.query):O.query||{}},X,{redirectedFrom:void 0,href:$})}function d(O){return typeof O=="string"?pr(g,O,i.value.path):bt({},O)}function m(O,L){if(c!==O)return Je(8,{from:L,to:O})}function v(O){return C(O)}function b(O){return v(bt(d(O),{replace:!0}))}function w(O){const L=O.matched[O.matched.length-1];if(L&&L.redirect){const{redirect:j}=L;let X=typeof j=="function"?j(O):j;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=d(X):{path:X},X.params={}),bt({query:O.query,hash:O.hash,params:O.params},X)}}function C(O,L){const j=c=h(O),X=i.value,V=O.state,tt=O.force,$=O.replace===!0,rt=w(j);if(rt)return C(bt(d(rt),{state:V,force:tt,replace:$}),L||j);const E=j;E.redirectedFrom=L;let M;return!tt&&Ph(p,X,j)&&(M=Je(16,{to:E,from:X}),z(X,X,!0,!1)),(M?Promise.resolve(M):T(E,X)).catch(I=>Me(I)?I:Q(I,E,X)).then(I=>{if(I){if(Me(I,2))return C(bt(d(I.to),{state:V,force:tt,replace:$}),L||E)}else I=R(E,X,!0,$,V);return A(E,X,I),I})}function x(O,L){const j=m(O,L);return j?Promise.reject(j):Promise.resolve()}function T(O,L){let j;const[X,V,tt]=Tu(O,L);j=br(X.reverse(),"beforeRouteLeave",O,L);for(const rt of X)rt.leaveGuards.forEach(E=>{j.push(_e(E,O,L))});const $=x.bind(null,O,L);return j.push($),Ze(j).then(()=>{j=[];for(const rt of y.list())j.push(_e(rt,O,L));return j.push($),Ze(j)}).then(()=>{j=br(V,"beforeRouteUpdate",O,L);for(const rt of V)rt.updateGuards.forEach(E=>{j.push(_e(E,O,L))});return j.push($),Ze(j)}).then(()=>{j=[];for(const rt of O.matched)if(rt.beforeEnter&&!L.matched.includes(rt))if(Array.isArray(rt.beforeEnter))for(const E of rt.beforeEnter)j.push(_e(E,O,L));else j.push(_e(rt.beforeEnter,O,L));return j.push($),Ze(j)}).then(()=>(O.matched.forEach(rt=>rt.enterCallbacks={}),j=br(tt,"beforeRouteEnter",O,L),j.push($),Ze(j))).then(()=>{j=[];for(const rt of S.list())j.push(_e(rt,O,L));return j.push($),Ze(j)}).catch(rt=>Me(rt,8)?rt:Promise.reject(rt))}function A(O,L,j){for(const X of f.list())X(O,L,j)}function R(O,L,j,X,V){const tt=m(O,L);if(tt)return tt;const $=L===ce,rt=qe?history.state:{};j&&(X||$?_.replace(O.fullPath,bt({scroll:$&&rt&&rt.scroll},V)):_.push(O.fullPath,V)),i.value=O,z(O,L,j,$),k()}let P;function D(){P=_.listen((O,L,j)=>{const X=h(O),V=w(X);if(V){C(bt(V,{replace:!0}),X).catch(xi);return}c=X;const tt=i.value;qe&&jh(Mo(tt.fullPath,j.delta),cn()),T(X,tt).catch($=>Me($,4|8)?$:Me($,2)?(C($.to,X).then(rt=>{Me(rt,4|16)&&!j.delta&&j.type===Ti.pop&&_.go(-1,!1)}).catch(xi),Promise.reject()):(j.delta&&_.go(-j.delta,!1),Q($,X,tt))).then($=>{$=$||R(X,tt,!1),$&&(j.delta?_.go(-j.delta,!1):j.type===Ti.pop&&Me($,4|16)&&_.go(-1,!1)),A(X,tt,$)}).catch(xi)})}let N=Ei(),K=Ei(),W;function Q(O,L,j){k(O);const X=K.list();return X.length?X.forEach(V=>V(O,L,j)):console.error(O),Promise.reject(O)}function nt(){return W&&i.value!==ce?Promise.resolve():new Promise((O,L)=>{N.add([O,L])})}function k(O){W||(W=!0,D(),N.list().forEach(([L,j])=>O?j(O):L()),N.reset())}function z(O,L,j,X){const{scrollBehavior:V}=t;if(!qe||!V)return Promise.resolve();const tt=!j&&Ih(Mo(O.fullPath,0))||(X||!j)&&history.state&&history.state.scroll||null;return rr().then(()=>V(O,L,tt)).then($=>$&&Fh($)).catch($=>Q($,O,L))}const Y=O=>_.go(O);let G;const lt=new Set;return{currentRoute:i,addRoute:a,removeRoute:u,hasRoute:s,getRoutes:l,resolve:h,options:t,push:v,replace:b,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:y.add,beforeResolve:S.add,afterEach:f.add,onError:K.add,isReady:nt,install(O){const L=this;O.component("RouterLink",bu),O.component("RouterView",Jo),O.config.globalProperties.$router=L,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>se(i)}),qe&&!G&&i.value===ce&&(G=!0,v(_.location).catch(V=>{}));const j={};for(const V in ce)j[V]=xt(()=>i.value[V]);O.provide(ln,L),O.provide(dr,hi(j)),O.provide(gr,i);const X=O.unmount;lt.add(O),O.unmount=function(){lt.delete(O),lt.size<1&&(c=ce,P&&P(),i.value=ce,G=!1,W=!1),X()}}}}function Ze(t){return t.reduce((e,g)=>e.then(()=>g()),Promise.resolve())}function Tu(t,e){const g=[],p=[],_=[],y=Math.max(e.matched.length,t.matched.length);for(let S=0;S<y;S++){const f=e.matched[S];f&&(t.matched.find(c=>Ke(c,f))?p.push(f):g.push(f));const i=t.matched[S];i&&(e.matched.find(c=>Ke(c,i))||_.push(i))}return[g,p,_]}function Cr(){return kt(ln)}function un(){return kt(dr)}const Ou=$t({setup(t,e){const g=At(!1);return te(()=>{g.value=!0}),()=>{var p,_;return g.value?(_=(p=e.slots).default)===null||_===void 0?void 0:_.call(p):null}}}),Eu="modulepreload",Zo={},Pu="/",ht=function(e,g){return!g||g.length===0?e():Promise.all(g.map(p=>{if(p=`${Pu}${p}`,p in Zo)return;Zo[p]=!0;const _=p.endsWith(".css"),y=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const S=document.createElement("link");if(S.rel=_?"stylesheet":Eu,_||(S.as="script",S.crossOrigin=""),S.href=p,document.head.appendChild(S),_)return new Promise((f,i)=>{S.addEventListener("load",f),S.addEventListener("error",i)})})).then(()=>e())},Qo={"v-8daa1a0e":yt(()=>ht(()=>import("./index.html.0c90aa9e.js"),[])),"v-760ae03a":yt(()=>ht(()=>import("./support.html.32b999f2.js"),[])),"v-2d0a89b7":yt(()=>ht(()=>import("./index.html.fef09a2c.js"),[])),"v-6240d60f":yt(()=>ht(()=>import("./app.html.65f6c1b6.js"),[])),"v-65adaa6c":yt(()=>ht(()=>import("./arch.html.3f6fb1a0.js"),[])),"v-1c250430":yt(()=>ht(()=>import("./browser.html.da261c9a.js"),[])),"v-54572926":yt(()=>ht(()=>import("./css.html.5dc4266b.js"),[])),"v-070cbd00":yt(()=>ht(()=>import("./fis.html.0eae57fa.js"),[])),"v-0b563763":yt(()=>ht(()=>import("./hot.html.12f5d790.js"),[])),"v-03101522":yt(()=>ht(()=>import("./interview.html.28ba4814.js"),[])),"v-88a59616":yt(()=>ht(()=>import("./javascript.html.5a2981ef.js"),[])),"v-35690f80":yt(()=>ht(()=>import("./node.html.9678110e.js"),[])),"v-3556a88e":yt(()=>ht(()=>import("./perf.html.d53e6d7e.js"),[])),"v-7d10a6d2":yt(()=>ht(()=>import("./project.html.85034ff1.js"),[])),"v-c52ce09e":yt(()=>ht(()=>import("./react.html.d448f8f1.js"),[])),"v-eb779d42":yt(()=>ht(()=>import("./server.html.9604b0c2.js"),[])),"v-f99f08a0":yt(()=>ht(()=>import("./test.html.a169ce48.js"),[])),"v-1a829e46":yt(()=>ht(()=>import("./typescript.html.ccf4a405.js"),[])),"v-4519446c":yt(()=>ht(()=>import("./vue.html.8a6adc0f.js"),[])),"v-2d0a96cb":yt(()=>ht(()=>import("./index.html.2426f41c.js"),[])),"v-25cc5155":yt(()=>ht(()=>import("./algorithm.html.beed7296.js"),[])),"v-2da0e54d":yt(()=>ht(()=>import("./internet.html.74b477ab.js"),[])),"v-1e823484":yt(()=>ht(()=>import("./soft.html.dd2a589c.js"),[])),"v-5c7b669e":yt(()=>ht(()=>import("./weibo.html.d1f50e14.js"),[])),"v-3706649a":yt(()=>ht(()=>import("./404.html.3a23c9bf.js"),[]))},Au={"v-8daa1a0e":()=>ht(()=>import("./index.html.433e640b.js"),[]).then(({data:t})=>t),"v-760ae03a":()=>ht(()=>import("./support.html.5f2f4ffe.js"),[]).then(({data:t})=>t),"v-2d0a89b7":()=>ht(()=>import("./index.html.e4524b97.js"),[]).then(({data:t})=>t),"v-6240d60f":()=>ht(()=>import("./app.html.3997690b.js"),[]).then(({data:t})=>t),"v-65adaa6c":()=>ht(()=>import("./arch.html.e745b9f3.js"),[]).then(({data:t})=>t),"v-1c250430":()=>ht(()=>import("./browser.html.2b093e7d.js"),[]).then(({data:t})=>t),"v-54572926":()=>ht(()=>import("./css.html.1de5131b.js"),[]).then(({data:t})=>t),"v-070cbd00":()=>ht(()=>import("./fis.html.288650cb.js"),[]).then(({data:t})=>t),"v-0b563763":()=>ht(()=>import("./hot.html.be7c32ba.js"),[]).then(({data:t})=>t),"v-03101522":()=>ht(()=>import("./interview.html.eaffaf1d.js"),[]).then(({data:t})=>t),"v-88a59616":()=>ht(()=>import("./javascript.html.5de674ab.js"),[]).then(({data:t})=>t),"v-35690f80":()=>ht(()=>import("./node.html.c17cffd0.js"),[]).then(({data:t})=>t),"v-3556a88e":()=>ht(()=>import("./perf.html.e36760cc.js"),[]).then(({data:t})=>t),"v-7d10a6d2":()=>ht(()=>import("./project.html.9ccb9fee.js"),[]).then(({data:t})=>t),"v-c52ce09e":()=>ht(()=>import("./react.html.1997469a.js"),[]).then(({data:t})=>t),"v-eb779d42":()=>ht(()=>import("./server.html.5117a45a.js"),[]).then(({data:t})=>t),"v-f99f08a0":()=>ht(()=>import("./test.html.ba91567c.js"),[]).then(({data:t})=>t),"v-1a829e46":()=>ht(()=>import("./typescript.html.38b3d142.js"),[]).then(({data:t})=>t),"v-4519446c":()=>ht(()=>import("./vue.html.2b5a506d.js"),[]).then(({data:t})=>t),"v-2d0a96cb":()=>ht(()=>import("./index.html.68dba4bb.js"),[]).then(({data:t})=>t),"v-25cc5155":()=>ht(()=>import("./algorithm.html.f11f22e2.js"),[]).then(({data:t})=>t),"v-2da0e54d":()=>ht(()=>import("./internet.html.9c389d1e.js"),[]).then(({data:t})=>t),"v-1e823484":()=>ht(()=>import("./soft.html.fceb0eae.js"),[]).then(({data:t})=>t),"v-5c7b669e":()=>ht(()=>import("./weibo.html.fb2d83cb.js"),[]).then(({data:t})=>t),"v-3706649a":()=>ht(()=>import("./404.html.beaa804c.js"),[]).then(({data:t})=>t)},ta=At(Au),wr=Ln({key:"",path:"",title:"",lang:"",frontmatter:{},excerpt:"",headers:[]}),ye=At(wr),Qe=()=>ye,ku=async t=>{const e=ta.value[t];if(!e)return wr;const g=await e();return g!=null?g:wr};Nr.webpackHot&&(__VUE_HMR_RUNTIME__.updatePageData=t=>{ta.value[t.key]=()=>Promise.resolve(t),t.key===ye.value.key&&(ye.value=t)});const ea=Symbol(""),Du=()=>{const t=kt(ea);if(!t)throw new Error("usePageFrontmatter() is called without provider.");return t},Mu=t=>t.frontmatter,Lu=([t,e,g])=>t==="meta"&&e.name?`${t}.${e.name}`:["title","base"].includes(t)?t:t==="template"&&e.id?`${t}.${e.id}`:JSON.stringify([t,e,g]),Ru=t=>{const e=new Set,g=[];return t.forEach(p=>{const _=Lu(p);e.has(_)||(e.add(_),g.push(p))}),g},Fu=t=>/^(https?:)?\/\//.test(t),Vp=t=>/^mailto:/.test(t),Gp=t=>/^tel:/.test(t),ia=t=>Object.prototype.toString.call(t)==="[object Object]",ju=t=>t.replace(/\/$/,""),Iu=t=>t.replace(/^\//,""),na=(t,e)=>{const g=Object.keys(t).sort((p,_)=>{const y=_.split("/").length-p.split("/").length;return y!==0?y:_.length-p.length});for(const p of g)if(e.startsWith(p))return p;return"/"},ra=Symbol(""),Bu=()=>{const t=kt(ra);if(!t)throw new Error("usePageHead() is called without provider.");return t},Nu=(t,e,g)=>{const p=Ct(e.description)?e.description:g.description,_=[...ut(e.head)?e.head:[],...g.head,["title",{},t],["meta",{name:"description",content:p}]];return Ru(_)},zu=Symbol(""),Xu=(t,e)=>`${t.title?`${t.title} | `:""}${e.title}`,sa=Symbol(""),Hu=()=>{const t=kt(sa);if(!t)throw new Error("usePageLang() is called without provider.");return t},Yu=t=>t.lang||"en",Sr=Symbol(""),$p=()=>{const t=kt(Sr);if(!t)throw new Error("useRouteLocale() is called without provider.");return t},Wu=(t,e)=>na(t,e),Uu={base:"/",lang:"en-US",title:"\u674E\u5C0F\u51E1\u7F16\u7A0B\u81EA\u5B66\u7F51",description:"\u5B66\u524D\u7AEF\u7684\u6700\u4F73\u5B9E\u8DF5.",head:[["link",{rel:"shortcut icon",type:"image/x-icon",href:"/logo.ico"}]],locales:{}},Le=At(Uu),Vu=()=>Le;Nr.webpackHot&&(__VUE_HMR_RUNTIME__.updateSiteData=t=>{Le.value=t});const oa=Symbol(""),qp=()=>{const t=kt(oa);if(!t)throw new Error("useSiteLocaleData() is called without provider.");return t},Gu=(t,e)=>Jt(Jt({},t),t.locales[e]),$u=Symbol(""),qu=()=>{const t=un(),e=Bu(),g=Hu(),p=At([]),_=()=>{e.value.forEach(S=>{const f=Ku(S);f&&p.value.push(f)})},y=()=>{document.documentElement.lang=g.value,p.value.forEach(S=>{S.parentNode===document.head&&document.head.removeChild(S)}),p.value.splice(0,p.value.length),e.value.forEach(S=>{const f=Ju(S);f!==null&&(document.head.appendChild(f),p.value.push(f))})};Se($u,y),te(()=>{_(),y(),le(()=>t.path,()=>y())})},Ku=([t,e,g=""])=>{const p=Object.entries(e).map(([f,i])=>Ct(i)?`[${f}="${i}"]`:i===!0?`[${f}]`:"").join(""),_=`head > ${t}${p}`;return Array.from(document.querySelectorAll(_)).find(f=>f.innerText===g)||null},Ju=([t,e,g])=>{if(!Ct(t))return null;const p=document.createElement(t);return ia(e)&&Object.entries(e).forEach(([_,y])=>{Ct(y)?p.setAttribute(_,y):y===!0&&p.setAttribute(_,"")}),Ct(g)&&p.appendChild(document.createTextNode(g)),p},xr=t=>{let e;t.pageKey?e=t.pageKey:e=Qe().value.key;const g=Qo[e];return g?Et(g):Et("div","404 Not Found")};xr.displayName="Content";xr.props={pageKey:{type:String,required:!1}};const Zu={"404":yt(()=>ht(()=>import("./404.e53b27b9.js"),[])),Layout:yt(()=>ht(()=>import("./Layout.fa062e84.js"),[]))},aa=$t({name:"Vuepress",setup(){const t=Qe(),e=xt(()=>{let g;if(t.value.path){const p=t.value.frontmatter.layout;Ct(p)?g=p:g="Layout"}else g="404";return Zu[g]||Sc(g,!1)});return()=>Et(e.value)}}),Pi=t=>t,Tr=t=>t,Qu=t=>Fu(t)?t:`${Vu().value.base}${Iu(t)}`;const tf=Et("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[Et("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),Et("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),Or=(t,{slots:e})=>{var g;return Et("span",[tf,(g=e.default)===null||g===void 0?void 0:g.call(e)])};Or.displayName="ExternalLinkIcon";var ef=Pi(({app:t})=>{t.component("ExternalLinkIcon",Or)});/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */var Re=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var g=arguments[e];for(var p in g)Object.prototype.hasOwnProperty.call(g,p)&&(t[p]=g[p])}return t},fn=function(e){return e.tagName==="IMG"},nf=function(e){return NodeList.prototype.isPrototypeOf(e)},dn=function(e){return e&&e.nodeType===1},la=function(e){var g=e.currentSrc||e.src;return g.substr(-4).toLowerCase()===".svg"},ca=function(e){try{return Array.isArray(e)?e.filter(fn):nf(e)?[].slice.call(e).filter(fn):dn(e)?[e].filter(fn):typeof e=="string"?[].slice.call(document.querySelectorAll(e)).filter(fn):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},rf=function(e){var g=document.createElement("div");return g.classList.add("medium-zoom-overlay"),g.style.background=e,g},sf=function(e){var g=e.getBoundingClientRect(),p=g.top,_=g.left,y=g.width,S=g.height,f=e.cloneNode(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return f.removeAttribute("id"),f.style.position="absolute",f.style.top=p+i+"px",f.style.left=_+c+"px",f.style.width=y+"px",f.style.height=S+"px",f.style.transform="",f},ti=function(e,g){var p=Re({bubbles:!1,cancelable:!1,detail:void 0},g);if(typeof window.CustomEvent=="function")return new CustomEvent(e,p);var _=document.createEvent("CustomEvent");return _.initCustomEvent(e,p.bubbles,p.cancelable,p.detail),_},of=function t(e){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=window.Promise||function(P){function D(){}P(D,D)},_=function(P){var D=P.target;if(D===T){u();return}m.indexOf(D)!==-1&&l({target:D})},y=function(){if(!(b||!x.original)){var P=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(w-P)>C.scrollOffset&&setTimeout(u,150)}},S=function(P){var D=P.key||P.keyCode;(D==="Escape"||D==="Esc"||D===27)&&u()},f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=P;if(P.background&&(T.style.background=P.background),P.container&&P.container instanceof Object&&(D.container=Re({},C.container,P.container)),P.template){var N=dn(P.template)?P.template:document.querySelector(P.template);D.template=N}return C=Re({},C,D),m.forEach(function(K){K.dispatchEvent(ti("medium-zoom:update",{detail:{zoom:A}}))}),A},i=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t(Re({},C,P))},c=function(){for(var P=arguments.length,D=Array(P),N=0;N<P;N++)D[N]=arguments[N];var K=D.reduce(function(W,Q){return[].concat(W,ca(Q))},[]);return K.filter(function(W){return m.indexOf(W)===-1}).forEach(function(W){m.push(W),W.classList.add("medium-zoom-image")}),v.forEach(function(W){var Q=W.type,nt=W.listener,k=W.options;K.forEach(function(z){z.addEventListener(Q,nt,k)})}),A},r=function(){for(var P=arguments.length,D=Array(P),N=0;N<P;N++)D[N]=arguments[N];x.zoomed&&u();var K=D.length>0?D.reduce(function(W,Q){return[].concat(W,ca(Q))},[]):m;return K.forEach(function(W){W.classList.remove("medium-zoom-image"),W.dispatchEvent(ti("medium-zoom:detach",{detail:{zoom:A}}))}),m=m.filter(function(W){return K.indexOf(W)===-1}),A},n=function(P,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return m.forEach(function(K){K.addEventListener("medium-zoom:"+P,D,N)}),v.push({type:"medium-zoom:"+P,listener:D,options:N}),A},o=function(P,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return m.forEach(function(K){K.removeEventListener("medium-zoom:"+P,D,N)}),v=v.filter(function(K){return!(K.type==="medium-zoom:"+P&&K.listener.toString()===D.toString())}),A},a=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=P.target,N=function(){var W={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},Q=void 0,nt=void 0;if(C.container)if(C.container instanceof Object)W=Re({},W,C.container),Q=W.width-W.left-W.right-C.margin*2,nt=W.height-W.top-W.bottom-C.margin*2;else{var k=dn(C.container)?C.container:document.querySelector(C.container),z=k.getBoundingClientRect(),Y=z.width,G=z.height,lt=z.left,F=z.top;W=Re({},W,{width:Y,height:G,left:lt,top:F})}Q=Q||W.width-C.margin*2,nt=nt||W.height-C.margin*2;var O=x.zoomedHd||x.original,L=la(O)?Q:O.naturalWidth||Q,j=la(O)?nt:O.naturalHeight||nt,X=O.getBoundingClientRect(),V=X.top,tt=X.left,$=X.width,rt=X.height,E=Math.min(L,Q)/$,M=Math.min(j,nt)/rt,I=Math.min(E,M),H=(-tt+(Q-$)/2+C.margin+W.left)/I,U=(-V+(nt-rt)/2+C.margin+W.top)/I,Z="scale("+I+") translate3d("+H+"px, "+U+"px, 0)";x.zoomed.style.transform=Z,x.zoomedHd&&(x.zoomedHd.style.transform=Z)};return new p(function(K){if(D&&m.indexOf(D)===-1){K(A);return}var W=function Y(){b=!1,x.zoomed.removeEventListener("transitionend",Y),x.original.dispatchEvent(ti("medium-zoom:opened",{detail:{zoom:A}})),K(A)};if(x.zoomed){K(A);return}if(D)x.original=D;else if(m.length>0){var Q=m;x.original=Q[0]}else{K(A);return}if(x.original.dispatchEvent(ti("medium-zoom:open",{detail:{zoom:A}})),w=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,b=!0,x.zoomed=sf(x.original),document.body.appendChild(T),C.template){var nt=dn(C.template)?C.template:document.querySelector(C.template);x.template=document.createElement("div"),x.template.appendChild(nt.content.cloneNode(!0)),document.body.appendChild(x.template)}if(document.body.appendChild(x.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),x.original.classList.add("medium-zoom-image--hidden"),x.zoomed.classList.add("medium-zoom-image--opened"),x.zoomed.addEventListener("click",u),x.zoomed.addEventListener("transitionend",W),x.original.getAttribute("data-zoom-src")){x.zoomedHd=x.zoomed.cloneNode(),x.zoomedHd.removeAttribute("srcset"),x.zoomedHd.removeAttribute("sizes"),x.zoomedHd.src=x.zoomed.getAttribute("data-zoom-src"),x.zoomedHd.onerror=function(){clearInterval(k),console.warn("Unable to reach the zoom image target "+x.zoomedHd.src),x.zoomedHd=null,N()};var k=setInterval(function(){x.zoomedHd.complete&&(clearInterval(k),x.zoomedHd.classList.add("medium-zoom-image--opened"),x.zoomedHd.addEventListener("click",u),document.body.appendChild(x.zoomedHd),N())},10)}else if(x.original.hasAttribute("srcset")){x.zoomedHd=x.zoomed.cloneNode(),x.zoomedHd.removeAttribute("sizes"),x.zoomedHd.removeAttribute("loading");var z=x.zoomedHd.addEventListener("load",function(){x.zoomedHd.removeEventListener("load",z),x.zoomedHd.classList.add("medium-zoom-image--opened"),x.zoomedHd.addEventListener("click",u),document.body.appendChild(x.zoomedHd),N()})}else N()})},u=function(){return new p(function(P){if(b||!x.original){P(A);return}var D=function N(){x.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(x.zoomed),x.zoomedHd&&document.body.removeChild(x.zoomedHd),document.body.removeChild(T),x.zoomed.classList.remove("medium-zoom-image--opened"),x.template&&document.body.removeChild(x.template),b=!1,x.zoomed.removeEventListener("transitionend",N),x.original.dispatchEvent(ti("medium-zoom:closed",{detail:{zoom:A}})),x.original=null,x.zoomed=null,x.zoomedHd=null,x.template=null,P(A)};b=!0,document.body.classList.remove("medium-zoom--opened"),x.zoomed.style.transform="",x.zoomedHd&&(x.zoomedHd.style.transform=""),x.template&&(x.template.style.transition="opacity 150ms",x.template.style.opacity=0),x.original.dispatchEvent(ti("medium-zoom:close",{detail:{zoom:A}})),x.zoomed.addEventListener("transitionend",D)})},l=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=P.target;return x.original?u():a({target:D})},s=function(){return C},h=function(){return m},d=function(){return x.original},m=[],v=[],b=!1,w=0,C=g,x={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(e)==="[object Object]"?C=e:(e||typeof e=="string")&&c(e),C=Re({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},C);var T=rf(C.background);document.addEventListener("click",_),document.addEventListener("keyup",S),document.addEventListener("scroll",y),window.addEventListener("resize",u);var A={open:a,close:u,toggle:l,update:f,clone:i,attach:c,detach:r,on:n,off:o,getOptions:s,getImages:h,getZoomedImage:d};return A};function af(t,e){e===void 0&&(e={});var g=e.insertAt;if(!(!t||typeof document=="undefined")){var p=document.head||document.getElementsByTagName("head")[0],_=document.createElement("style");_.type="text/css",g==="top"&&p.firstChild?p.insertBefore(_,p.firstChild):p.appendChild(_),_.styleSheet?_.styleSheet.cssText=t:_.appendChild(document.createTextNode(t))}}var lf=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";af(lf);var cf=of;const hf=Symbol("mediumZoom");const uf=".theme-default-content > img, .theme-default-content :not(a) > img",ff={},df=400;var gf=Pi(({app:t,router:e})=>{const g=cf(ff);g.refresh=(p=uf)=>{g.detach(),g.attach(p)},t.provide(hf,g),e.afterEach(()=>{setTimeout(()=>g.refresh(),df)})});const mf={logo:"/logo.png",contributors:!1,contributorsText:"\u8D21\u732E\u8005",lastUpdatedText:"\u4E0A\u6B21\u66F4\u65B0",notFound:["\u8FD9\u5C31\u6233\u78B0\u5230\u6211\u77E5\u8BC6\u7684\u76F2\u70B9\u4E86"],editLinkText:"\u7F16\u8F91\u9875\u9762",docsRepo:"https://github.com/FinnLee2017/FinnLee2017.github.io",docsBranch:"main",docsDir:"docs",navbar:[{text:"Github",link:"https://github.com/FinnLee2017/FinnLee2017.github.io"}],sidebar:["/fe/README.md",{text:"HTML5",children:["/fe/css.md","/fe/Javascript.md","/fe/project.md","/fe/interview.md","/fe/server.md"]},{text:"CSS3",children:["/fe/vue.md","/fe/react.md","/fe/typescript.md","/fe/node.md","/fe/fis.md","/fe/arch.md","/fe/perf.md","/fe/browser.md"]},{text:"JavaScript",children:["/it/soft.md","/it/internet.md","/it/algorithm.md"]}],locales:{"/":{selectLanguageName:"English"}},darkMode:!0,repo:null,selectLanguageText:"Languages",selectLanguageAriaLabel:"Select language",sidebarDepth:2,editLink:!0,lastUpdated:!0,backToHome:"Take me home",openInNewWindow:"open in new window",toggleDarkMode:"toggle dark mode",toggleSidebar:"toggle sidebar"},ha=At(mf),pf=()=>ha;Nr.webpackHot&&(__VUE_HMR_RUNTIME__.updateThemeData=t=>{ha.value=t});const ua=Symbol(""),vf=()=>{const t=kt(ua);if(!t)throw new Error("useThemeLocaleData() is called without provider.");return t},_f=(t,e)=>{var g;return Jt(Jt({},t),(g=t.locales)===null||g===void 0?void 0:g[e])};var yf=Pi(({app:t})=>{const e=pf(),g=t._context.provides[Sr],p=xt(()=>_f(e.value,g.value));t.provide(ua,p),Object.defineProperties(t.config.globalProperties,{$theme:{get(){return e.value}},$themeLocale:{get(){return p.value}}})});const bf=$t({props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(t){return(e,g)=>(ie(),Ee("span",{class:ri(["badge",t.type]),style:Mi({verticalAlign:t.vertical})},[Ks(e.$slots,"default",{},()=>[Jn(vn(t.text),1)])],6))}});var Cf=$t({name:"CodeGroup",setup(t,{slots:e}){const g=At(-1),p=At([]),_=(f=g.value)=>{f<p.value.length-1?g.value=f+1:g.value=0,p.value[g.value].focus()},y=(f=g.value)=>{f>0?g.value=f-1:g.value=p.value.length-1,p.value[g.value].focus()},S=(f,i)=>{f.key===" "||f.key==="Enter"?(f.preventDefault(),g.value=i):f.key==="ArrowRight"?(f.preventDefault(),_(i)):f.key==="ArrowLeft"&&(f.preventDefault(),y(i))};return()=>{var f;const i=(((f=e.default)===null||f===void 0?void 0:f.call(e))||[]).filter(c=>c.type.name==="CodeGroupItem").map(c=>(c.props===null&&(c.props={}),c));return i.length===0?null:(g.value<0||g.value>i.length-1?(g.value=i.findIndex(c=>c.props.active===""||c.props.active===!0),g.value===-1&&(g.value=0)):i.forEach((c,r)=>{c.props.active=r===g.value}),Et("div",{class:"code-group"},[Et("div",{class:"code-group__nav"},Et("ul",{class:"code-group__ul"},i.map((c,r)=>{const n=r===g.value;return Et("li",{class:"code-group__li"},Et("button",{ref:o=>{o&&(p.value[r]=o)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":n},ariaPressed:n,ariaExpanded:n,onClick:()=>g.value=r,onKeydown:o=>S(o,r)},c.props.title))}))),i]))}}});const wf=["aria-selected"],Sf=$t({name:"CodeGroupItem"}),xf=$t(ni(Jt({},Sf),{props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(t){return(e,g)=>(ie(),Ee("div",{class:ri(["code-group-item",{"code-group-item__active":t.active}]),"aria-selected":t.active},[Ks(e.$slots,"default")],10,wf))}}));function fa(t){return sl()?(ol(t),!0):!1}const Ai=typeof window!="undefined",Tf=t=>typeof t=="string",Er=()=>{};function Of(t,e){function g(...p){t(()=>e.apply(this,p),{fn:e,thisArg:this,args:p})}return g}const Ef=t=>t();var da=Object.getOwnPropertySymbols,Pf=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable,kf=(t,e)=>{var g={};for(var p in t)Pf.call(t,p)&&e.indexOf(p)<0&&(g[p]=t[p]);if(t!=null&&da)for(var p of da(t))e.indexOf(p)<0&&Af.call(t,p)&&(g[p]=t[p]);return g};function Df(t,e,g={}){const p=g,{eventFilter:_=Ef}=p,y=kf(p,["eventFilter"]);return le(t,Of(_,e),y)}function Mf(t,e=!0){Zs()?te(t):e?t():rr(t)}const gn=Ai?window:void 0;Ai&&window.document;Ai&&window.navigator;Ai&&window.location;function Lf(...t){let e,g,p,_;if(Tf(t[0])?([g,p,_]=t,e=gn):[e,g,p,_]=t,!e)return Er;let y=Er;const S=le(()=>se(e),i=>{y(),!!i&&(i.addEventListener(g,p,_),y=()=>{i.removeEventListener(g,p,_),y=Er})},{immediate:!0,flush:"post"}),f=()=>{S(),y()};return fa(f),f}function Rf(t,e={}){const{window:g=gn}=e;let p;const _=At(!1),y=()=>{!g||(p||(p=g.matchMedia(t)),_.value=p.matches)};return Mf(()=>{y(),!!p&&("addEventListener"in p?p.addEventListener("change",y):p.addListener(y),fa(()=>{"removeEventListener"in y?p.removeEventListener("change",y):p.removeListener(y)}))}),_}const Pr="__vueuse_ssr_handlers__";globalThis[Pr]=globalThis[Pr]||{};const Ff=globalThis[Pr];function jf(t,e){return Ff[t]||e}function If(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"||Array.isArray(t)?"object":Number.isNaN(t)?"any":"number"}const Bf={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))}};function Nf(t,e,g=jf("getDefaultStorage",()=>{var _;return(_=gn)==null?void 0:_.localStorage})(),p={}){var _;const{flush:y="pre",deep:S=!0,listenToStorageChanges:f=!0,writeDefaults:i=!0,shallow:c,window:r=gn,eventFilter:n,onError:o=d=>{console.error(d)}}=p,a=se(e),u=If(a),l=(c?_s:At)(e),s=(_=p.serializer)!=null?_:Bf[u];function h(d){if(!(!g||d&&d.key!==t))try{const m=d?d.newValue:g.getItem(t);m==null?(l.value=a,i&&a!==null&&g.setItem(t,s.write(a))):typeof m!="string"?l.value=m:l.value=s.read(m)}catch(m){o(m)}}return h(),r&&f&&Lf(r,"storage",d=>setTimeout(()=>h(d),0)),g&&Df(l,()=>{try{l.value==null?g.removeItem(t):g.setItem(t,s.write(l.value))}catch(d){o(d)}},{flush:y,deep:S,eventFilter:n}),l}function zf(t){return Rf("(prefers-color-scheme: dark)",t)}var ga,ma;Ai&&(window==null?void 0:window.navigator)&&((ga=window==null?void 0:window.navigator)==null?void 0:ga.platform)&&/iP(ad|hone|od)/.test((ma=window==null?void 0:window.navigator)==null?void 0:ma.platform);var Xf=Object.defineProperty,pa=Object.getOwnPropertySymbols,Hf=Object.prototype.hasOwnProperty,Yf=Object.prototype.propertyIsEnumerable,va=(t,e,g)=>e in t?Xf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:g}):t[e]=g,Wf=(t,e)=>{for(var g in e||(e={}))Hf.call(e,g)&&va(t,g,e[g]);if(pa)for(var g of pa(e))Yf.call(e,g)&&va(t,g,e[g]);return t};const Uf={top:0,left:0,bottom:0,right:0,height:0,width:0};Wf({text:""},Uf);const _a=Symbol(""),Kp=()=>{const t=kt(_a);if(!t)throw new Error("useDarkMode() is called without provider.");return t},Vf=()=>{const t=Dr(),e=zf(),g=Nf("vuepress-color-scheme","auto"),p=xt({get(){return t.value.darkMode?g.value==="auto"?e.value:g.value==="dark":!1},set(_){_===e.value?g.value="auto":g.value=_?"dark":"light"}});Se(_a,p),Gf(p)},Gf=t=>{const e=(g=t.value)=>{const p=window==null?void 0:window.document.querySelector("html");p==null||p.classList.toggle("dark",g)};te(()=>{le(t,e,{immediate:!0})}),Wn(()=>e())},ya=(...t)=>{const g=Cr().resolve(...t),p=g.matched[g.matched.length-1];if(!(p==null?void 0:p.redirect))return g;const{redirect:_}=p,y=gt(_)?_(g):_,S=Ct(y)?{path:y}:y;return ya(Jt({hash:g.hash,query:g.query,params:g.params},S))},$f=t=>{const e=ya(t);return{text:e.meta.title||t,link:e.name==="404"?t:e.fullPath}};let Ar=null,ki=null;const qf={wait:()=>Ar,pending:()=>{Ar=new Promise(t=>ki=t)},resolve:()=>{ki==null||ki(),Ar=null,ki=null}},Kf=()=>qf,ba=Symbol("sidebarItems"),Jp=()=>{const t=kt(ba);if(!t)throw new Error("useSidebarItems() is called without provider.");return t},Jf=()=>{const t=Dr(),e=Du(),g=xt(()=>Zf(e.value,t.value));Se(ba,g)},Zf=(t,e)=>{var g,p,_,y;const S=(p=(g=t.sidebar)!==null&&g!==void 0?g:e.sidebar)!==null&&p!==void 0?p:"auto",f=(y=(_=t.sidebarDepth)!==null&&_!==void 0?_:e.sidebarDepth)!==null&&y!==void 0?y:2;return t.home||S===!1?[]:S==="auto"?td(f):ut(S)?Ca(S,f):ia(S)?ed(S,f):[]},Qf=(t,e)=>({text:t.title,link:`#${t.slug}`,children:kr(t.children,e)}),kr=(t,e)=>e>0?t.map(g=>Qf(g,e-1)):[],td=t=>{const e=Qe();return[{text:e.value.title,children:kr(e.value.headers,t)}]},Ca=(t,e)=>{const g=un(),p=Qe(),_=y=>{var S;let f;if(Ct(y)?f=$f(y):f=y,f.children)return ni(Jt({},f),{children:f.children.map(i=>_(i))});if(f.link===g.path){const i=((S=p.value.headers[0])===null||S===void 0?void 0:S.level)===1?p.value.headers[0].children:p.value.headers;return ni(Jt({},f),{children:kr(i,e)})}return f};return t.map(y=>_(y))},ed=(t,e)=>{var g;const p=un(),_=na(t,p.path),y=(g=t[_])!==null&&g!==void 0?g:[];return Ca(y,e)},Dr=()=>vf(),id={class:"sr-only"},nd=$t({setup(t){const e=Dr();return(g,p)=>(ie(),Kn(se(Or),null,{default:ws(()=>[Xt("span",id,vn(se(e).openInNewWindow),1)]),_:1}))}});var rd=Pi(({app:t,router:e})=>{t.component("Badge",bf),t.component("CodeGroup",Cf),t.component("CodeGroupItem",xf),delete t._context.components.ExternalLinkIcon,t.component("ExternalLinkIcon",nd),t.component("NavbarSearch",()=>{const p=t.component("Docsearch")||t.component("SearchBox");return p?Et(p):null});const g=e.options.scrollBehavior;e.options.scrollBehavior=async(...p)=>(await Kf().wait(),g(...p))}),sd="/assets/vue3-geek.c3c15749.jpg",ei=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function od(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(g){var p=Object.getOwnPropertyDescriptor(t,g);Object.defineProperty(e,g,p.get?p:{enumerable:!0,get:function(){return t[g]}})}),e}var Mr={exports:{}};(function(t,e){(function(g,p){var _="1.0.2",y="",S="?",f="function",i="undefined",c="object",r="string",n="major",o="model",a="name",u="type",l="vendor",s="version",h="architecture",d="console",m="mobile",v="tablet",b="smarttv",w="wearable",C="embedded",x=255,T="Amazon",A="Apple",R="ASUS",P="BlackBerry",D="Browser",N="Chrome",K="Edge",W="Firefox",Q="Google",nt="Huawei",k="LG",z="Microsoft",Y="Motorola",G="Opera",lt="Samsung",F="Sony",O="Xiaomi",L="Zebra",j="Facebook",X=function(B,J){var q={};for(var st in B)J[st]&&J[st].length%2==0?q[st]=J[st].concat(B[st]):q[st]=B[st];return q},V=function(B){for(var J={},q=0;q<B.length;q++)J[B[q].toUpperCase()]=B[q];return J},tt=function(B,J){return typeof B===r?$(J).indexOf($(B))!==-1:!1},$=function(B){return B.toLowerCase()},rt=function(B){return typeof B===r?B.replace(/[^\d\.]/g,y).split(".")[0]:p},E=function(B,J){if(typeof B===r)return B=B.replace(/^\s\s*/,y).replace(/\s\s*$/,y),typeof J===i?B:B.substring(0,x)},M=function(B,J){for(var q=0,st,at,ft,ct,dt,mt;q<J.length&&!dt;){var Ft=J[q],ne=J[q+1];for(st=at=0;st<Ft.length&&!dt;)if(dt=Ft[st++].exec(B),dt)for(ft=0;ft<ne.length;ft++)mt=dt[++at],ct=ne[ft],typeof ct===c&&ct.length>0?ct.length===2?typeof ct[1]==f?this[ct[0]]=ct[1].call(this,mt):this[ct[0]]=ct[1]:ct.length===3?typeof ct[1]===f&&!(ct[1].exec&&ct[1].test)?this[ct[0]]=mt?ct[1].call(this,mt,ct[2]):p:this[ct[0]]=mt?mt.replace(ct[1],ct[2]):p:ct.length===4&&(this[ct[0]]=mt?ct[3].call(this,mt.replace(ct[1],ct[2])):p):this[ct]=mt||p;q+=2}},I=function(B,J){for(var q in J)if(typeof J[q]===c&&J[q].length>0){for(var st=0;st<J[q].length;st++)if(tt(J[q][st],B))return q===S?p:q}else if(tt(J[q],B))return q===S?p:q;return B},H={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},U={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[s,[a,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[s,[a,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[a,s],[/opios[\/ ]+([\w\.]+)/i],[s,[a,G+" Mini"]],[/\bopr\/([\w\.]+)/i],[s,[a,G]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[a,s],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[s,[a,"UC"+D]],[/\bqbcore\/([\w\.]+)/i],[s,[a,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[s,[a,"WeChat"]],[/konqueror\/([\w\.]+)/i],[s,[a,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[s,[a,"IE"]],[/yabrowser\/([\w\.]+)/i],[s,[a,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[a,/(.+)/,"$1 Secure "+D],s],[/\bfocus\/([\w\.]+)/i],[s,[a,W+" Focus"]],[/\bopt\/([\w\.]+)/i],[s,[a,G+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[s,[a,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[s,[a,"Dolphin"]],[/coast\/([\w\.]+)/i],[s,[a,G+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[s,[a,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[s,[a,W]],[/\bqihu|(qi?ho?o?|360)browser/i],[[a,"360 "+D]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[a,/(.+)/,"$1 "+D],s],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],s],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[a,s],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[a],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[a,j],s],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[a,s],[/\bgsa\/([\w\.]+) .*safari\//i],[s,[a,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[s,[a,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[a,N+" WebView"],s],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[s,[a,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[a,s],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[s,[a,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[s,a],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[a,[s,I,H]],[/(webkit|khtml)\/([\w\.]+)/i],[a,s],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[a,"Netscape"],s],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[s,[a,W+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[a,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,$]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,y,$]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,$]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[o,[l,lt],[u,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[o,[l,lt],[u,m]],[/\((ip(?:hone|od)[\w ]*);/i],[o,[l,A],[u,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[o,[l,A],[u,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[o,[l,nt],[u,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[o,[l,nt],[u,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[o,/_/g," "],[l,O],[u,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[o,/_/g," "],[l,O],[u,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[o,[l,"OPPO"],[u,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[o,[l,"Vivo"],[u,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[o,[l,"Realme"],[u,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[o,[l,Y],[u,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[o,[l,Y],[u,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[o,[l,k],[u,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[o,[l,k],[u,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[o,[l,"Lenovo"],[u,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[o,/_/g," "],[l,"Nokia"],[u,m]],[/(pixel c)\b/i],[o,[l,Q],[u,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[o,[l,Q],[u,m]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[o,[l,F],[u,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[o,"Xperia Tablet"],[l,F],[u,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[o,[l,"OnePlus"],[u,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[o,[l,T],[u,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[o,/(.+)/g,"Fire Phone $1"],[l,T],[u,m]],[/(playbook);[-\w\),; ]+(rim)/i],[o,l,[u,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[o,[l,P],[u,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[o,[l,R],[u,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[o,[l,R],[u,m]],[/(nexus 9)/i],[o,[l,"HTC"],[u,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[l,[o,/_/g," "],[u,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[o,[l,"Acer"],[u,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[o,[l,"Meizu"],[u,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[o,[l,"Sharp"],[u,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,o,[u,m]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,o,[u,v]],[/(surface duo)/i],[o,[l,z],[u,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[o,[l,"Fairphone"],[u,m]],[/(u304aa)/i],[o,[l,"AT&T"],[u,m]],[/\bsie-(\w*)/i],[o,[l,"Siemens"],[u,m]],[/\b(rct\w+) b/i],[o,[l,"RCA"],[u,v]],[/\b(venue[\d ]{2,7}) b/i],[o,[l,"Dell"],[u,v]],[/\b(q(?:mv|ta)\w+) b/i],[o,[l,"Verizon"],[u,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[o,[l,"Barnes & Noble"],[u,v]],[/\b(tm\d{3}\w+) b/i],[o,[l,"NuVision"],[u,v]],[/\b(k88) b/i],[o,[l,"ZTE"],[u,v]],[/\b(nx\d{3}j) b/i],[o,[l,"ZTE"],[u,m]],[/\b(gen\d{3}) b.+49h/i],[o,[l,"Swiss"],[u,m]],[/\b(zur\d{3}) b/i],[o,[l,"Swiss"],[u,v]],[/\b((zeki)?tb.*\b) b/i],[o,[l,"Zeki"],[u,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],o,[u,v]],[/\b(ns-?\w{0,9}) b/i],[o,[l,"Insignia"],[u,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[o,[l,"NextBook"],[u,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],o,[u,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],o,[u,m]],[/\b(ph-1) /i],[o,[l,"Essential"],[u,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[o,[l,"Envizen"],[u,v]],[/\b(trio[-\w\. ]+) b/i],[o,[l,"MachSpeed"],[u,v]],[/\btu_(1491) b/i],[o,[l,"Rotor"],[u,v]],[/(shield[\w ]+) b/i],[o,[l,"Nvidia"],[u,v]],[/(sprint) (\w+)/i],[l,o,[u,m]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[l,z],[u,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[o,[l,L],[u,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[o,[l,L],[u,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,o,[u,d]],[/droid.+; (shield) bui/i],[o,[l,"Nvidia"],[u,d]],[/(playstation [345portablevi]+)/i],[o,[l,F],[u,d]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[o,[l,z],[u,d]],[/smart-tv.+(samsung)/i],[l,[u,b]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[l,lt],[u,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,k],[u,b]],[/(apple) ?tv/i],[l,[o,A+" TV"],[u,b]],[/crkey/i],[[o,N+"cast"],[l,Q],[u,b]],[/droid.+aft(\w)( bui|\))/i],[o,[l,T],[u,b]],[/\(dtv[\);].+(aquos)/i],[o,[l,"Sharp"],[u,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,E],[o,E],[u,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,b]],[/((pebble))app/i],[l,o,[u,w]],[/droid.+; (glass) \d/i],[o,[l,Q],[u,w]],[/droid.+; (wt63?0{2,3})\)/i],[o,[l,L],[u,w]],[/(quest( 2)?)/i],[o,[l,j],[u,w]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[u,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[o,[u,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[o,[u,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,v]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[u,m]],[/(android[-\w\. ]{0,9});.+buil/i],[o,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[s,[a,K+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[s,[a,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[a,s],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[s,a]],os:[[/microsoft (windows) (vista|xp)/i],[a,s],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[a,[s,I,U]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[a,"Windows"],[s,I,U]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[s,/_/g,"."],[a,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[a,"Mac OS"],[s,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[s,a],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[a,s],[/\(bb(10);/i],[s,[a,P]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[s,[a,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[s,[a,W+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[s,[a,"webOS"]],[/crkey\/([\d\.]+)/i],[s,[a,N+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[a,"Chromium OS"],s],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[a,s],[/(sunos) ?([\w\.\d]*)/i],[[a,"Solaris"],s],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[a,s]]},et=function(B,J){if(typeof B===c&&(J=B,B=p),!(this instanceof et))return new et(B,J).getResult();var q=B||(typeof g!==i&&g.navigator&&g.navigator.userAgent?g.navigator.userAgent:y),st=J?X(Z,J):Z;return this.getBrowser=function(){var at={};return at[a]=p,at[s]=p,M.call(at,q,st.browser),at.major=rt(at.version),at},this.getCPU=function(){var at={};return at[h]=p,M.call(at,q,st.cpu),at},this.getDevice=function(){var at={};return at[l]=p,at[o]=p,at[u]=p,M.call(at,q,st.device),at},this.getEngine=function(){var at={};return at[a]=p,at[s]=p,M.call(at,q,st.engine),at},this.getOS=function(){var at={};return at[a]=p,at[s]=p,M.call(at,q,st.os),at},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return q},this.setUA=function(at){return q=typeof at===r&&at.length>x?E(at,x):at,this},this.setUA(q),this};et.VERSION=_,et.BROWSER=V([a,s,n]),et.CPU=V([h]),et.DEVICE=V([o,l,u,d,m,b,v,w,C]),et.ENGINE=et.OS=V([a,s]),t.exports&&(e=t.exports=et),e.UAParser=et;var it=typeof g!==i&&(g.jQuery||g.Zepto);if(it&&!it.ua){var ot=new et;it.ua=ot.getResult(),it.ua.get=function(){return ot.getUA()},it.ua.set=function(B){ot.setUA(B);var J=ot.getResult();for(var q in J)it.ua[q]=J[q]}}})(typeof window=="object"?window:ei)})(Mr,Mr.exports);var ad=Mr.exports,Lt={},ld={},cd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ld}),Lr=od(cd);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"3.6.3"};if(t.fabric=e,typeof document!="undefined"&&typeof window!="undefined")document instanceof(typeof HTMLDocument!="undefined"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var g=Lr,p=new g.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=p.document,e.jsdomImplForWrapper=Lr.implForWrapper,e.nodeCanvas=Lr.Canvas,e.window=p,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer!="undefined"&&typeof window=="undefined",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=e),function(){function f(n,o){if(!!this.__eventListeners[n]){var a=this.__eventListeners[n];o?a[a.indexOf(o)]=!1:e.util.array.fill(a,!1)}}function i(n,o){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var a in n)this.on(a,n[a]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(o);return this}function c(n,o){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)f.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var a in n)f.call(this,a,n[a]);else f.call(this,n,o);return this}function r(n,o){if(!this.__eventListeners)return this;var a=this.__eventListeners[n];if(!a)return this;for(var u=0,l=a.length;u<l;u++)a[u]&&a[u].call(this,o||{});return this.__eventListeners[n]=a.filter(function(s){return s!==!1}),this}e.Observable={observe:i,stopObserving:c,fire:r,on:i,off:c,trigger:r}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,i=arguments.length;f<i;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,i,c){var r=this._objects;return c?r[i]=f:r.splice(i,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,i,c=!1,r=0,n=arguments.length;r<n;r++)i=f.indexOf(arguments[r]),i!==-1&&(c=!0,f.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(f,i){for(var c=this.getObjects(),r=0,n=c.length;r<n;r++)f.call(i,c[r],r,c);return this},getObjects:function(f){return typeof f=="undefined"?this._objects.concat():this._objects.filter(function(i){return i.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f){return this._objects.indexOf(f)>-1},complexity:function(){return this._objects.reduce(function(f,i){return f+=i.complexity?i.complexity():0,f},0)}},e.CommonMethods={_setOptions:function(f){for(var i in f)this.set(i,f[i])},_initGradient:function(f,i){f&&f.colorStops&&!(f instanceof e.Gradient)&&this.set(i,new e.Gradient(f))},_initPattern:function(f,i,c){f&&f.source&&!(f instanceof e.Pattern)?this.set(i,new e.Pattern(f,c)):c&&c()},_initClipping:function(f){if(!(!f.clipTo||typeof f.clipTo!="string")){var i=e.util.getFunctionBody(f.clipTo);typeof i!="undefined"&&(this.clipTo=new Function("ctx",i))}},_setObject:function(f){for(var i in f)this._set(i,f[i])},set:function(f,i){return typeof f=="object"?this._setObject(f):typeof i=="function"&&f!=="clipTo"?this._set(f,i(this.get(f))):this._set(f,i),this},_set:function(f,i){this[f]=i},toggle:function(f){var i=this.get(f);return typeof i=="boolean"&&this.set(f,!i),this},get:function(f){return this[f]}},function(f){var i=Math.sqrt,c=Math.atan2,r=Math.pow,n=Math.PI/180,o=Math.PI/2;e.util={cos:function(a){if(a===0)return 1;a<0&&(a=-a);var u=a/o;switch(u){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},sin:function(a){if(a===0)return 0;var u=a/o,l=1;switch(a<0&&(l=-1),u){case 1:return l;case 2:return 0;case 3:return-l}return Math.sin(a)},removeFromArray:function(a,u){var l=a.indexOf(u);return l!==-1&&a.splice(l,1),a},getRandomInt:function(a,u){return Math.floor(Math.random()*(u-a+1))+a},degreesToRadians:function(a){return a*n},radiansToDegrees:function(a){return a/n},rotatePoint:function(a,u,l){a.subtractEquals(u);var s=e.util.rotateVector(a,l);return new e.Point(s.x,s.y).addEquals(u)},rotateVector:function(a,u){var l=e.util.sin(u),s=e.util.cos(u),h=a.x*s-a.y*l,d=a.x*l+a.y*s;return{x:h,y:d}},transformPoint:function(a,u,l){return l?new e.Point(u[0]*a.x+u[2]*a.y,u[1]*a.x+u[3]*a.y):new e.Point(u[0]*a.x+u[2]*a.y+u[4],u[1]*a.x+u[3]*a.y+u[5])},makeBoundingBoxFromPoints:function(a,u){if(u)for(var l=0;l<a.length;l++)a[l]=e.util.transformPoint(a[l],u);var s=[a[0].x,a[1].x,a[2].x,a[3].x],h=e.util.array.min(s),d=e.util.array.max(s),m=d-h,v=[a[0].y,a[1].y,a[2].y,a[3].y],b=e.util.array.min(v),w=e.util.array.max(v),C=w-b;return{left:h,top:b,width:m,height:C}},invertTransform:function(a){var u=1/(a[0]*a[3]-a[1]*a[2]),l=[u*a[3],-u*a[1],-u*a[2],u*a[0]],s=e.util.transformPoint({x:a[4],y:a[5]},l,!0);return l[4]=-s.x,l[5]=-s.y,l},toFixed:function(a,u){return parseFloat(Number(a).toFixed(u))},parseUnit:function(a,u){var l=/\D{0,2}$/.exec(a),s=parseFloat(a);switch(u||(u=e.Text.DEFAULT_SVG_FONT_SIZE),l[0]){case"mm":return s*e.DPI/25.4;case"cm":return s*e.DPI/2.54;case"in":return s*e.DPI;case"pt":return s*e.DPI/72;case"pc":return s*e.DPI/72*12;case"em":return s*u;default:return s}},falseFunction:function(){return!1},getKlass:function(a,u){return a=e.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1)),e.util.resolveNamespace(u)[a]},getSvgAttributes:function(a){var u=["instantiated_by_use","style","id","class"];switch(a){case"linearGradient":u=u.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":u=u.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":u=u.concat(["offset","stop-color","stop-opacity"]);break}return u},resolveNamespace:function(a){if(!a)return e;var u=a.split("."),l=u.length,s,h=f||e.window;for(s=0;s<l;++s)h=h[u[s]];return h},loadImage:function(a,u,l,s){if(!a){u&&u.call(l,a);return}var h=e.util.createImage(),d=function(){u&&u.call(l,h),h=h.onload=h.onerror=null};h.onload=d,h.onerror=function(){e.log("Error loading "+h.src),u&&u.call(l,null,!0),h=h.onload=h.onerror=null},a.indexOf("data")!==0&&s&&(h.crossOrigin=s),a.substring(0,14)==="data:image/svg"&&(h.onload=null,e.util.loadImageInDom(h,d)),h.src=a},loadImageInDom:function(a,u){var l=e.document.createElement("div");l.style.width=l.style.height="1px",l.style.left=l.style.top="-100%",l.style.position="absolute",l.appendChild(a),e.document.querySelector("body").appendChild(l),a.onload=function(){u(),l.parentNode.removeChild(l),l=null}},enlivenObjects:function(a,u,l,s){a=a||[];var h=[],d=0,m=a.length;function v(){++d===m&&u&&u(h.filter(function(b){return b}))}if(!m){u&&u(h);return}a.forEach(function(b,w){if(!b||!b.type){v();return}var C=e.util.getKlass(b.type,l);C.fromObject(b,function(x,T){T||(h[w]=x),s&&s(b,x,T),v()})})},enlivenPatterns:function(a,u){a=a||[];function l(){++h===d&&u&&u(s)}var s=[],h=0,d=a.length;if(!d){u&&u(s);return}a.forEach(function(m,v){m&&m.source?new e.Pattern(m,function(b){s[v]=b,l()}):(s[v]=m,l())})},groupSVGElements:function(a,u,l){var s;return a&&a.length===1?a[0]:(u&&(u.width&&u.height?u.centerPoint={x:u.width/2,y:u.height/2}:(delete u.width,delete u.height)),s=new e.Group(a,u),typeof l!="undefined"&&(s.sourcePath=l),s)},populateWithProperties:function(a,u,l){if(l&&Object.prototype.toString.call(l)==="[object Array]")for(var s=0,h=l.length;s<h;s++)l[s]in a&&(u[l[s]]=a[l[s]])},drawDashedLine:function(a,u,l,s,h,d){var m=s-u,v=h-l,b=i(m*m+v*v),w=c(v,m),C=d.length,x=0,T=!0;for(a.save(),a.translate(u,l),a.moveTo(0,0),a.rotate(w),u=0;b>u;)u+=d[x++%C],u>b&&(u=b),a[T?"lineTo":"moveTo"](u,0),T=!T;a.restore()},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(a){var u=e.util.createCanvasElement();return u.width=a.width,u.height=a.height,u.getContext("2d").drawImage(a,0,0),u},toDataURL:function(a,u,l){return a.toDataURL("image/"+u,l)},createImage:function(){return e.document.createElement("img")},clipContext:function(a,u){u.save(),u.beginPath(),a.clipTo(u),u.clip()},multiplyTransformMatrices:function(a,u,l){return[a[0]*u[0]+a[2]*u[1],a[1]*u[0]+a[3]*u[1],a[0]*u[2]+a[2]*u[3],a[1]*u[2]+a[3]*u[3],l?0:a[0]*u[4]+a[2]*u[5]+a[4],l?0:a[1]*u[4]+a[3]*u[5]+a[5]]},qrDecompose:function(a){var u=c(a[1],a[0]),l=r(a[0],2)+r(a[1],2),s=i(l),h=(a[0]*a[3]-a[2]*a[1])/s,d=c(a[0]*a[2]+a[1]*a[3],l);return{angle:u/n,scaleX:s,scaleY:h,skewX:d/n,skewY:0,translateX:a[4],translateY:a[5]}},calcRotateMatrix:function(a){if(!a.angle)return e.iMatrix.concat();var u=e.util.degreesToRadians(a.angle),l=e.util.cos(u),s=e.util.sin(u);return[l,s,-s,l,0,0]},calcDimensionsMatrix:function(a){var u=typeof a.scaleX=="undefined"?1:a.scaleX,l=typeof a.scaleY=="undefined"?1:a.scaleY,s=[a.flipX?-u:u,0,0,a.flipY?-l:l,0,0],h=e.util.multiplyTransformMatrices,d=e.util.degreesToRadians;return a.skewX&&(s=h(s,[1,0,Math.tan(d(a.skewX)),1],!0)),a.skewY&&(s=h(s,[1,Math.tan(d(a.skewY)),0,1],!0)),s},composeMatrix:function(a){var u=[1,0,0,1,a.translateX||0,a.translateY||0],l=e.util.multiplyTransformMatrices;return a.angle&&(u=l(u,e.util.calcRotateMatrix(a))),(a.scaleX||a.scaleY||a.skewX||a.skewY||a.flipX||a.flipY)&&(u=l(u,e.util.calcDimensionsMatrix(a))),u},customTransformMatrix:function(a,u,l){return e.util.composeMatrix({scaleX:a,scaleY:u,skewX:l})},resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.rotate(0)},saveObjectTransform:function(a){return{scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}},getFunctionBody:function(a){return(String(a).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(a,u,l,s){s>0&&(u>s?u-=s:u=0,l>s?l-=s:l=0);var h=!0,d,m,v=a.getImageData(u,l,s*2||1,s*2||1),b=v.data.length;for(d=3;d<b&&(m=v.data[d],h=m<=0,h!==!1);d+=4);return v=null,h},parsePreserveAspectRatioAttribute:function(a){var u="meet",l="Mid",s="Mid",h=a.split(" "),d;return h&&h.length&&(u=h.pop(),u!=="meet"&&u!=="slice"?(d=u,u="meet"):h.length&&(d=h.pop())),l=d!=="none"?d.slice(1,4):"none",s=d!=="none"?d.slice(5,8):"none",{meetOrSlice:u,alignX:l,alignY:s}},clearFabricFontCache:function(a){a=(a||"").toLowerCase(),a?e.charWidthsCache[a]&&delete e.charWidthsCache[a]:e.charWidthsCache={}},limitDimsByArea:function(a,u){var l=Math.sqrt(u*a),s=Math.floor(u/l);return{x:Math.floor(l),y:s}},capValue:function(a,u,l){return Math.max(a,Math.min(u,l))},findScaleToFit:function(a,u){return Math.min(u.width/a.width,u.height/a.height)},findScaleToCover:function(a,u){return Math.max(u.width/a.width,u.height/a.height)},matrixToSVG:function(a){return"matrix("+a.map(function(u){return e.util.toFixed(u,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"}}}(t),function(){var f=Array.prototype.join;function i(o,a,u,l,s,h,d){var m=f.call(arguments);if(e.arcToSegmentsCache[m])return e.arcToSegmentsCache[m];var v=Math.PI,b=d*v/180,w=e.util.sin(b),C=e.util.cos(b),x=0,T=0;u=Math.abs(u),l=Math.abs(l);var A=-C*o*.5-w*a*.5,R=-C*a*.5+w*o*.5,P=u*u,D=l*l,N=R*R,K=A*A,W=P*D-P*N-D*K,Q=0;if(W<0){var nt=Math.sqrt(1-W/(P*D));u*=nt,l*=nt}else Q=(s===h?-1:1)*Math.sqrt(W/(P*N+D*K));var k=Q*u*R/l,z=-Q*l*A/u,Y=C*k-w*z+o*.5,G=w*k+C*z+a*.5,lt=r(1,0,(A-k)/u,(R-z)/l),F=r((A-k)/u,(R-z)/l,(-A-k)/u,(-R-z)/l);h===0&&F>0?F-=2*v:h===1&&F<0&&(F+=2*v);for(var O=Math.ceil(Math.abs(F/v*2)),L=[],j=F/O,X=8/3*Math.sin(j/4)*Math.sin(j/4)/Math.sin(j/2),V=lt+j,tt=0;tt<O;tt++)L[tt]=c(lt,V,C,w,u,l,Y,G,X,x,T),x=L[tt][4],T=L[tt][5],lt=V,V+=j;return e.arcToSegmentsCache[m]=L,L}function c(o,a,u,l,s,h,d,m,v,b,w){var C=e.util.cos(o),x=e.util.sin(o),T=e.util.cos(a),A=e.util.sin(a),R=u*s*T-l*h*A+d,P=l*s*T+u*h*A+m,D=b+v*(-u*s*x-l*h*C),N=w+v*(-l*s*x+u*h*C),K=R+v*(u*s*A+l*h*T),W=P+v*(l*s*A-u*h*T);return[D,N,K,W,R,P]}function r(o,a,u,l){var s=Math.atan2(a,o),h=Math.atan2(l,u);return h>=s?h-s:2*Math.PI-(s-h)}e.util.drawArc=function(o,a,u,l){for(var s=l[0],h=l[1],d=l[2],m=l[3],v=l[4],b=l[5],w=l[6],C=[[],[],[],[]],x=i(b-a,w-u,s,h,m,v,d),T=0,A=x.length;T<A;T++)C[T][0]=x[T][0]+a,C[T][1]=x[T][1]+u,C[T][2]=x[T][2]+a,C[T][3]=x[T][3]+u,C[T][4]=x[T][4]+a,C[T][5]=x[T][5]+u,o.bezierCurveTo.apply(o,C[T])},e.util.getBoundsOfArc=function(o,a,u,l,s,h,d,m,v){for(var b=0,w=0,C,x=[],T=i(m-o,v-a,u,l,h,d,s),A=0,R=T.length;A<R;A++)C=n(b,w,T[A][0],T[A][1],T[A][2],T[A][3],T[A][4],T[A][5]),x.push({x:C[0].x+o,y:C[0].y+a}),x.push({x:C[1].x+o,y:C[1].y+a}),b=T[A][4],w=T[A][5];return x};function n(o,a,u,l,s,h,d,m){var v;if(e.cachesBoundsOfCurve&&(v=f.call(arguments),e.boundsOfCurveCache[v]))return e.boundsOfCurveCache[v];var b=Math.sqrt,w=Math.min,C=Math.max,x=Math.abs,T=[],A=[[],[]],R,P,D,N,K,W,Q,nt;P=6*o-12*u+6*s,R=-3*o+9*u-9*s+3*d,D=3*u-3*o;for(var k=0;k<2;++k){if(k>0&&(P=6*a-12*l+6*h,R=-3*a+9*l-9*h+3*m,D=3*l-3*a),x(R)<1e-12){if(x(P)<1e-12)continue;N=-D/P,0<N&&N<1&&T.push(N);continue}Q=P*P-4*D*R,!(Q<0)&&(nt=b(Q),K=(-P+nt)/(2*R),0<K&&K<1&&T.push(K),W=(-P-nt)/(2*R),0<W&&W<1&&T.push(W))}for(var z,Y,G=T.length,lt=G,F;G--;)N=T[G],F=1-N,z=F*F*F*o+3*F*F*N*u+3*F*N*N*s+N*N*N*d,A[0][G]=z,Y=F*F*F*a+3*F*F*N*l+3*F*N*N*h+N*N*N*m,A[1][G]=Y;A[0][lt]=o,A[1][lt]=a,A[0][lt+1]=d,A[1][lt+1]=m;var O=[{x:w.apply(null,A[0]),y:w.apply(null,A[1])},{x:C.apply(null,A[0]),y:C.apply(null,A[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[v]=O),O}e.util.getBoundsOfCurve=n}(),function(){var f=Array.prototype.slice;function i(a,u){for(var l=f.call(arguments,2),s=[],h=0,d=a.length;h<d;h++)s[h]=l.length?a[h][u].apply(a[h],l):a[h][u].call(a[h]);return s}function c(a,u){return o(a,u,function(l,s){return l>=s})}function r(a,u){return o(a,u,function(l,s){return l<s})}function n(a,u){for(var l=a.length;l--;)a[l]=u;return a}function o(a,u,l){if(!(!a||a.length===0)){var s=a.length-1,h=u?a[s][u]:a[s];if(u)for(;s--;)l(a[s][u],h)&&(h=a[s][u]);else for(;s--;)l(a[s],h)&&(h=a[s]);return h}}e.util.array={fill:n,invoke:i,min:r,max:c}}(),function(){function f(c,r,n){if(n)if(!e.isLikelyNode&&r instanceof Element)c=r;else if(r instanceof Array){c=[];for(var o=0,a=r.length;o<a;o++)c[o]=f({},r[o],n)}else if(r&&typeof r=="object")for(var u in r)u==="canvas"?c[u]=f({},r[u]):r.hasOwnProperty(u)&&(c[u]=f({},r[u],n));else c=r;else for(var u in r)c[u]=r[u];return c}function i(c,r){return f({},c,r)}e.util.object={extend:f,clone:i},e.util.object.extend(e.util,e.Observable)}(),function(){function f(o){return o.replace(/-+(.)?/g,function(a,u){return u?u.toUpperCase():""})}function i(o,a){return o.charAt(0).toUpperCase()+(a?o.slice(1):o.slice(1).toLowerCase())}function c(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(o){var a=0,u,l=[];for(a=0,u;a<o.length;a++)(u=n(o,a))!==!1&&l.push(u);return l}function n(o,a){var u=o.charCodeAt(a);if(isNaN(u))return"";if(u<55296||u>57343)return o.charAt(a);if(55296<=u&&u<=56319){if(o.length<=a+1)throw"High surrogate without following low surrogate";var l=o.charCodeAt(a+1);if(56320>l||l>57343)throw"High surrogate without following low surrogate";return o.charAt(a)+o.charAt(a+1)}if(a===0)throw"Low surrogate without preceding high surrogate";var s=o.charCodeAt(a-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:f,capitalize:i,escapeXml:c,graphemeSplit:r}}(),function(){var f=Array.prototype.slice,i=function(){},c=function(){for(var u in{toString:1})if(u==="toString")return!1;return!0}(),r=function(u,l,s){for(var h in l)h in u.prototype&&typeof u.prototype[h]=="function"&&(l[h]+"").indexOf("callSuper")>-1?u.prototype[h]=function(d){return function(){var m=this.constructor.superclass;this.constructor.superclass=s;var v=l[d].apply(this,arguments);if(this.constructor.superclass=m,d!=="initialize")return v}}(h):u.prototype[h]=l[h],c&&(l.toString!==Object.prototype.toString&&(u.prototype.toString=l.toString),l.valueOf!==Object.prototype.valueOf&&(u.prototype.valueOf=l.valueOf))};function n(){}function o(u){for(var l=null,s=this;s.constructor.superclass;){var h=s.constructor.superclass.prototype[u];if(s[u]!==h){l=h;break}s=s.constructor.superclass.prototype}return l?arguments.length>1?l.apply(this,f.call(arguments,1)):l.call(this):console.log("tried to callSuper "+u+", method not found in prototype chain",this)}function a(){var u=null,l=f.call(arguments,0);typeof l[0]=="function"&&(u=l.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=u,s.subclasses=[],u&&(n.prototype=u.prototype,s.prototype=new n,u.subclasses.push(s));for(var h=0,d=l.length;h<d;h++)r(s,l[h],u);return s.prototype.initialize||(s.prototype.initialize=i),s.prototype.constructor=s,s.prototype.callSuper=o,s}e.util.createClass=a}(),function(){var f=!!e.document.createElement("div").attachEvent;e.util.addListener=function(c,r,n,o){c&&c.addEventListener(r,n,f?!1:o)},e.util.removeListener=function(c,r,n,o){c&&c.removeEventListener(r,n,f?!1:o)};function i(c){var r=c.changedTouches;return r&&r[0]?r[0]:c}e.util.getPointer=function(c){var r=c.target,n=e.util.getScrollLeftTop(r),o=i(c);return{x:o.clientX+n.left,y:o.clientY+n.top}}}(),function(){function f(a,u){var l=a.style;if(!l)return a;if(typeof u=="string")return a.style.cssText+=";"+u,u.indexOf("opacity")>-1?o(a,u.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var s in u)if(s==="opacity")o(a,u[s]);else{var h=s==="float"||s==="cssFloat"?typeof l.styleFloat=="undefined"?"cssFloat":"styleFloat":s;l[h]=u[s]}return a}var i=e.document.createElement("div"),c=typeof i.style.opacity=="string",r=typeof i.style.filter=="string",n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(a){return a};c?o=function(a,u){return a.style.opacity=u,a}:r&&(o=function(a,u){var l=a.style;return a.currentStyle&&!a.currentStyle.hasLayout&&(l.zoom=1),n.test(l.filter)?(u=u>=.9999?"":"alpha(opacity="+u*100+")",l.filter=l.filter.replace(n,u)):l.filter+=" alpha(opacity="+u*100+")",a}),e.util.setStyle=f}(),function(){var f=Array.prototype.slice;function i(m){return typeof m=="string"?e.document.getElementById(m):m}var c,r=function(m){return f.call(m,0)};try{c=r(e.document.childNodes)instanceof Array}catch{}c||(r=function(m){for(var v=new Array(m.length),b=m.length;b--;)v[b]=m[b];return v});function n(m,v){var b=e.document.createElement(m);for(var w in v)w==="class"?b.className=v[w]:w==="for"?b.htmlFor=v[w]:b.setAttribute(w,v[w]);return b}function o(m,v){m&&(" "+m.className+" ").indexOf(" "+v+" ")===-1&&(m.className+=(m.className?" ":"")+v)}function a(m,v,b){return typeof v=="string"&&(v=n(v,b)),m.parentNode&&m.parentNode.replaceChild(v,m),v.appendChild(m),v}function u(m){for(var v=0,b=0,w=e.document.documentElement,C=e.document.body||{scrollLeft:0,scrollTop:0};m&&(m.parentNode||m.host)&&(m=m.parentNode||m.host,m===e.document?(v=C.scrollLeft||w.scrollLeft||0,b=C.scrollTop||w.scrollTop||0):(v+=m.scrollLeft||0,b+=m.scrollTop||0),!(m.nodeType===1&&m.style.position==="fixed")););return{left:v,top:b}}function l(m){var v,b=m&&m.ownerDocument,w={left:0,top:0},C={left:0,top:0},x,T={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!b)return C;for(var A in T)C[T[A]]+=parseInt(s(m,A),10)||0;return v=b.documentElement,typeof m.getBoundingClientRect!="undefined"&&(w=m.getBoundingClientRect()),x=u(m),{left:w.left+x.left-(v.clientLeft||0)+C.left,top:w.top+x.top-(v.clientTop||0)+C.top}}var s;e.document.defaultView&&e.document.defaultView.getComputedStyle?s=function(m,v){var b=e.document.defaultView.getComputedStyle(m,null);return b?b[v]:void 0}:s=function(m,v){var b=m.style[v];return!b&&m.currentStyle&&(b=m.currentStyle[v]),b},function(){var m=e.document.documentElement.style,v="userSelect"in m?"userSelect":"MozUserSelect"in m?"MozUserSelect":"WebkitUserSelect"in m?"WebkitUserSelect":"KhtmlUserSelect"in m?"KhtmlUserSelect":"";function b(C){return typeof C.onselectstart!="undefined"&&(C.onselectstart=e.util.falseFunction),v?C.style[v]="none":typeof C.unselectable=="string"&&(C.unselectable="on"),C}function w(C){return typeof C.onselectstart!="undefined"&&(C.onselectstart=null),v?C.style[v]="":typeof C.unselectable=="string"&&(C.unselectable=""),C}e.util.makeElementUnselectable=b,e.util.makeElementSelectable=w}(),function(){function m(v,b){var w=e.document.getElementsByTagName("head")[0],C=e.document.createElement("script"),x=!0;C.onload=C.onreadystatechange=function(T){if(x){if(typeof this.readyState=="string"&&this.readyState!=="loaded"&&this.readyState!=="complete")return;x=!1,b(T||e.window.event),C=C.onload=C.onreadystatechange=null}},C.src=v,w.appendChild(C)}e.util.getScript=m}();function h(m){var v=e.jsdomImplForWrapper(m);return v._canvas||v._image}function d(m){if(!!e.isLikelyNode){var v=e.jsdomImplForWrapper(m);v&&(v._image=null,v._canvas=null,v._currentSrc=null,v._attributes=null,v._classList=null)}}e.util.getById=i,e.util.toArray=r,e.util.makeElement=n,e.util.addClass=o,e.util.wrapElement=a,e.util.getScrollLeftTop=u,e.util.getElementOffset=l,e.util.getElementStyle=s,e.util.getNodeCanvas=h,e.util.cleanUpJsdomNode=d}(),function(){function f(r,n){return r+(/\?/.test(r)?"&":"?")+n}function i(){}function c(r,n){n||(n={});var o=n.method?n.method.toUpperCase():"GET",a=n.onComplete||function(){},u=new e.window.XMLHttpRequest,l=n.body||n.parameters;return u.onreadystatechange=function(){u.readyState===4&&(a(u),u.onreadystatechange=i)},o==="GET"&&(l=null,typeof n.parameters=="string"&&(r=f(r,n.parameters))),u.open(o,r,!0),(o==="POST"||o==="PUT")&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(l),u}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){function f(){return!1}function i(u,l,s,h){return-s*Math.cos(u/h*(Math.PI/2))+s+l}function c(u){o(function(l){u||(u={});var s=l||+new Date,h=u.duration||500,d=s+h,m,v=u.onChange||f,b=u.abort||f,w=u.onComplete||f,C=u.easing||i,x="startValue"in u?u.startValue:0,T="endValue"in u?u.endValue:100,A=u.byValue||T-x;u.onStart&&u.onStart(),function R(P){m=P||+new Date;var D=m>d?h:m-s,N=D/h,K=C(D,x,A,h),W=Math.abs((K-x)/A);if(b()){w(T,1,1);return}if(m>d){v(T,1,1),w(T,1,1);return}else v(K,W,N),o(R)}(s)})}var r=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(u){return e.window.setTimeout(u,1e3/60)},n=e.window.cancelAnimationFrame||e.window.clearTimeout;function o(){return r.apply(e.window,arguments)}function a(){return n.apply(e.window,arguments)}e.util.animate=c,e.util.requestAnimFrame=o,e.util.cancelAnimFrame=a}(),function(){function f(c,r,n){var o="rgba("+parseInt(c[0]+n*(r[0]-c[0]),10)+","+parseInt(c[1]+n*(r[1]-c[1]),10)+","+parseInt(c[2]+n*(r[2]-c[2]),10);return o+=","+(c&&r?parseFloat(c[3]+n*(r[3]-c[3])):1),o+=")",o}function i(c,r,n,o){var a=new e.Color(c).getSource(),u=new e.Color(r).getSource();o=o||{},e.util.animate(e.util.object.extend(o,{duration:n||500,startValue:a,endValue:u,byValue:u,easing:function(l,s,h,d){var m=o.colorEasing?o.colorEasing(l,d):1-Math.cos(l/d*(Math.PI/2));return f(s,h,m)}}))}e.util.animateColor=i}(),function(){function f(k,z,Y,G){return k<Math.abs(z)?(k=z,G=Y/4):z===0&&k===0?G=Y/(2*Math.PI)*Math.asin(1):G=Y/(2*Math.PI)*Math.asin(z/k),{a:k,c:z,p:Y,s:G}}function i(k,z,Y){return k.a*Math.pow(2,10*(z-=1))*Math.sin((z*Y-k.s)*(2*Math.PI)/k.p)}function c(k,z,Y,G){return Y*((k=k/G-1)*k*k+1)+z}function r(k,z,Y,G){return k/=G/2,k<1?Y/2*k*k*k+z:Y/2*((k-=2)*k*k+2)+z}function n(k,z,Y,G){return Y*(k/=G)*k*k*k+z}function o(k,z,Y,G){return-Y*((k=k/G-1)*k*k*k-1)+z}function a(k,z,Y,G){return k/=G/2,k<1?Y/2*k*k*k*k+z:-Y/2*((k-=2)*k*k*k-2)+z}function u(k,z,Y,G){return Y*(k/=G)*k*k*k*k+z}function l(k,z,Y,G){return Y*((k=k/G-1)*k*k*k*k+1)+z}function s(k,z,Y,G){return k/=G/2,k<1?Y/2*k*k*k*k*k+z:Y/2*((k-=2)*k*k*k*k+2)+z}function h(k,z,Y,G){return-Y*Math.cos(k/G*(Math.PI/2))+Y+z}function d(k,z,Y,G){return Y*Math.sin(k/G*(Math.PI/2))+z}function m(k,z,Y,G){return-Y/2*(Math.cos(Math.PI*k/G)-1)+z}function v(k,z,Y,G){return k===0?z:Y*Math.pow(2,10*(k/G-1))+z}function b(k,z,Y,G){return k===G?z+Y:Y*(-Math.pow(2,-10*k/G)+1)+z}function w(k,z,Y,G){return k===0?z:k===G?z+Y:(k/=G/2,k<1?Y/2*Math.pow(2,10*(k-1))+z:Y/2*(-Math.pow(2,-10*--k)+2)+z)}function C(k,z,Y,G){return-Y*(Math.sqrt(1-(k/=G)*k)-1)+z}function x(k,z,Y,G){return Y*Math.sqrt(1-(k=k/G-1)*k)+z}function T(k,z,Y,G){return k/=G/2,k<1?-Y/2*(Math.sqrt(1-k*k)-1)+z:Y/2*(Math.sqrt(1-(k-=2)*k)+1)+z}function A(k,z,Y,G){var lt=1.70158,F=0,O=Y;if(k===0)return z;if(k/=G,k===1)return z+Y;F||(F=G*.3);var L=f(O,Y,F,lt);return-i(L,k,G)+z}function R(k,z,Y,G){var lt=1.70158,F=0,O=Y;if(k===0)return z;if(k/=G,k===1)return z+Y;F||(F=G*.3);var L=f(O,Y,F,lt);return L.a*Math.pow(2,-10*k)*Math.sin((k*G-L.s)*(2*Math.PI)/L.p)+L.c+z}function P(k,z,Y,G){var lt=1.70158,F=0,O=Y;if(k===0)return z;if(k/=G/2,k===2)return z+Y;F||(F=G*(.3*1.5));var L=f(O,Y,F,lt);return k<1?-.5*i(L,k,G)+z:L.a*Math.pow(2,-10*(k-=1))*Math.sin((k*G-L.s)*(2*Math.PI)/L.p)*.5+L.c+z}function D(k,z,Y,G,lt){return lt===void 0&&(lt=1.70158),Y*(k/=G)*k*((lt+1)*k-lt)+z}function N(k,z,Y,G,lt){return lt===void 0&&(lt=1.70158),Y*((k=k/G-1)*k*((lt+1)*k+lt)+1)+z}function K(k,z,Y,G,lt){return lt===void 0&&(lt=1.70158),k/=G/2,k<1?Y/2*(k*k*(((lt*=1.525)+1)*k-lt))+z:Y/2*((k-=2)*k*(((lt*=1.525)+1)*k+lt)+2)+z}function W(k,z,Y,G){return Y-Q(G-k,0,Y,G)+z}function Q(k,z,Y,G){return(k/=G)<1/2.75?Y*(7.5625*k*k)+z:k<2/2.75?Y*(7.5625*(k-=1.5/2.75)*k+.75)+z:k<2.5/2.75?Y*(7.5625*(k-=2.25/2.75)*k+.9375)+z:Y*(7.5625*(k-=2.625/2.75)*k+.984375)+z}function nt(k,z,Y,G){return k<G/2?W(k*2,0,Y,G)*.5+z:Q(k*2-G,0,Y,G)*.5+Y*.5+z}e.util.ease={easeInQuad:function(k,z,Y,G){return Y*(k/=G)*k+z},easeOutQuad:function(k,z,Y,G){return-Y*(k/=G)*(k-2)+z},easeInOutQuad:function(k,z,Y,G){return k/=G/2,k<1?Y/2*k*k+z:-Y/2*(--k*(k-2)-1)+z},easeInCubic:function(k,z,Y,G){return Y*(k/=G)*k*k+z},easeOutCubic:c,easeInOutCubic:r,easeInQuart:n,easeOutQuart:o,easeInOutQuart:a,easeInQuint:u,easeOutQuint:l,easeInOutQuint:s,easeInSine:h,easeOutSine:d,easeInOutSine:m,easeInExpo:v,easeOutExpo:b,easeInOutExpo:w,easeInCirc:C,easeOutCirc:x,easeInOutCirc:T,easeInElastic:A,easeOutElastic:R,easeInOutElastic:P,easeInBack:D,easeOutBack:N,easeInOutBack:K,easeInBounce:W,easeOutBounce:Q,easeInOutBounce:nt}}(),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.object.clone,n=i.util.toFixed,o=i.util.parseUnit,a=i.util.multiplyTransformMatrices,u=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],l=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],h=["symbol","g","a","svg","clipPath","defs"],d={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform"},m={stroke:"strokeOpacity",fill:"fillOpacity"},v="font-size",b="clip-path";i.svgValidTagNamesRegEx=x(u),i.svgViewBoxElementsRegEx=x(l),i.svgInvalidAncestorsRegEx=x(s),i.svgValidParentsRegEx=x(h),i.cssRules={},i.gradientDefs={},i.clipPaths={};function w(F){return F in d?d[F]:F}function C(F,O,L,j){var X=Object.prototype.toString.call(O)==="[object Array]",V;if((F==="fill"||F==="stroke")&&O==="none")O="";else if(F==="vector-effect")O=O==="non-scaling-stroke";else if(F==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(F==="transformMatrix")L&&L.transformMatrix?O=a(L.transformMatrix,i.parseTransformAttribute(O)):O=i.parseTransformAttribute(O);else if(F==="visible")O=O!=="none"&&O!=="hidden",L&&L.visible===!1&&(O=!1);else if(F==="opacity")O=parseFloat(O),L&&typeof L.opacity!="undefined"&&(O*=L.opacity);else if(F==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(F==="charSpacing")V=o(O,j)/j*1e3;else if(F==="paintFirst"){var tt=O.indexOf("fill"),$=O.indexOf("stroke"),O="fill";(tt>-1&&$>-1&&$<tt||tt===-1&&$>-1)&&(O="stroke")}else{if(F==="href"||F==="xlink:href")return O;V=X?O.map(o):o(O,j)}return!X&&isNaN(V)?O:V}function x(F){return new RegExp("^("+F.join("|")+")\\b","i")}function T(F){for(var O in m)if(!(typeof F[m[O]]=="undefined"||F[O]==="")){if(typeof F[O]=="undefined"){if(!i.Object.prototype[O])continue;F[O]=i.Object.prototype[O]}if(F[O].indexOf("url(")!==0){var L=new i.Color(F[O]);F[O]=L.setAlpha(n(L.getAlpha()*F[m[O]],2)).toRgba()}}return F}function A(F,O){var L,j=[],X,V,tt;for(V=0,tt=O.length;V<tt;V++)L=O[V],X=F.getElementsByTagName(L),j=j.concat(Array.prototype.slice.call(X));return j}i.parseTransformAttribute=function(){function F(B,J){var q=i.util.cos(J[0]),st=i.util.sin(J[0]),at=0,ft=0;J.length===3&&(at=J[1],ft=J[2]),B[0]=q,B[1]=st,B[2]=-st,B[3]=q,B[4]=at-(q*at-st*ft),B[5]=ft-(st*at+q*ft)}function O(B,J){var q=J[0],st=J.length===2?J[1]:J[0];B[0]=q,B[3]=st}function L(B,J,q){B[q]=Math.tan(i.util.degreesToRadians(J[0]))}function j(B,J){B[4]=J[0],J.length===2&&(B[5]=J[1])}var X=i.iMatrix,V=i.reNum,tt="(?:\\s+,?\\s*|,\\s*)",$="(?:(skewX)\\s*\\(\\s*("+V+")\\s*\\))",rt="(?:(skewY)\\s*\\(\\s*("+V+")\\s*\\))",E="(?:(rotate)\\s*\\(\\s*("+V+")(?:"+tt+"("+V+")"+tt+"("+V+"))?\\s*\\))",M="(?:(scale)\\s*\\(\\s*("+V+")(?:"+tt+"("+V+"))?\\s*\\))",I="(?:(translate)\\s*\\(\\s*("+V+")(?:"+tt+"("+V+"))?\\s*\\))",H="(?:(matrix)\\s*\\(\\s*("+V+")"+tt+"("+V+")"+tt+"("+V+")"+tt+"("+V+")"+tt+"("+V+")"+tt+"("+V+")\\s*\\))",U="(?:"+H+"|"+I+"|"+M+"|"+E+"|"+$+"|"+rt+")",Z="(?:"+U+"(?:"+tt+"*"+U+")*)",et="^\\s*(?:"+Z+"?)\\s*$",it=new RegExp(et),ot=new RegExp(U,"g");return function(B){var J=X.concat(),q=[];if(!B||B&&!it.test(B))return J;B.replace(ot,function(at){var ft=new RegExp(U).exec(at).filter(function(mt){return!!mt}),ct=ft[1],dt=ft.slice(2).map(parseFloat);switch(ct){case"translate":j(J,dt);break;case"rotate":dt[0]=i.util.degreesToRadians(dt[0]),F(J,dt);break;case"scale":O(J,dt);break;case"skewX":L(J,dt,2);break;case"skewY":L(J,dt,1);break;case"matrix":J=dt;break}q.push(J.concat()),J=X.concat()});for(var st=q[0];q.length>1;)q.shift(),st=i.util.multiplyTransformMatrices(st,q[0]);return st}}();function R(F,O){var L,j;F.replace(/;\s*$/,"").split(";").forEach(function(X){var V=X.split(":");L=V[0].trim().toLowerCase(),j=V[1].trim(),O[L]=j})}function P(F,O){var L,j;for(var X in F)typeof F[X]!="undefined"&&(L=X.toLowerCase(),j=F[X],O[L]=j)}function D(F,O){var L={};for(var j in i.cssRules[O])if(N(F,j.split(" ")))for(var X in i.cssRules[O][j])L[X]=i.cssRules[O][j][X];return L}function N(F,O){var L,j=!0;return L=W(F,O.pop()),L&&O.length&&(j=K(F,O)),L&&j&&O.length===0}function K(F,O){for(var L,j=!0;F.parentNode&&F.parentNode.nodeType===1&&O.length;)j&&(L=O.pop()),F=F.parentNode,j=W(F,L);return O.length===0}function W(F,O){var L=F.nodeName,j=F.getAttribute("class"),X=F.getAttribute("id"),V,tt;if(V=new RegExp("^"+L,"i"),O=O.replace(V,""),X&&O.length&&(V=new RegExp("#"+X+"(?![a-zA-Z\\-]+)","i"),O=O.replace(V,"")),j&&O.length)for(j=j.split(" "),tt=j.length;tt--;)V=new RegExp("\\."+j[tt]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(V,"");return O.length===0}function Q(F,O){var L;if(F.getElementById&&(L=F.getElementById(O)),L)return L;var j,X,V,tt=F.getElementsByTagName("*");for(X=0,V=tt.length;X<V;X++)if(j=tt[X],O===j.getAttribute("id"))return j}function nt(F){for(var O=A(F,["use","svg:use"]),L=0;O.length&&L<O.length;){var j=O[L],X=(j.getAttribute("xlink:href")||j.getAttribute("href")).substr(1),V=j.getAttribute("x")||0,tt=j.getAttribute("y")||0,$=Q(F,X).cloneNode(!0),rt=($.getAttribute("transform")||"")+" translate("+V+", "+tt+")",E,M=O.length,I,H,U,Z,et=i.svgNS;if(z($),/^svg$/i.test($.nodeName)){var it=$.ownerDocument.createElementNS(et,"g");for(H=0,U=$.attributes,Z=U.length;H<Z;H++)I=U.item(H),it.setAttributeNS(et,I.nodeName,I.nodeValue);for(;$.firstChild;)it.appendChild($.firstChild);$=it}for(H=0,U=j.attributes,Z=U.length;H<Z;H++)I=U.item(H),!(I.nodeName==="x"||I.nodeName==="y"||I.nodeName==="xlink:href"||I.nodeName==="href")&&(I.nodeName==="transform"?rt=I.nodeValue+" "+rt:$.setAttribute(I.nodeName,I.nodeValue));$.setAttribute("transform",rt),$.setAttribute("instantiated_by_use","1"),$.removeAttribute("id"),E=j.parentNode,E.replaceChild($,j),O.length===M&&L++}}var k=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function z(F){var O=F.getAttribute("viewBox"),L=1,j=1,X=0,V=0,tt,$,rt,E,M=F.getAttribute("width"),I=F.getAttribute("height"),H=F.getAttribute("x")||0,U=F.getAttribute("y")||0,Z=F.getAttribute("preserveAspectRatio")||"",et=!O||!i.svgViewBoxElementsRegEx.test(F.nodeName)||!(O=O.match(k)),it=!M||!I||M==="100%"||I==="100%",ot=et&&it,B={},J="",q=0,st=0;if(B.width=0,B.height=0,B.toBeParsed=ot,ot)return B;if(et)return B.width=o(M),B.height=o(I),B;if(X=-parseFloat(O[1]),V=-parseFloat(O[2]),tt=parseFloat(O[3]),$=parseFloat(O[4]),B.minX=X,B.minY=V,B.viewBoxWidth=tt,B.viewBoxHeight=$,it?(B.width=tt,B.height=$):(B.width=o(M),B.height=o(I),L=B.width/tt,j=B.height/$),Z=i.util.parsePreserveAspectRatioAttribute(Z),Z.alignX!=="none"&&(Z.meetOrSlice==="meet"&&(j=L=L>j?j:L),Z.meetOrSlice==="slice"&&(j=L=L>j?L:j),q=B.width-tt*L,st=B.height-$*L,Z.alignX==="Mid"&&(q/=2),Z.alignY==="Mid"&&(st/=2),Z.alignX==="Min"&&(q=0),Z.alignY==="Min"&&(st=0)),L===1&&j===1&&X===0&&V===0&&H===0&&U===0)return B;if((H||U)&&(J=" translate("+o(H)+" "+o(U)+") "),rt=J+" matrix("+L+" 0 0 "+j+" "+(X*L+q)+" "+(V*j+st)+") ",B.viewboxTransform=i.parseTransformAttribute(rt),F.nodeName==="svg"){for(E=F.ownerDocument.createElementNS(i.svgNS,"g");F.firstChild;)E.appendChild(F.firstChild);F.appendChild(E)}else E=F,rt=E.getAttribute("transform")+rt;return E.setAttribute("transform",rt),B}function Y(F,O){for(;F&&(F=F.parentNode);)if(F.nodeName&&O.test(F.nodeName.replace("svg:",""))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(F,O,L,j){if(!!F){nt(F);var X=i.Object.__uid++,V,tt,$=z(F),rt=i.util.toArray(F.getElementsByTagName("*"));if($.crossOrigin=j&&j.crossOrigin,$.svgUid=X,rt.length===0&&i.isLikelyNode){rt=F.selectNodes('//*[name(.)!="svg"]');var E=[];for(V=0,tt=rt.length;V<tt;V++)E[V]=rt[V];rt=E}var M=rt.filter(function(H){return z(H),i.svgValidTagNamesRegEx.test(H.nodeName.replace("svg:",""))&&!Y(H,i.svgInvalidAncestorsRegEx)});if(!M||M&&!M.length){O&&O([],{});return}var I={};rt.filter(function(H){return H.nodeName.replace("svg:","")==="clipPath"}).forEach(function(H){var U=H.getAttribute("id");I[U]=i.util.toArray(H.getElementsByTagName("*")).filter(function(Z){return i.svgValidTagNamesRegEx.test(Z.nodeName.replace("svg:",""))})}),i.gradientDefs[X]=i.getGradientDefs(F),i.cssRules[X]=i.getCSSRules(F),i.clipPaths[X]=I,i.parseElements(M,function(H,U){O&&(O(H,$,U,rt),delete i.gradientDefs[X],delete i.cssRules[X],delete i.clipPaths[X])},r($),L,j)}};function G(F,O){var L=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],j="xlink:href",X=O.getAttribute(j).substr(1),V=Q(F,X);if(V&&V.getAttribute(j)&&G(F,V),L.forEach(function($){V&&!O.hasAttribute($)&&V.hasAttribute($)&&O.setAttribute($,V.getAttribute($))}),!O.children.length)for(var tt=V.cloneNode(!0);tt.firstChild;)O.appendChild(tt.firstChild);O.removeAttribute(j)}var lt=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");c(i,{parseFontDeclaration:function(F,O){var L=F.match(lt);if(!!L){var j=L[1],X=L[3],V=L[4],tt=L[5],$=L[6];j&&(O.fontStyle=j),X&&(O.fontWeight=isNaN(parseFloat(X))?X:parseFloat(X)),V&&(O.fontSize=o(V)),$&&(O.fontFamily=$),tt&&(O.lineHeight=tt==="normal"?1:tt)}},getGradientDefs:function(F){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],L=A(F,O),j,X=0,V={};for(X=L.length;X--;)j=L[X],j.getAttribute("xlink:href")&&G(F,j),V[j.getAttribute("id")]=j;return V},parseAttributes:function(F,O,L){if(!!F){var j,X={},V,tt;typeof L=="undefined"&&(L=F.getAttribute("svgUid")),F.parentNode&&i.svgValidParentsRegEx.test(F.parentNode.nodeName)&&(X=i.parseAttributes(F.parentNode,O,L));var $=O.reduce(function(Z,et){return j=F.getAttribute(et),j&&(Z[et]=j),Z},{}),rt=c(D(F,L),i.parseStyleAttribute(F));$=c($,rt),rt[b]&&F.setAttribute(b,rt[b]),V=tt=X.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,$[v]&&($[v]=V=o($[v],tt));var E,M,I={};for(var H in $)E=w(H),M=C(E,$[H],X,V),I[E]=M;I&&I.font&&i.parseFontDeclaration(I.font,I);var U=c(X,I);return i.svgValidParentsRegEx.test(F.nodeName)?U:T(U)}},parseElements:function(F,O,L,j,X){new i.ElementsParser(F,O,L,j,X).parse()},parseStyleAttribute:function(F){var O={},L=F.getAttribute("style");return L&&(typeof L=="string"?R(L,O):P(L,O)),O},parsePointsAttribute:function(F){if(!F)return null;F=F.replace(/,/g," ").trim(),F=F.split(/\s+/);var O=[],L,j;for(L=0,j=F.length;L<j;L+=2)O.push({x:parseFloat(F[L]),y:parseFloat(F[L+1])});return O},getCSSRules:function(F){var O=F.getElementsByTagName("style"),L,j,X={},V;for(L=0,j=O.length;L<j;L++){var tt=O[L].textContent||"";tt=tt.replace(/\/\*[\s\S]*?\*\//g,""),tt.trim()!==""&&(V=tt.match(/[^{]*\{[\s\S]*?\}/g),V=V.map(function($){return $.trim()}),V.forEach(function($){var rt=$.match(/([\s\S]*?)\s*\{([^}]*)\}/),E={},M=rt[2].trim(),I=M.replace(/;$/,"").split(/\s*;\s*/);for(L=0,j=I.length;L<j;L++){var H=I[L].split(/\s*:\s*/),U=H[0],Z=H[1];E[U]=Z}$=rt[1],$.split(",").forEach(function(et){et=et.replace(/^svg/i,"").trim(),et!==""&&(X[et]?i.util.object.extend(X[et],E):X[et]=i.util.object.clone(E))})}))}return X},loadSVGFromURL:function(F,O,L,j){F=F.replace(/^\n\s*/,"").trim(),new i.util.request(F,{method:"get",onComplete:X});function X(V){var tt=V.responseXML;if(tt&&!tt.documentElement&&i.window.ActiveXObject&&V.responseText&&(tt=new ActiveXObject("Microsoft.XMLDOM"),tt.async="false",tt.loadXML(V.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),!tt||!tt.documentElement)return O&&O(null),!1;i.parseSVGDocument(tt.documentElement,function($,rt,E,M){O&&O($,rt,E,M)},L,j)}},loadSVGFromString:function(F,O,L,j){F=F.trim();var X;if(typeof i.window.DOMParser!="undefined"){var V=new i.window.DOMParser;V&&V.parseFromString&&(X=V.parseFromString(F,"text/xml"))}else i.window.ActiveXObject&&(X=new ActiveXObject("Microsoft.XMLDOM"),X.async="false",X.loadXML(F.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));i.parseSVGDocument(X.documentElement,function(tt,$,rt,E){O(tt,$,rt,E)},L,j)}})}(t),e.ElementsParser=function(f,i,c,r,n,o){this.elements=f,this.callback=i,this.options=c,this.reviver=r,this.svgUid=c&&c.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var i=this;this.elements.forEach(function(c,r){c.setAttribute("svgUid",i.svgUid),i.createObject(c,r)})},f.findTag=function(i){return e[e.util.string.capitalize(i.tagName.replace("svg:",""))]},f.createObject=function(i,c){var r=this.findTag(i);if(r&&r.fromElement)try{r.fromElement(i,this.createCallback(c,i),this.options)}catch(n){e.log(n)}else this.checkIfDone()},f.createCallback=function(i,c){var r=this;return function(n){var o;r.resolveGradient(n,c,"fill"),r.resolveGradient(n,c,"stroke"),n instanceof e.Image&&n._originalElement&&(o=n.parsePreserveAspectRatioAttribute(c)),n._removeTransformMatrix(o),r.resolveClipPath(n,c),r.reviver&&r.reviver(c,n),r.instances[i]=n,r.checkIfDone()}},f.extractPropertyDefinition=function(i,c,r){var n=i[c],o=this.regexUrl;if(!!o.test(n)){o.lastIndex=0;var a=o.exec(n)[1];return o.lastIndex=0,e[r][this.svgUid][a]}},f.resolveGradient=function(i,c,r){var n=this.extractPropertyDefinition(i,r,"gradientDefs");if(n){var o=c.getAttribute(r+"-opacity"),a=e.Gradient.fromElement(n,i,o,this.options);i.set(r,a)}},f.createClipPathCallback=function(i,c){return function(r){r._removeTransformMatrix(),r.fillRule=r.clipRule,c.push(r)}},f.resolveClipPath=function(i,c){var r=this.extractPropertyDefinition(i,"clipPath","clipPaths"),n,o,a,u,l,s;if(r){u=[],a=e.util.invertTransform(i.calcTransformMatrix());for(var h=r[0].parentNode,d=c;d.parentNode&&d.getAttribute("clip-path")!==i.clipPath;)d=d.parentNode;d.parentNode.appendChild(h);for(var m=0;m<r.length;m++)n=r[m],o=this.findTag(n),o.fromElement(n,this.createClipPathCallback(i,u),this.options);u.length===1?r=u[0]:r=new e.Group(u),l=e.util.multiplyTransformMatrices(a,r.calcTransformMatrix()),r.clipPath&&this.resolveClipPath(r,d);var s=e.util.qrDecompose(l);r.flipX=!1,r.flipY=!1,r.set("scaleX",s.scaleX),r.set("scaleY",s.scaleY),r.angle=s.angle,r.skewX=s.skewX,r.skewY=0,r.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),i.clipPath=r}else delete i.clipPath},f.checkIfDone=function(){--this.numElements==0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(f){var i=f.fabric||(f.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=c;function c(r,n){this.x=r,this.y=n}c.prototype={type:"point",constructor:c,add:function(r){return new c(this.x+r.x,this.y+r.y)},addEquals:function(r){return this.x+=r.x,this.y+=r.y,this},scalarAdd:function(r){return new c(this.x+r,this.y+r)},scalarAddEquals:function(r){return this.x+=r,this.y+=r,this},subtract:function(r){return new c(this.x-r.x,this.y-r.y)},subtractEquals:function(r){return this.x-=r.x,this.y-=r.y,this},scalarSubtract:function(r){return new c(this.x-r,this.y-r)},scalarSubtractEquals:function(r){return this.x-=r,this.y-=r,this},multiply:function(r){return new c(this.x*r,this.y*r)},multiplyEquals:function(r){return this.x*=r,this.y*=r,this},divide:function(r){return new c(this.x/r,this.y/r)},divideEquals:function(r){return this.x/=r,this.y/=r,this},eq:function(r){return this.x===r.x&&this.y===r.y},lt:function(r){return this.x<r.x&&this.y<r.y},lte:function(r){return this.x<=r.x&&this.y<=r.y},gt:function(r){return this.x>r.x&&this.y>r.y},gte:function(r){return this.x>=r.x&&this.y>=r.y},lerp:function(r,n){return typeof n=="undefined"&&(n=.5),n=Math.max(Math.min(1,n),0),new c(this.x+(r.x-this.x)*n,this.y+(r.y-this.y)*n)},distanceFrom:function(r){var n=this.x-r.x,o=this.y-r.y;return Math.sqrt(n*n+o*o)},midPointFrom:function(r){return this.lerp(r)},min:function(r){return new c(Math.min(this.x,r.x),Math.min(this.y,r.y))},max:function(r){return new c(Math.max(this.x,r.x),Math.max(this.y,r.y))},toString:function(){return this.x+","+this.y},setXY:function(r,n){return this.x=r,this.y=n,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setFromPoint:function(r){return this.x=r.x,this.y=r.y,this},swap:function(r){var n=this.x,o=this.y;this.x=r.x,this.y=r.y,r.x=n,r.y=o},clone:function(){return new c(this.x,this.y)}}}(t),function(f){var i=f.fabric||(f.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function c(r){this.status=r,this.points=[]}i.Intersection=c,i.Intersection.prototype={constructor:c,appendPoint:function(r){return this.points.push(r),this},appendPoints:function(r){return this.points=this.points.concat(r),this}},i.Intersection.intersectLineLine=function(r,n,o,a){var u,l=(a.x-o.x)*(r.y-o.y)-(a.y-o.y)*(r.x-o.x),s=(n.x-r.x)*(r.y-o.y)-(n.y-r.y)*(r.x-o.x),h=(a.y-o.y)*(n.x-r.x)-(a.x-o.x)*(n.y-r.y);if(h!==0){var d=l/h,m=s/h;0<=d&&d<=1&&0<=m&&m<=1?(u=new c("Intersection"),u.appendPoint(new i.Point(r.x+d*(n.x-r.x),r.y+d*(n.y-r.y)))):u=new c}else l===0||s===0?u=new c("Coincident"):u=new c("Parallel");return u},i.Intersection.intersectLinePolygon=function(r,n,o){var a=new c,u=o.length,l,s,h,d;for(d=0;d<u;d++)l=o[d],s=o[(d+1)%u],h=c.intersectLineLine(r,n,l,s),a.appendPoints(h.points);return a.points.length>0&&(a.status="Intersection"),a},i.Intersection.intersectPolygonPolygon=function(r,n){var o=new c,a=r.length,u;for(u=0;u<a;u++){var l=r[u],s=r[(u+1)%a],h=c.intersectLinePolygon(l,s,n);o.appendPoints(h.points)}return o.points.length>0&&(o.status="Intersection"),o},i.Intersection.intersectPolygonRectangle=function(r,n,o){var a=n.min(o),u=n.max(o),l=new i.Point(u.x,a.y),s=new i.Point(a.x,u.y),h=c.intersectLinePolygon(a,l,r),d=c.intersectLinePolygon(l,u,r),m=c.intersectLinePolygon(u,s,r),v=c.intersectLinePolygon(s,a,r),b=new c;return b.appendPoints(h.points),b.appendPoints(d.points),b.appendPoints(m.points),b.appendPoints(v.points),b.points.length>0&&(b.status="Intersection"),b}}(t),function(f){var i=f.fabric||(f.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function c(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}i.Color=c,i.Color.prototype={_tryParsingColor:function(n){var o;n in c.colorNameMap&&(n=c.colorNameMap[n]),n==="transparent"&&(o=[255,255,255,0]),o||(o=c.sourceFromHex(n)),o||(o=c.sourceFromRgb(n)),o||(o=c.sourceFromHsl(n)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(n,o,a){n/=255,o/=255,a/=255;var u,l,s,h=i.util.array.max([n,o,a]),d=i.util.array.min([n,o,a]);if(s=(h+d)/2,h===d)u=l=0;else{var m=h-d;switch(l=s>.5?m/(2-h-d):m/(h+d),h){case n:u=(o-a)/m+(o<a?6:0);break;case o:u=(a-n)/m+2;break;case a:u=(n-o)/m+4;break}u/=6}return[Math.round(u*360),Math.round(l*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),o=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var n=this.getSource(),o=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+n[3]+")"},toHex:function(){var n=this.getSource(),o,a,u;return o=n[0].toString(16),o=o.length===1?"0"+o:o,a=n[1].toString(16),a=a.length===1?"0"+a:a,u=n[2].toString(16),u=u.length===1?"0"+u:u,o.toUpperCase()+a.toUpperCase()+u.toUpperCase()},toHexa:function(){var n=this.getSource(),o;return o=Math.round(n[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var o=this.getSource();return o[3]=n,this.setSource(o),this},toGrayscale:function(){var n=this.getSource(),o=parseInt((n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),10),a=n[3];return this.setSource([o,o,o,a]),this},toBlackWhite:function(n){var o=this.getSource(),a=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),u=o[3];return n=n||127,a=Number(a)<Number(n)?0:255,this.setSource([a,a,a,u]),this},overlayWith:function(n){n instanceof c||(n=new c(n));var o=[],a=this.getAlpha(),u=.5,l=this.getSource(),s=n.getSource(),h;for(h=0;h<3;h++)o.push(Math.round(l[h]*(1-u)+s[h]*u));return o[3]=a,this.setSource(o),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function r(n,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?n+(o-n)*6*a:a<1/2?o:a<2/3?n+(o-n)*(2/3-a)*6:n}i.Color.fromRgb=function(n){return c.fromSource(c.sourceFromRgb(n))},i.Color.sourceFromRgb=function(n){var o=n.match(c.reRGBa);if(o){var a=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),u=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),l=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(a,10),parseInt(u,10),parseInt(l,10),o[4]?parseFloat(o[4]):1]}},i.Color.fromRgba=c.fromRgb,i.Color.fromHsl=function(n){return c.fromSource(c.sourceFromHsl(n))},i.Color.sourceFromHsl=function(n){var o=n.match(c.reHSLa);if(!!o){var a=(parseFloat(o[1])%360+360)%360/360,u=parseFloat(o[2])/(/%$/.test(o[2])?100:1),l=parseFloat(o[3])/(/%$/.test(o[3])?100:1),s,h,d;if(u===0)s=h=d=l;else{var m=l<=.5?l*(u+1):l+u-l*u,v=l*2-m;s=r(v,m,a+1/3),h=r(v,m,a),d=r(v,m,a-1/3)}return[Math.round(s*255),Math.round(h*255),Math.round(d*255),o[4]?parseFloat(o[4]):1]}},i.Color.fromHsla=c.fromHsl,i.Color.fromHex=function(n){return c.fromSource(c.sourceFromHex(n))},i.Color.sourceFromHex=function(n){if(n.match(c.reHex)){var o=n.slice(n.indexOf("#")+1),a=o.length===3||o.length===4,u=o.length===8||o.length===4,l=a?o.charAt(0)+o.charAt(0):o.substring(0,2),s=a?o.charAt(1)+o.charAt(1):o.substring(2,4),h=a?o.charAt(2)+o.charAt(2):o.substring(4,6),d=u?a?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(l,16),parseInt(s,16),parseInt(h,16),parseFloat((parseInt(d,16)/255).toFixed(2))]}},i.Color.fromSource=function(n){var o=new c;return o.setSource(n),o}}(t),function(){function f(o,a){var u=o.getAttribute("style"),l=o.getAttribute("offset")||0,s,h,d,m;if(l=parseFloat(l)/(/%$/.test(l)?100:1),l=l<0?0:l>1?1:l,u){var v=u.split(/\s*;\s*/);for(v[v.length-1]===""&&v.pop(),m=v.length;m--;){var b=v[m].split(/\s*:\s*/),w=b[0].trim(),C=b[1].trim();w==="stop-color"?s=C:w==="stop-opacity"&&(d=C)}}return s||(s=o.getAttribute("stop-color")||"rgb(0,0,0)"),d||(d=o.getAttribute("stop-opacity")),s=new e.Color(s),h=s.getAlpha(),d=isNaN(parseFloat(d))?1:parseFloat(d),d*=h*a,{offset:l,color:s.toRgb(),opacity:d}}function i(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function c(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var r=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var a,u=this;Object.keys(o).forEach(function(l){u[l]=o[l]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,a={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(a.r1=o.coords.r1||0,a.r2=o.coords.r2||0),this.coords=a,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var a in o){var u=new e.Color(o[a]);this.colorStops.push({offset:parseFloat(a),color:u.toRgb(),opacity:u.getAlpha()})}return this},toObject:function(o){var a={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,a,o),a},toSVG:function(o,a){var u=r(this.coords,!0),l,s,a=a||{},h,d,m=r(this.colorStops,!0),v=u.r1>u.r2,b=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),w=-this.offsetX,C=-this.offsetY,x=!!a.additionalTransform,T=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(m.sort(function(N,K){return N.offset-K.offset}),T==="objectBoundingBox"?(w/=o.width,C/=o.height):(w+=o.width/2,C+=o.height/2),o.type==="path"&&(w-=o.pathOffset.x,C-=o.pathOffset.y),b[4]-=w,b[5]-=C,d='id="SVGID_'+this.id+'" gradientUnits="'+T+'"',d+=' gradientTransform="'+(x?a.additionalTransform+" ":"")+e.util.matrixToSVG(b)+'" ',this.type==="linear"?h=["<linearGradient ",d,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`">
`]:this.type==="radial"&&(h=["<radialGradient ",d,' cx="',v?u.x1:u.x2,'" cy="',v?u.y1:u.y2,'" r="',v?u.r1:u.r2,'" fx="',v?u.x2:u.x1,'" fy="',v?u.y2:u.y1,`">
`]),this.type==="radial"){if(v)for(m=m.concat(),m.reverse(),l=0,s=m.length;l<s;l++)m[l].offset=1-m[l].offset;var A=Math.min(u.r1,u.r2);if(A>0){var R=Math.max(u.r1,u.r2),P=A/R;for(l=0,s=m.length;l<s;l++)m[l].offset+=P*(1-m[l].offset)}}for(l=0,s=m.length;l<s;l++){var D=m[l];h.push("<stop ",'offset="',D.offset*100+"%",'" style="stop-color:',D.color,typeof D.opacity!="undefined"?";stop-opacity: "+D.opacity:";",`"/>
`)}return h.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),h.join("")},toLive:function(o,a){var u,l=e.util.object.clone(this.coords),s,h,d=l.x1,m=l.y1,v=l.x2,b=l.y2,w=this.colorStops;if(!!this.type){for(a instanceof e.Text&&this.gradientUnits==="percentage"&&(d*=a.width,m*=a.height,v*=a.width,b*=a.height),this.type==="linear"?u=o.createLinearGradient(d,m,v,b):this.type==="radial"&&(u=o.createRadialGradient(d,m,l.r1,v,b,l.r2)),s=0,h=w.length;s<h;s++){var C=w[s].color,x=w[s].opacity,T=w[s].offset;typeof x!="undefined"&&(C=new e.Color(C).setAlpha(x).toRgba()),u.addColorStop(T,C)}return u}}}),e.util.object.extend(e.Gradient,{fromElement:function(o,a,u,l){var s=parseFloat(u)/(/%$/.test(u)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var h=o.getElementsByTagName("stop"),d,m=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",v=o.getAttribute("gradientTransform")||"",b=[],w,C,x=0,T=0,A;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(d="linear",w=i(o)):(d="radial",w=c(o)),C=h.length;C--;)b.push(f(h[C],s));A=e.parseTransformAttribute(v),n(a,w,l,m),m==="pixels"&&(x=-a.left,T=-a.top);var R=new e.Gradient({id:o.getAttribute("id"),type:d,coords:w,colorStops:b,gradientUnits:m,gradientTransform:A,offsetX:x,offsetY:T});return R},forObject:function(o,a){return a||(a={}),n(o,a.coords,a.gradientUnits,{viewBoxWidth:100,viewBoxHeight:100}),new e.Gradient(a)}});function n(o,a,u,l){var s,h;Object.keys(a).forEach(function(d){s=a[d],s==="Infinity"?h=1:s==="-Infinity"?h=0:(h=parseFloat(a[d],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(h*=.01,l==="pixels"&&((d==="x1"||d==="x2"||d==="r2")&&(h*=u.viewBoxWidth||u.width),(d==="y1"||d==="y2")&&(h*=u.viewBoxHeight||u.height)))),a[d]=h})}}(),function(){var f=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,c){if(i||(i={}),this.id=e.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){c&&c(this);return}if(typeof e.util.getFunctionBody(i.source)!="undefined")this.source=new Function(e.util.getFunctionBody(i.source)),c&&c(this);else{var r=this;this.source=e.util.createImage(),e.util.loadImage(i.source,function(n){r.source=n,c&&c(r)},null,this.crossOrigin)}},toObject:function(i){var c=e.Object.NUM_FRACTION_DIGITS,r,n;return typeof this.source=="function"?r=String(this.source):typeof this.source.src=="string"?r=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(r=this.source.toDataURL()),n={type:"pattern",source:r,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,c),offsetY:f(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,n,i),n},toSVG:function(i){var c=typeof this.source=="function"?this.source():this.source,r=c.width/i.width,n=c.height/i.height,o=this.offsetX/i.width,a=this.offsetY/i.height,u="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(n=1,a&&(n+=Math.abs(a))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(r=1,o&&(r+=Math.abs(o))),c.src?u=c.src:c.toDataURL&&(u=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+a+'" width="'+r+'" height="'+n+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+u+`"></image>
</pattern>
`},setOptions:function(i){for(var c in i)this[c]=i[c]},toLive:function(i){var c=typeof this.source=="function"?this.source():this.source;return!c||typeof c.src!="undefined"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":i.createPattern(c,this.repeat)}})}(),function(f){var i=f.fabric||(f.fabric={}),c=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(r){typeof r=="string"&&(r=this._parseShadow(r));for(var n in r)this[n]=r[n];this.id=i.Object.__uid++},_parseShadow:function(r){var n=r.trim(),o=i.Shadow.reOffsetsAndBlur.exec(n)||[],a=n.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:a.trim(),offsetX:parseInt(o[1],10)||0,offsetY:parseInt(o[2],10)||0,blur:parseInt(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(r){var n=40,o=40,a=i.Object.NUM_FRACTION_DIGITS,u=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-r.angle)),l=20,s=new i.Color(this.color);return r.width&&r.height&&(n=c((Math.abs(u.x)+this.blur)/r.width,a)*100+l,o=c((Math.abs(u.y)+this.blur)/r.height,a)*100+l),r.flipX&&(u.x*=-1),r.flipY&&(u.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+n+'%" width="'+(100+2*n)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,a)+`"></feGaussianBlur>
	<feOffset dx="`+c(u.x,a)+'" dy="'+c(u.y,a)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var r={},n=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==n[o]&&(r[o]=this[o])},this),r}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var f=e.util.object.extend,i=e.util.getElementOffset,c=e.util.removeFromArray,r=e.util.toFixed,n=e.util.transformPoint,o=e.util.invertTransform,a=e.util.getNodeCanvas,u=e.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(s,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,h)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,h){var d=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(h),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),h.overlayImage&&this.setOverlayImage(h.overlayImage,d),h.backgroundImage&&this.setBackgroundImage(h.backgroundImage,d),h.backgroundColor&&this.setBackgroundColor(h.backgroundColor,d),h.overlayColor&&this.setOverlayColor(h.overlayColor,d),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?e.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var s=e.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,h,d){h.setAttribute("width",this.width*s),h.setAttribute("height",this.height*s),d.scale(s,s)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(s,h,d){return this.__setBgOverlayImage("overlayImage",s,h,d)},setBackgroundImage:function(s,h,d){return this.__setBgOverlayImage("backgroundImage",s,h,d)},setOverlayColor:function(s,h){return this.__setBgOverlayColor("overlayColor",s,h)},setBackgroundColor:function(s,h){return this.__setBgOverlayColor("backgroundColor",s,h)},_setImageSmoothing:function(){var s=this.getContext();s.imageSmoothingEnabled=s.imageSmoothingEnabled||s.webkitImageSmoothingEnabled||s.mozImageSmoothingEnabled||s.msImageSmoothingEnabled||s.oImageSmoothingEnabled,s.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(s,h,d,m){return typeof h=="string"?e.util.loadImage(h,function(v){if(v){var b=new e.Image(v,m);this[s]=b,b.canvas=this}d&&d(v)},this,m&&m.crossOrigin):(m&&h.setOptions(m),this[s]=h,h&&(h.canvas=this),d&&d(h)),this},__setBgOverlayColor:function(s,h,d){return this[s]=h,this._initGradient(h,s),this._initPattern(h,s,d),this},_createCanvasElement:function(){var s=u();if(!s||(s.style||(s.style={}),typeof s.getContext=="undefined"))throw l;return s},_initOptions:function(s){var h=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(h.width,10)||0,this.height=this.height||parseInt(h.height,10)||0,!!this.lowerCanvasEl.style&&(h.width=this.width,h.height=this.height,h.style.width=this.width+"px",h.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=e.util.getById(s)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,h){return this.setDimensions({width:s},h)},setHeight:function(s,h){return this.setDimensions({height:s},h)},setDimensions:function(s,h){var d;h=h||{};for(var m in s)d=s[m],h.cssOnly||(this._setBackstoreDimension(m,s[m]),d+="px",this.hasLostContext=!0),h.backstoreOnly||this._setCssDimension(m,d);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),h.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,h){return this.lowerCanvasEl[s]=h,this.upperCanvasEl&&(this.upperCanvasEl[s]=h),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=h),this[s]=h,this},_setCssDimension:function(s,h){return this.lowerCanvasEl.style[s]=h,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=h),this.wrapperEl&&(this.wrapperEl.style[s]=h),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var h=this._activeObject,d,m=!1,v=!0,b,w;for(this.viewportTransform=s,b=0,w=this._objects.length;b<w;b++)d=this._objects[b],d.group||d.setCoords(m,v);return h&&h.type==="activeSelection"&&h.setCoords(m,v),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,h){var d=s,m=this.viewportTransform.slice(0);s=n(s,o(this.viewportTransform)),m[0]=h,m[3]=h;var v=n(s,m);return m[4]+=d.x-v.x,m[5]+=d.y-v.y,this.setViewportTransform(m)},setZoom:function(s){return this.zoomToPoint(new e.Point(0,0),s),this},absolutePan:function(s){var h=this.viewportTransform.slice(0);return h[4]=-s.x,h[5]=-s.y,this.setViewportTransform(h)},relativePan:function(s){return this.absolutePan(new e.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},h=this.width,d=this.height,m=o(this.viewportTransform);return s.tl=n({x:0,y:0},m),s.br=n({x:h,y:d},m),s.tr=new e.Point(s.br.x,s.tl.y),s.bl=new e.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,h){var d=this.viewportTransform,m=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),this.fire("before:render",{ctx:s}),this.clipTo&&e.util.clipContext(this,s),this._renderBackground(s),s.save(),s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._renderObjects(s,h),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.clipTo&&s.restore(),m&&(m.canvas=this,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var h=this.viewportTransform,d=this.clipPath;s.save(),s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),s.globalCompositeOperation="destination-in",d.transform(s),s.scale(1/d.zoomX,1/d.zoomY),s.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),s.restore()},_renderObjects:function(s,h){var d,m;for(d=0,m=h.length;d<m;++d)h[d]&&h[d].render(s)},_renderBackgroundOrOverlay:function(s,h){var d=this[h+"Color"],m=this[h+"Image"],v=this.viewportTransform,b=this[h+"Vpt"];if(!(!d&&!m)){if(d){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=d.toLive?d.toLive(s,this):d,b&&s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),s.transform(1,0,0,1,d.offsetX||0,d.offsetY||0);var w=d.gradientTransform||d.patternTransform;w&&s.transform(w[0],w[1],w[2],w[3],w[4],w[5]),s.fill(),s.restore()}m&&(s.save(),b&&s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),m.render(s),s.restore())}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(s){return this._centerObject(s,new e.Point(this.getCenter().left,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new e.Point(s.getCenterPoint().x,this.getCenter().top))},centerObject:function(s){var h=this.getCenter();return this._centerObject(s,new e.Point(h.left,h.top))},viewportCenterObject:function(s){var h=this.getVpCenter();return this._centerObject(s,h)},viewportCenterObjectH:function(s){var h=this.getVpCenter();return this._centerObject(s,new e.Point(h.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var h=this.getVpCenter();return this._centerObject(s,new e.Point(s.getCenterPoint().x,h.y))},getVpCenter:function(){var s=this.getCenter(),h=o(this.viewportTransform);return n({x:s.left,y:s.top},h)},_centerObject:function(s,h){return s.setPositionByOrigin(h,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,h){var d=this.clipPath,m={version:e.version,objects:this._toObjects(s,h)};return d&&(m.clipPath=this._toObject(this.clipPath,s,h)),f(m,this.__serializeBgOverlay(s,h)),e.util.populateWithProperties(this,m,h),m},_toObjects:function(s,h){return this._objects.filter(function(d){return!d.excludeFromExport}).map(function(d){return this._toObject(d,s,h)},this)},_toObject:function(s,h,d){var m;this.includeDefaultValues||(m=s.includeDefaultValues,s.includeDefaultValues=!1);var v=s[h](d);return this.includeDefaultValues||(s.includeDefaultValues=m),v},__serializeBgOverlay:function(s,h){var d={},m=this.backgroundImage,v=this.overlayImage;return this.backgroundColor&&(d.background=this.backgroundColor.toObject?this.backgroundColor.toObject(h):this.backgroundColor),this.overlayColor&&(d.overlay=this.overlayColor.toObject?this.overlayColor.toObject(h):this.overlayColor),m&&!m.excludeFromExport&&(d.backgroundImage=this._toObject(m,s,h)),v&&!v.excludeFromExport&&(d.overlayImage=this._toObject(v,s,h)),d},svgViewportTransformation:!0,toSVG:function(s,h){s||(s={}),s.reviver=h;var d=[];return this._setSVGPreamble(d,s),this._setSVGHeader(d,s),this.clipPath&&d.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(d,"background"),this._setSVGBgOverlayImage(d,"backgroundImage",h),this._setSVGObjects(d,h),this.clipPath&&d.push(`</g>
`),this._setSVGBgOverlayColor(d,"overlay"),this._setSVGBgOverlayImage(d,"overlayImage",h),d.push("</svg>"),d.join("")},_setSVGPreamble:function(s,h){h.suppressPreamble||s.push('<?xml version="1.0" encoding="',h.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,h){var d=h.width||this.width,m=h.height||this.height,v,b='viewBox="0 0 '+this.width+" "+this.height+'" ',w=e.Object.NUM_FRACTION_DIGITS;h.viewBox?b='viewBox="'+h.viewBox.x+" "+h.viewBox.y+" "+h.viewBox.width+" "+h.viewBox.height+'" ':this.svgViewportTransformation&&(v=this.viewportTransform,b='viewBox="'+r(-v[4]/v[0],w)+" "+r(-v[5]/v[3],w)+" "+r(this.width/v[0],w)+" "+r(this.height/v[3],w)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',d,'" ','height="',m,'" ',b,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(h),`</defs>
`)},createSVGClipPathMarkup:function(s){var h=this.clipPath;return h?(h.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+h.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,h=["background","overlay"].map(function(d){var m=s[d+"Color"];if(m&&m.toLive){var v=s[d+"Vpt"],b=s.viewportTransform,w={width:s.width/(v?b[0]:1),height:s.height/(v?b[3]:1)};return m.toSVG(w,{additionalTransform:v?e.util.matrixToSVG(b):""})}});return h.join("")},createSVGFontFacesMarkup:function(){var s="",h={},d,m,v,b,w,C,x,T,A,R=e.fontPaths,P=[];for(this._objects.forEach(function N(K){P.push(K),K._objects&&K._objects.forEach(N)}),T=0,A=P.length;T<A;T++)if(d=P[T],m=d.fontFamily,!(d.type.indexOf("text")===-1||h[m]||!R[m])&&(h[m]=!0,!!d.styles)){v=d.styles;for(w in v){b=v[w];for(x in b)C=b[x],m=C.fontFamily,!h[m]&&R[m]&&(h[m]=!0)}}for(var D in h)s+=[`		@font-face {
`,"			font-family: '",D,`';
`,"			src: url('",R[D],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,h){var d,m,v,b=this._objects;for(m=0,v=b.length;m<v;m++)d=b[m],!d.excludeFromExport&&this._setSVGObject(s,d,h)},_setSVGObject:function(s,h,d){s.push(h.toSVG(d))},_setSVGBgOverlayImage:function(s,h,d){this[h]&&!this[h].excludeFromExport&&this[h].toSVG&&s.push(this[h].toSVG(d))},_setSVGBgOverlayColor:function(s,h){var d=this[h+"Color"],m=this.viewportTransform,v=this.width,b=this.height;if(!!d)if(d.toLive){var w=d.repeat,C=e.util.invertTransform(m),x=this[h+"Vpt"],T=x?e.util.matrixToSVG(C):"";s.push('<rect transform="'+T+" translate(",v/2,",",b/2,')"',' x="',d.offsetX-v/2,'" y="',d.offsetY-b/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?d.source.width:v,'" height="',w==="repeat-x"||w==="no-repeat"?d.source.height:b,'" fill="url(#SVGID_'+d.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',d,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var h=this._activeObject,d,m,v;if(s===h&&s.type==="activeSelection")for(v=h._objects,d=v.length;d--;)m=v[d],c(this._objects,m),this._objects.unshift(m);else c(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var h=this._activeObject,d,m,v;if(s===h&&s.type==="activeSelection")for(v=h._objects,d=0;d<v.length;d++)m=v[d],c(this._objects,m),this._objects.push(m);else c(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,h){if(!s)return this;var d=this._activeObject,m,v,b,w,C,x=0;if(s===d&&s.type==="activeSelection")for(C=d._objects,m=0;m<C.length;m++)v=C[m],b=this._objects.indexOf(v),b>0+x&&(w=b-1,c(this._objects,v),this._objects.splice(w,0,v)),x++;else b=this._objects.indexOf(s),b!==0&&(w=this._findNewLowerIndex(s,b,h),c(this._objects,s),this._objects.splice(w,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,h,d){var m,v;if(d)for(m=h,v=h-1;v>=0;--v){var b=s.intersectsWithObject(this._objects[v])||s.isContainedWithinObject(this._objects[v])||this._objects[v].isContainedWithinObject(s);if(b){m=v;break}}else m=h-1;return m},bringForward:function(s,h){if(!s)return this;var d=this._activeObject,m,v,b,w,C,x=0;if(s===d&&s.type==="activeSelection")for(C=d._objects,m=C.length;m--;)v=C[m],b=this._objects.indexOf(v),b<this._objects.length-1-x&&(w=b+1,c(this._objects,v),this._objects.splice(w,0,v)),x++;else b=this._objects.indexOf(s),b!==this._objects.length-1&&(w=this._findNewUpperIndex(s,b,h),c(this._objects,s),this._objects.splice(w,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,h,d){var m,v,b;if(d)for(m=h,v=h+1,b=this._objects.length;v<b;++v){var w=s.intersectsWithObject(this._objects[v])||s.isContainedWithinObject(this._objects[v])||this._objects[v].isContainedWithinObject(s);if(w){m=v;break}}else m=h+1;return m},moveTo:function(s,h){return c(this._objects,s),this._objects.splice(h,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(e.StaticCanvas.prototype,e.Observable),f(e.StaticCanvas.prototype,e.Collection),f(e.StaticCanvas.prototype,e.DataURLExporter),f(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var h=u();if(!h||!h.getContext)return null;var d=h.getContext("2d");if(!d)return null;switch(s){case"setLineDash":return typeof d.setLineDash!="undefined";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var s=a(this.lowerCanvasEl);return s&&s.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(s){var h=a(this.lowerCanvasEl);return h&&h.createJPEGStream(s)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(f){return this.shadow=new e.Shadow(f),this},_setBrushStyles:function(){var f=this.canvas.contextTop;f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,e.StaticCanvas.supports("setLineDash")&&f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var i=this.canvas.viewportTransform;f.save(),f.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(!!this.shadow){var f=this.canvas,i=this.shadow,c=f.contextTop,r=f.getZoom();f&&f._isRetinaScaling()&&(r*=e.devicePixelRatio),c.shadowColor=i.color,c.shadowBlur=i.blur*r,c.shadowOffsetX=i.offsetX*r,c.shadowOffsetY=i.offsetY*r}},needsFullRender:function(){var f=new e.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,initialize:function(f){this.canvas=f,this._points=[]},_drawSegment:function(f,i,c){var r=i.midPointFrom(c);return f.quadraticCurveTo(i.x,i.y,r.x,r.y),r},onMouseDown:function(f,i){!this.canvas._isMainEvent(i.e)||(this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,i){if(!!this.canvas._isMainEvent(i.e)&&this._captureDrawingPath(f)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,r=c.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,c[r-2],c[r-1],!0),n.stroke(),n.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var i=new e.Point(f.x,f.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(f){var i=new e.Point(f.x,f.y);return this._addPoint(i)},_render:function(){var f=this.canvas.contextTop,i,c,r=this._points[0],n=this._points[1];if(this._saveAndTransform(f),f.beginPath(),this._points.length===2&&r.x===n.x&&r.y===n.y){var o=this.width/1e3;r=new e.Point(r.x,r.y),n=new e.Point(n.x,n.y),r.x-=o,n.x+=o}for(f.moveTo(r.x,r.y),i=1,c=this._points.length;i<c;i++)this._drawSegment(f,r,n),r=this._points[i],n=this._points[i+1];f.lineTo(r.x,r.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var i=[],c,r=this.width/1e3,n=new e.Point(f[0].x,f[0].y),o=new e.Point(f[1].x,f[1].y),a=f.length,u=1,l=0,s=a>2;for(s&&(u=f[2].x<o.x?-1:f[2].x===o.x?0:1,l=f[2].y<o.y?-1:f[2].y===o.y?0:1),i.push("M ",n.x-u*r," ",n.y-l*r," "),c=1;c<a;c++){if(!n.eq(o)){var h=n.midPointFrom(o);i.push("Q ",n.x," ",n.y," ",h.x," ",h.y," ")}n=f[c],c+1<f.length&&(o=f[c+1])}return s&&(u=n.x>f[c-2].x?1:n.x===f[c-2].x?0:-1,l=n.y>f[c-2].y?1:n.y===f[c-2].y?0:-1),i.push("L ",n.x+u*r," ",n.y+l*r),i},createPath:function(f){var i=new e.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.setShadow(this.shadow)),i},decimatePoints:function(f,i){if(f.length<=2)return f;var c=this.canvas.getZoom(),r=Math.pow(i/c,2),n,o=f.length-1,a=f[0],u=[a],l;for(n=1;n<o;n++)l=Math.pow(a.x-f[n].x,2)+Math.pow(a.y-f[n].y,2),l>=r&&(a=f[n],u.push(a));return u.length===1&&u.push(new e.Point(u[0].x,u[0].y)),u},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points).join("");if(i==="M 0 0 Q 0 0 0 0 L 0 0"){this.canvas.requestRenderAll();return}var c=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var i=this.addPoint(f),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,i),c.restore()},dot:function(f,i){f.fillStyle=i.fill,f.beginPath(),f.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,i,c,r=this.points;for(this._saveAndTransform(f),i=0,c=r.length;i<c;i++)this.dot(f,r[i]);f.restore()},onMouseMove:function(f){this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f)},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,i,c;this.canvas.renderOnAddRemove=!1;var r=[];for(i=0,c=this.points.length;i<c;i++){var n=this.points[i],o=new e.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&o.setShadow(this.shadow),r.push(o)}var a=new e.Group(r);a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var i=new e.Point(f.x,f.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return i.radius=c,i.fill=r,this.points.push(i),i}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],c=0,r=this.sprayChunks.length;c<r;c++)for(var n=this.sprayChunks[c],o=0,a=n.length;o<a;o++){var u=new e.Rect({width:n[o].width,height:n[o].width,left:n[o].x+1,top:n[o].y+1,originX:"center",originY:"center",fill:this.color});i.push(u)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var l=new e.Group(i);this.shadow&&l.setShadow(this.shadow),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var i={},c,r,n;for(r=0,n=f.length;r<n;r++)c=f[r].left+""+f[r].top,i[c]||(i[c]=f[r]);var o=[];for(c in i)o.push(i[c]);return o},render:function(f){var i=this.canvas.contextTop,c,r;for(i.fillStyle=this.color,this._saveAndTransform(i),c=0,r=f.length;c<r;c++){var n=f[c];typeof n.opacity!="undefined"&&(i.globalAlpha=n.opacity),i.fillRect(n.x,n.y,n.width,n.width)}i.restore()},_render:function(){var f=this.canvas.contextTop,i,c;for(f.fillStyle=this.color,this._saveAndTransform(f),i=0,c=this.sprayChunks.length;i<c;i++)this.render(this.sprayChunks[i]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var i,c,r,n=this.width/2,o;for(o=0;o<this.density;o++){i=e.util.getRandomInt(f.x-n,f.x+n),c=e.util.getRandomInt(f.y-n,f.y+n),this.dotWidthVariance?r=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):r=this.dotWidth;var a=new e.Point(i,c);a.width=r,this.randomOpacity&&(a.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var f=20,i=5,c=e.util.createCanvasElement(),r=c.getContext("2d");return c.width=c.height=f+i,r.fillStyle=this.color,r.beginPath(),r.arc(f/2,f/2,f/2,0,Math.PI*2,!1),r.closePath(),r.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(f){var i=this.callSuper("createPath",f),c=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),i}}),function(){var f=e.util.getPointer,i=e.util.degreesToRadians,c=e.util.radiansToDegrees,r=Math.atan2,n=Math.abs,o=e.StaticCanvas.supports("setLineDash"),a=.5;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(l,s){s||(s={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,s),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),s,h,d;if(l.length>0&&!this.preserveObjectStacking){h=[],d=[];for(var m=0,v=this._objects.length;m<v;m++)s=this._objects[m],l.indexOf(s)===-1?h.push(s):d.push(s);l.length>1&&(this._activeObject._objects=d),h.push.apply(h,d)}else h=this._objects;return h},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_resetCurrentTransform:function(){var l=this._currentTransform;l.target.set({scaleX:l.original.scaleX,scaleY:l.original.scaleY,skewX:l.original.skewX,skewY:l.original.skewY,left:l.original.left,top:l.original.top}),this._shouldCenterTransform(l.target)?(l.originX!=="center"&&(l.originX==="right"?l.mouseXSign=-1:l.mouseXSign=1),l.originY!=="center"&&(l.originY==="bottom"?l.mouseYSign=-1:l.mouseYSign=1),l.originX="center",l.originY="center"):(l.originX=l.original.originX,l.originY=l.original.originY)},containsPoint:function(l,s,h){var d=!0,m=h||this.getPointer(l,d),v;return s.group&&s.group===this._activeObject&&s.group.type==="activeSelection"?v=this._normalizePointer(s.group,m):v={x:m.x,y:m.y},s.containsPoint(v)||s._findTargetCorner(m)},_normalizePointer:function(l,s){var h=l.calcTransformMatrix(),d=e.util.invertTransform(h),m=this.restorePointerVpt(s);return e.util.transformPoint(m,d)},isTargetTransparent:function(l,s,h){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var d=this._normalizePointer(l,{x:s,y:h}),m=Math.max(l.cacheTranslationX+d.x*l.zoomX,0),v=Math.max(l.cacheTranslationY+d.y*l.zoomY,0),x=e.util.isTransparent(l._cacheContext,Math.round(m),Math.round(v),this.targetFindTolerance);return x}var b=this.contextCache,w=l.selectionBackgroundColor,C=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(b),b.save(),b.transform(C[0],C[1],C[2],C[3],C[4],C[5]),l.render(b),b.restore(),l===this._activeObject&&l._renderControls(b,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),l.selectionBackgroundColor=w;var x=e.util.isTransparent(b,s,h,this.targetFindTolerance);return x},_isSelectionKeyPressed:function(l){var s=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?s=!!this.selectionKey.find(function(h){return l[h]===!0}):s=l[this.selectionKey],s},_shouldClearSelection:function(l,s){var h=this.getActiveObjects(),d=this._activeObject;return!s||s&&d&&h.length>1&&h.indexOf(s)===-1&&d!==s&&!this._isSelectionKeyPressed(l)||s&&!s.evented||s&&!s.selectable&&d&&d!==s},_shouldCenterTransform:function(l){if(!!l){var s=this._currentTransform,h;return s.action==="scale"||s.action==="scaleX"||s.action==="scaleY"?h=this.centeredScaling||l.centeredScaling:s.action==="rotate"&&(h=this.centeredRotation||l.centeredRotation),h?!s.altKey:s.altKey}},_getOriginFromCorner:function(l,s){var h={x:l.originX,y:l.originY};return s==="ml"||s==="tl"||s==="bl"?h.x="right":(s==="mr"||s==="tr"||s==="br")&&(h.x="left"),s==="tl"||s==="mt"||s==="tr"?h.y="bottom":(s==="bl"||s==="mb"||s==="br")&&(h.y="top"),h},_getActionFromCorner:function(l,s,h){if(!s||!l)return"drag";switch(s){case"mtr":return"rotate";case"ml":case"mr":return h[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return h[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(l,s,h){if(!!s){var d=this.getPointer(l),m=s._findTargetCorner(this.getPointer(l,!0)),v=this._getActionFromCorner(h,m,l,s),b=this._getOriginFromCorner(s,m);this._currentTransform={target:s,action:v,corner:m,scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,offsetX:d.x-s.left,offsetY:d.y-s.top,originX:b.x,originY:b.y,ex:d.x,ey:d.y,lastX:d.x,lastY:d.y,theta:i(s.angle),width:s.width*s.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:l.shiftKey,altKey:l[this.centeredKey],original:e.util.saveObjectTransform(s)},this._currentTransform.original.originX=b.x,this._currentTransform.original.originY=b.y,this._resetCurrentTransform(),this._beforeTransform(l)}},_translateObject:function(l,s){var h=this._currentTransform,d=h.target,m=l-h.offsetX,v=s-h.offsetY,b=!d.get("lockMovementX")&&d.left!==m,w=!d.get("lockMovementY")&&d.top!==v;return b&&d.set("left",m),w&&d.set("top",v),b||w},_changeSkewTransformOrigin:function(l,s,h){var d="originX",m={0:"center"},v=s.target.skewX,b="left",w="right",C=s.corner==="mt"||s.corner==="ml"?1:-1,x=1;l=l>0?1:-1,h==="y"&&(v=s.target.skewY,b="top",w="bottom",d="originY"),m[-1]=b,m[1]=w,s.target.flipX&&(x*=-1),s.target.flipY&&(x*=-1),v===0?(s.skewSign=-C*l*x,s[d]=m[-l]):(v=v>0?1:-1,s.skewSign=v,s[d]=m[v*C*x])},_skewObject:function(l,s,h){var d=this._currentTransform,m=d.target,v=!1,b=m.get("lockSkewingX"),w=m.get("lockSkewingY");if(b&&h==="x"||w&&h==="y")return!1;var C=m.getCenterPoint(),x=m.toLocalPoint(new e.Point(l,s),"center","center")[h],T=m.toLocalPoint(new e.Point(d.lastX,d.lastY),"center","center")[h],A,R,P=m._getTransformedDimensions();return this._changeSkewTransformOrigin(x-T,d,h),A=m.toLocalPoint(new e.Point(l,s),d.originX,d.originY)[h],R=m.translateToOriginPoint(C,d.originX,d.originY),v=this._setObjectSkew(A,d,h,P),d.lastX=l,d.lastY=s,m.setPositionByOrigin(R,d.originX,d.originY),v},_setObjectSkew:function(l,s,h,d){var m=s.target,v,b=!1,w=s.skewSign,C,x,T,A,R,P,D,N;return h==="x"?(T="y",A="Y",R="X",D=0,N=m.skewY):(T="x",A="X",R="Y",D=m.skewX,N=0),x=m._getTransformedDimensions(D,N),P=2*Math.abs(l)-x[h],P<=2?v=0:(v=w*Math.atan(P/m["scale"+R]/(x[T]/m["scale"+A])),v=e.util.radiansToDegrees(v)),b=m["skew"+R]!==v,m.set("skew"+R,v),m["skew"+A]!==0&&(C=m._getTransformedDimensions(),v=d[T]/C[T]*m["scale"+A],m.set("scale"+A,v)),b},_scaleObject:function(l,s,h){var d=this._currentTransform,m=d.target,v=m.lockScalingX,b=m.lockScalingY,w=m.lockScalingFlip;if(v&&b)return!1;var C=m.translateToOriginPoint(m.getCenterPoint(),d.originX,d.originY),x=m.toLocalPoint(new e.Point(l,s),d.originX,d.originY),T=m._getTransformedDimensions(),A=!1;return this._setLocalMouse(x,d),A=this._setObjectScale(x,d,v,b,h,w,T),m.setPositionByOrigin(C,d.originX,d.originY),A},_setObjectScale:function(l,s,h,d,m,v,b){var w=s.target,C=!1,x=!1,T=!1,A=l.x*w.scaleX/b.x,R=l.y*w.scaleY/b.y,P=w.scaleX!==A,D=w.scaleY!==R;if(s.newScaleX=A,s.newScaleY=R,e.Textbox&&m==="x"&&w instanceof e.Textbox){var N=w.width*(l.x/b.x);return N>=w.getMinWidth()?(T=N!==w.width,w.set("width",N),T):!1}return v&&A<=0&&A<w.scaleX&&(C=!0,l.x=0),v&&R<=0&&R<w.scaleY&&(x=!0,l.y=0),m==="equally"&&!h&&!d?T=this._scaleObjectEqually(l,w,s,b):m?m==="x"&&!w.get("lockUniScaling")?C||h||w.set("scaleX",A)&&(T=P):m==="y"&&!w.get("lockUniScaling")&&(x||d||w.set("scaleY",R)&&(T=D)):(C||h||w.set("scaleX",A)&&(T=T||P),x||d||w.set("scaleY",R)&&(T=T||D)),C||x||this._flipObject(s,m),T},_scaleObjectEqually:function(l,s,h,d){var m=l.y+l.x,v=d.y*h.original.scaleY/s.scaleY+d.x*h.original.scaleX/s.scaleX,b,w=l.x<0?-1:1,C=l.y<0?-1:1,x,T;return x=w*Math.abs(h.original.scaleX*m/v),T=C*Math.abs(h.original.scaleY*m/v),b=x!==s.scaleX||T!==s.scaleY,s.set("scaleX",x),s.set("scaleY",T),b},_flipObject:function(l,s){l.newScaleX<0&&s!=="y"&&(l.originX==="left"?l.originX="right":l.originX==="right"&&(l.originX="left")),l.newScaleY<0&&s!=="x"&&(l.originY==="top"?l.originY="bottom":l.originY==="bottom"&&(l.originY="top"))},_setLocalMouse:function(l,s){var h=s.target,d=this.getZoom(),m=h.padding/d;s.originX==="right"?l.x*=-1:s.originX==="center"&&(l.x*=s.mouseXSign*2,l.x<0&&(s.mouseXSign=-s.mouseXSign)),s.originY==="bottom"?l.y*=-1:s.originY==="center"&&(l.y*=s.mouseYSign*2,l.y<0&&(s.mouseYSign=-s.mouseYSign)),n(l.x)>m?l.x<0?l.x+=m:l.x-=m:l.x=0,n(l.y)>m?l.y<0?l.y+=m:l.y-=m:l.y=0},_rotateObject:function(l,s){var h=this._currentTransform,d=h.target,m,m=d.translateToOriginPoint(d.getCenterPoint(),h.originX,h.originY);if(d.lockRotation)return!1;var v=r(h.ey-m.y,h.ex-m.x),b=r(s-m.y,l-m.x),w=c(b-v+h.theta),C=!0;if(d.snapAngle>0){var x=d.snapAngle,T=d.snapThreshold||x,A=Math.ceil(w/x)*x,R=Math.floor(w/x)*x;Math.abs(w-R)<T?w=R:Math.abs(w-A)<T&&(w=A)}return w<0&&(w=360+w),w%=360,d.angle===w?C=!1:(d.angle=w,d.setPositionByOrigin(m,h.originX,h.originY)),C},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var s=this._groupSelector,h=s.left,d=s.top,m=n(h),v=n(d);if(this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(s.ex-(h>0?0:-h),s.ey-(d>0?0:-d),m,v)),!(!this.selectionLineWidth||!this.selectionBorderColor))if(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var b=s.ex+a-(h>0?0:m),w=s.ey+a-(d>0?0:v);l.beginPath(),e.util.drawDashedLine(l,b,w,b+m,w,this.selectionDashArray),e.util.drawDashedLine(l,b,w+v-1,b+m,w+v-1,this.selectionDashArray),e.util.drawDashedLine(l,b,w,b,w+v,this.selectionDashArray),e.util.drawDashedLine(l,b+m-1,w,b+m-1,w+v,this.selectionDashArray),l.closePath(),l.stroke()}else e.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(s.ex+a-(h>0?0:m),s.ey+a-(d>0?0:v),m,v)},findTarget:function(l,s){if(!this.skipTargetFind){var h=!0,d=this.getPointer(l,h),m=this._activeObject,v=this.getActiveObjects(),b,w;if(this.targets=[],v.length>1&&!s&&m===this._searchPossibleTargets([m],d)||v.length===1&&m._findTargetCorner(d))return m;if(v.length===1&&m===this._searchPossibleTargets([m],d))if(this.preserveObjectStacking)b=m,w=this.targets,this.targets=[];else return m;var C=this._searchPossibleTargets(this._objects,d);return l[this.altSelectionKey]&&C&&b&&C!==b&&(C=b,this.targets=w),C}},_checkTarget:function(l,s,h){if(s&&s.visible&&s.evented&&this.containsPoint(null,s,l))if((this.perPixelTargetFind||s.perPixelTargetFind)&&!s.isEditing){var d=this.isTargetTransparent(s,h.x,h.y);if(!d)return!0}else return!0},_searchPossibleTargets:function(l,s){for(var h,d=l.length,m;d--;){var v=l[d],b=v.group&&v.group.type!=="activeSelection"?this._normalizePointer(v.group,s):s;if(this._checkTarget(b,v,s)){h=l[d],h.subTargetCheck&&h instanceof e.Group&&(m=this._searchPossibleTargets(h._objects,s),m&&this.targets.push(m));break}}return h},restorePointerVpt:function(l){return e.util.transformPoint(l,e.util.invertTransform(this.viewportTransform))},getPointer:function(l,s){if(this._absolutePointer&&!s)return this._absolutePointer;if(this._pointer&&s)return this._pointer;var h=f(l),d=this.upperCanvasEl,m=d.getBoundingClientRect(),v=m.width||0,b=m.height||0,w;(!v||!b)&&("top"in m&&"bottom"in m&&(b=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(v=Math.abs(m.right-m.left))),this.calcOffset(),h.x=h.x-this._offset.left,h.y=h.y-this._offset.top,s||(h=this.restorePointerVpt(h));var C=this.getRetinaScaling();return C!==1&&(h.x/=C,h.y/=C),v===0||b===0?w={width:1,height:1}:w={width:d.width/v,height:d.height/b},{x:h.x*w.width,y:h.y*w.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),s=this.lowerCanvasEl,h=this.upperCanvasEl;h?h.className="":(h=this._createCanvasElement(),this.upperCanvasEl=h),e.util.addClass(h,"upper-canvas "+l),this.wrapperEl.appendChild(h),this._copyCanvasStyle(s,h),this._applyCanvasStyle(h),this.contextTop=h.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var s=this.width||l.width,h=this.height||l.height;e.util.setStyle(l,{position:"absolute",width:s+"px",height:h+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=s,l.height=h,e.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,s){s.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,s){var h=!1,d=this.getActiveObjects(),m=[],v=[],b={e:s};l.forEach(function(w){d.indexOf(w)===-1&&(h=!0,w.fire("deselected",b),v.push(w))}),d.forEach(function(w){l.indexOf(w)===-1&&(h=!0,w.fire("selected",b),m.push(w))}),l.length>0&&d.length>0?(b.selected=m,b.deselected=v,b.updated=m[0]||v[0],b.target=this._activeObject,h&&this.fire("selection:updated",b)):d.length>0?(d.length===1&&(b.target=m[0],this.fire("object:selected",b)),b.selected=m,b.target=this._activeObject,this.fire("selection:created",b)):l.length>0&&(b.deselected=v,this.fire("selection:cleared",b))},setActiveObject:function(l,s){var h=this.getActiveObjects();return this._setActiveObject(l,s),this._fireSelectionEvents(h,s),this},_setActiveObject:function(l,s){return this._activeObject===l||!this._discardActiveObject(s,l)||l.onSelect({e:s})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,s){var h=this._activeObject;if(h){if(h.onDeselect({e:l,object:s}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var s=this.getActiveObjects(),h=this.getActiveObject();return s.length&&this.fire("before:selection:cleared",{target:h,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(s,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(s){e.util.cleanUpJsdomNode(this[s]),this[s]=void 0}.bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var s=this._activeObject;s&&s._renderControls(l)},_toObject:function(l,s,h){var d=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,s,h);return this._unwindGroupTransformOnObject(l,d),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var s=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],h={};return s.forEach(function(d){h[d]=l[d]}),this._activeObject.realizeTransform(l),h}else return null},_unwindGroupTransformOnObject:function(l,s){s&&l.set(s)},_setSVGObject:function(l,s,h){var d=this._realizeGroupTransformOnObject(s);this.callSuper("_setSVGObject",l,s,h),this._unwindGroupTransformOnObject(s,d)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var u in e.StaticCanvas)u!=="prototype"&&(e.Canvas[u]=e.StaticCanvas[u])}(),function(){var f={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},i=e.util.addListener,c=e.util.removeListener,r=3,n=2,o=1,a={passive:!1};function u(l,s){return l.button&&l.button===s-1}e.util.object.extend(e.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(i,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(l,s){var h=this.upperCanvasEl,d=this._getEventPrefix();l(e.window,"resize",this._onResize),l(h,d+"down",this._onMouseDown),l(h,d+"move",this._onMouseMove,a),l(h,d+"out",this._onMouseOut),l(h,d+"enter",this._onMouseEnter),l(h,"wheel",this._onMouseWheel),l(h,"contextmenu",this._onContextMenu),l(h,"dblclick",this._onDoubleClick),l(h,"dragover",this._onDragOver),l(h,"dragenter",this._onDragEnter),l(h,"dragleave",this._onDragLeave),l(h,"drop",this._onDrop),this.enablePointerEvents||l(h,"touchstart",this._onTouchStart,a),typeof eventjs!="undefined"&&s in eventjs&&(eventjs[s](h,"gesture",this._onGesture),eventjs[s](h,"drag",this._onDrag),eventjs[s](h,"orientation",this._onOrientationChange),eventjs[s](h,"shake",this._onShake),eventjs[s](h,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(c,"remove");var l=this._getEventPrefix();c(e.document,l+"up",this._onMouseUp),c(e.document,"touchend",this._onTouchEnd,a),c(e.document,l+"move",this._onMouseMove,a),c(e.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(l,s){this.__onTransformGesture&&this.__onTransformGesture(l,s)},_onDrag:function(l,s){this.__onDrag&&this.__onDrag(l,s)},_onMouseWheel:function(l){this.__onMouseWheel(l)},_onMouseOut:function(l){var s=this._hoveredTarget;this.fire("mouse:out",{target:s,e:l}),this._hoveredTarget=null,s&&s.fire("mouseout",{e:l});var h=this;this._hoveredTargets.forEach(function(d){h.fire("mouse:out",{target:s,e:l}),d&&s.fire("mouseout",{e:l})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(d){d.isEditing&&d.hiddenTextarea.focus()})},_onMouseEnter:function(l){!this.currentTransform&&!this.findTarget(l)&&(this.fire("mouse:over",{target:null,e:l}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(l,s){this.__onOrientationChange&&this.__onOrientationChange(l,s)},_onShake:function(l,s){this.__onShake&&this.__onShake(l,s)},_onLongPress:function(l,s){this.__onLongPress&&this.__onLongPress(l,s)},_onDragOver:function(l){l.preventDefault();var s=this._simpleEventHandler("dragover",l);this._fireEnterLeaveEvents(s,l)},_onContextMenu:function(l){return this.stopContextMenu&&(l.stopPropagation(),l.preventDefault()),!1},_onDoubleClick:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"dblclick"),this._resetTransformEventData(l)},getPointerId:function(l){var s=l.changedTouches;return s?s[0]&&s[0].identifier:this.enablePointerEvents?l.pointerId:-1},_isMainEvent:function(l){return l.isPrimary===!0?!0:l.isPrimary===!1?!1:l.type==="touchend"&&l.touches.length===0?!0:l.changedTouches?l.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(l){l.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(l)),this.__onMouseDown(l),this._resetTransformEventData();var s=this.upperCanvasEl,h=this._getEventPrefix();i(e.document,"touchend",this._onTouchEnd,a),i(e.document,"touchmove",this._onMouseMove,a),c(s,h+"down",this._onMouseDown)},_onMouseDown:function(l){this.__onMouseDown(l),this._resetTransformEventData();var s=this.upperCanvasEl,h=this._getEventPrefix();c(s,h+"move",this._onMouseMove,a),i(e.document,h+"up",this._onMouseUp),i(e.document,h+"move",this._onMouseMove,a)},_onTouchEnd:function(l){if(!(l.touches.length>0)){this.__onMouseUp(l),this._resetTransformEventData(),this.mainTouchId=null;var s=this._getEventPrefix();c(e.document,"touchend",this._onTouchEnd,a),c(e.document,"touchmove",this._onMouseMove,a);var h=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){i(h.upperCanvasEl,s+"down",h._onMouseDown),h._willAddMouseDown=0},400)}},_onMouseUp:function(l){this.__onMouseUp(l),this._resetTransformEventData();var s=this.upperCanvasEl,h=this._getEventPrefix();this._isMainEvent(l)&&(c(e.document,h+"up",this._onMouseUp),c(e.document,h+"move",this._onMouseMove,a),i(s,h+"move",this._onMouseMove,a))},_onMouseMove:function(l){!this.allowTouchScrolling&&l.preventDefault&&l.preventDefault(),this.__onMouseMove(l)},_onResize:function(){this.calcOffset()},_shouldRender:function(l){var s=this._activeObject;return!!s!=!!l||s&&l&&s!==l?!0:(s&&s.isEditing,!1)},__onMouseUp:function(l){var s,h=this._currentTransform,d=this._groupSelector,m=!1,v=!d||d.left===0&&d.top===0;if(this._cacheTransformEventData(l),s=this._target,this._handleEvent(l,"up:before"),u(l,r)){this.fireRightClick&&this._handleEvent(l,"up",r,v);return}if(u(l,n)){this.fireMiddleClick&&this._handleEvent(l,"up",n,v),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(l);return}!this._isMainEvent(l)||(h&&(this._finalizeCurrentTransform(l),m=h.actionPerformed),v||(this._maybeGroupObjects(l),m||(m=this._shouldRender(s))),s&&(s.isMoving=!1),this._setCursorFromEvent(l,s),this._handleEvent(l,"up",o,v),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=0),m?this.requestRenderAll():v||this.renderTop())},_simpleEventHandler:function(l,s){var h=this.findTarget(s),d=this.targets,m={e:s,target:h,subTargets:d};if(this.fire(l,m),h&&h.fire(l,m),!d)return h;for(var v=0;v<d.length;v++)d[v].fire(l,m);return h},_handleEvent:function(l,s,h,d){var m=this._target,v=this.targets||[],b={e:l,target:m,subTargets:v,button:h||o,isClick:d||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+s,b),m&&m.fire("mouse"+s,b);for(var w=0;w<v.length;w++)v[w].fire("mouse"+s,b)},_finalizeCurrentTransform:function(l){var s=this._currentTransform,h=s.target,d,m={e:l,target:h,transform:s};h._scaling&&(h._scaling=!1),h.setCoords(),(s.actionPerformed||this.stateful&&h.hasStateChanged())&&(s.actionPerformed&&(d=this._addEventOptions(m,s),this._fire(d,m)),this._fire("modified",m))},_addEventOptions:function(l,s){var h,d;switch(s.action){case"scaleX":h="scaled",d="x";break;case"scaleY":h="scaled",d="y";break;case"skewX":h="skewed",d="x";break;case"skewY":h="skewed",d="y";break;case"scale":h="scaled",d="equally";break;case"rotate":h="rotated";break;case"drag":h="moved";break}return l.by=d,h},_onMouseDownInDrawingMode:function(l){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(l).requestRenderAll(),this.clipTo&&e.util.clipContext(this,this.contextTop);var s=this.getPointer(l);this.freeDrawingBrush.onMouseDown(s,{e:l,pointer:s}),this._handleEvent(l,"down")},_onMouseMoveInDrawingMode:function(l){if(this._isCurrentlyDrawing){var s=this.getPointer(l);this.freeDrawingBrush.onMouseMove(s,{e:l,pointer:s})}this.setCursor(this.freeDrawingCursor),this._handleEvent(l,"move")},_onMouseUpInDrawingMode:function(l){this.clipTo&&this.contextTop.restore();var s=this.getPointer(l);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:l,pointer:s}),this._handleEvent(l,"up")},__onMouseDown:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"down:before");var s=this._target;if(u(l,r)){this.fireRightClick&&this._handleEvent(l,"down",r);return}if(u(l,n)){this.fireMiddleClick&&this._handleEvent(l,"down",n);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(l);return}if(!!this._isMainEvent(l)&&!this._currentTransform){var h=this._pointer;this._previousPointer=h;var d=this._shouldRender(s),m=this._shouldGroup(l,s);if(this._shouldClearSelection(l,s)?this.discardActiveObject(l):m&&(this._handleGrouping(l,s),s=this._activeObject),this.selection&&(!s||!s.selectable&&!s.isEditing&&s!==this._activeObject)&&(this._groupSelector={ex:h.x,ey:h.y,top:0,left:0}),s){var v=s===this._activeObject;s.selectable&&this.setActiveObject(s,l),s===this._activeObject&&(s.__corner||!m)&&this._setupCurrentTransform(l,s,v)}this._handleEvent(l,"down"),(d||m)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(l){this._resetTransformEventData(),this._pointer=this.getPointer(l,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(l)||null},_beforeTransform:function(l){var s=this._currentTransform;this.stateful&&s.target.saveState(),this.fire("before:transform",{e:l,transform:s}),s.corner&&this.onBeforeScaleRotate(s.target)},__onMouseMove:function(l){this._handleEvent(l,"move:before"),this._cacheTransformEventData(l);var s,h;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(l);return}if(!!this._isMainEvent(l)){var d=this._groupSelector;d?(h=this._pointer,d.left=h.x-d.ex,d.top=h.y-d.ey,this.renderTop()):this._currentTransform?this._transformObject(l):(s=this.findTarget(l)||null,this._setCursorFromEvent(l,s),this._fireOverOutEvents(s,l)),this._handleEvent(l,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(l,s){var h=this._hoveredTarget,d=this._hoveredTargets,m=this.targets,v=Math.max(d.length,m.length);this.fireSyntheticInOutEvents(l,s,{oldTarget:h,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<v;b++)this.fireSyntheticInOutEvents(m[b],s,{oldTarget:d[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(l,s){var h=this._draggedoverTarget,d=this._hoveredTargets,m=this.targets,v=Math.max(d.length,m.length);this.fireSyntheticInOutEvents(l,s,{oldTarget:h,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<v;b++)this.fireSyntheticInOutEvents(m[b],s,{oldTarget:d[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=l},fireSyntheticInOutEvents:function(l,s,h){var d,m,v=h.oldTarget,b,w,C=v!==l,x=h.canvasEvtIn,T=h.canvasEvtOut;C&&(d={e:s,target:l,previousTarget:v},m={e:s,target:v,nextTarget:l}),w=l&&C,b=v&&C,b&&(T&&this.fire(T,m),v.fire(h.evtOut,m)),w&&(x&&this.fire(x,d),l.fire(h.evtIn,d))},__onMouseWheel:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"wheel"),this._resetTransformEventData()},_transformObject:function(l){var s=this.getPointer(l),h=this._currentTransform;h.reset=!1,h.target.isMoving=!0,h.shiftKey=l.shiftKey,h.altKey=l[this.centeredKey],this._beforeScaleTransform(l,h),this._performTransformAction(l,h,s),h.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(l,s,h){var d=h.x,m=h.y,v=s.action,b=!1,w={target:s.target,e:l,transform:s,pointer:h};v==="rotate"?(b=this._rotateObject(d,m))&&this._fire("rotating",w):v==="scale"?(b=this._onScale(l,s,d,m))&&this._fire("scaling",w):v==="scaleX"?(b=this._scaleObject(d,m,"x"))&&this._fire("scaling",w):v==="scaleY"?(b=this._scaleObject(d,m,"y"))&&this._fire("scaling",w):v==="skewX"?(b=this._skewObject(d,m,"x"))&&this._fire("skewing",w):v==="skewY"?(b=this._skewObject(d,m,"y"))&&this._fire("skewing",w):(b=this._translateObject(d,m),b&&(this._fire("moving",w),this.setCursor(w.target.moveCursor||this.moveCursor))),s.actionPerformed=s.actionPerformed||b},_fire:function(l,s){this.fire("object:"+l,s),s.target.fire(l,s)},_beforeScaleTransform:function(l,s){if(s.action==="scale"||s.action==="scaleX"||s.action==="scaleY"){var h=this._shouldCenterTransform(s.target);(h&&(s.originX!=="center"||s.originY!=="center")||!h&&s.originX==="center"&&s.originY==="center")&&(this._resetCurrentTransform(),s.reset=!0)}},_onScale:function(l,s,h,d){return this._isUniscalePossible(l,s.target)?(s.currentAction="scale",this._scaleObject(h,d)):(!s.reset&&s.currentAction==="scale"&&this._resetCurrentTransform(),s.currentAction="scaleEqually",this._scaleObject(h,d,"equally"))},_isUniscalePossible:function(l,s){return(l[this.uniScaleKey]||this.uniScaleTransform)&&!s.get("lockUniScaling")},_setCursorFromEvent:function(l,s){if(!s)return this.setCursor(this.defaultCursor),!1;var h=s.hoverCursor||this.hoverCursor,d=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,m=(!d||!d.contains(s))&&s._findTargetCorner(this.getPointer(l,!0));m?this.setCursor(this.getCornerCursor(m,s,l)):(s.subTargetCheck&&this.targets.concat().reverse().map(function(v){h=v.hoverCursor||h}),this.setCursor(h))},getCornerCursor:function(l,s,h){return this.actionIsDisabled(l,s,h)?this.notAllowedCursor:l in f?this._getRotatedCornerCursor(l,s,h):l==="mtr"&&s.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(l,s,h){return l==="mt"||l==="mb"?h[this.altActionKey]?s.lockSkewingX:s.lockScalingY:l==="ml"||l==="mr"?h[this.altActionKey]?s.lockSkewingY:s.lockScalingX:l==="mtr"?s.lockRotation:this._isUniscalePossible(h,s)?s.lockScalingX&&s.lockScalingY:s.lockScalingX||s.lockScalingY},_getRotatedCornerCursor:function(l,s,h){var d=Math.round(s.angle%360/45);return d<0&&(d+=8),d+=f[l],h[this.altActionKey]&&f[l]%2==0&&(d+=2),d%=8,this.cursorMap[d]}})}(),function(){var f=Math.min,i=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,r){var n=this._activeObject;return n&&this._isSelectionKeyPressed(c)&&r&&r.selectable&&this.selection&&(n!==r||n.type==="activeSelection")&&!r.onSelect({e:c})},_handleGrouping:function(c,r){var n=this._activeObject;n.__corner||r===n&&(r=this.findTarget(c,!0),!r||!r.selectable)||(n&&n.type==="activeSelection"?this._updateActiveSelection(r,c):this._createActiveSelection(r,c))},_updateActiveSelection:function(c,r){var n=this._activeObject,o=n._objects.slice(0);n.contains(c)?(n.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),n.size()===1&&this._setActiveObject(n.item(0),r)):(n.addWithUpdate(c),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,r)},_createActiveSelection:function(c,r){var n=this.getActiveObjects(),o=this._createGroup(c);this._hoveredTarget=o,this._setActiveObject(o,r),this._fireSelectionEvents(n,r)},_createGroup:function(c){var r=this._objects,n=r.indexOf(this._activeObject)<r.indexOf(c),o=n?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(c){var r=this._collectObjects(c),n;r.length===1?this.setActiveObject(r[0],c):r.length>1&&(n=new e.ActiveSelection(r.reverse(),{canvas:this}),this.setActiveObject(n,c))},_collectObjects:function(c){for(var r=[],n,o=this._groupSelector.ex,a=this._groupSelector.ey,u=o+this._groupSelector.left,l=a+this._groupSelector.top,s=new e.Point(f(o,u),f(a,l)),h=new e.Point(i(o,u),i(a,l)),d=!this.selectionFullyContained,m=o===u&&a===l,v=this._objects.length;v--&&(n=this._objects[v],!(!(!n||!n.selectable||!n.visible)&&(d&&n.intersectsWithRect(s,h)||n.isContainedWithinRect(s,h)||d&&n.containsPoint(s)||d&&n.containsPoint(h))&&(r.push(n),m))););return r.length>1&&(r=r.filter(function(b){return!b.onSelect({e:c})})),r},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var i=f.format||"png",c=f.quality||1,r=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(r,f);return e.util.toDataURL(n,i,c)},toCanvasElement:function(f,i){f=f||1,i=i||{};var c=(i.width||this.width)*f,r=(i.height||this.height)*f,n=this.getZoom(),o=this.width,a=this.height,u=n*f,l=this.viewportTransform,s=(l[4]-(i.left||0))*f,h=(l[5]-(i.top||0))*f,d=this.interactive,m=[u,0,0,u,s,h],v=this.enableRetinaScaling,b=e.util.createCanvasElement(),w=this.contextTop;return b.width=c,b.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=m,this.width=c,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),this._objects),this.viewportTransform=l,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=d,this.enableRetinaScaling=v,this.contextTop=w,b}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromDatalessJSON:function(f,i,c){return this.loadFromJSON(f,i,c)},loadFromJSON:function(f,i,c){if(!!f){var r=typeof f=="string"?JSON.parse(f):e.util.object.clone(f),n=this,o=r.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,function(u){n.clear(),n._setBgOverlay(r,function(){o?n._enlivenObjects([o],function(l){n.clipPath=l[0],n.__setupCanvas.call(n,r,u,a,i)}):n.__setupCanvas.call(n,r,u,a,i)})},c),this}},__setupCanvas:function(f,i,c,r){var n=this;i.forEach(function(o,a){n.insertAt(o,a)}),this.renderOnAddRemove=c,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),r&&r()},_setBgOverlay:function(f,i){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){i&&i();return}var r=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",f.backgroundImage,c,r),this.__setBgOverlay("overlayImage",f.overlayImage,c,r),this.__setBgOverlay("backgroundColor",f.background,c,r),this.__setBgOverlay("overlayColor",f.overlay,c,r)},__setBgOverlay:function(f,i,c,r){var n=this;if(!i){c[f]=!0,r&&r();return}f==="backgroundImage"||f==="overlayImage"?e.util.enlivenObjects([i],function(o){n[f]=o[0],c[f]=!0,r&&r()}):this["set"+e.util.string.capitalize(f,!0)](i,function(){c[f]=!0,r&&r()})},_enlivenObjects:function(f,i,c){if(!f||f.length===0){i&&i([]);return}e.util.enlivenObjects(f,function(r){i&&i(r)},null,c)},_toDataURL:function(f,i){this.clone(function(c){i(c.toDataURL(f))})},_toDataURLWithMultiplier:function(f,i,c){this.clone(function(r){c(r.toDataURLWithMultiplier(f,i))})},clone:function(f,i){var c=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(r){r.loadFromJSON(c,function(){f&&f(r)})})},cloneWithoutData:function(f){var i=e.util.createCanvasElement();i.width=this.width,i.height=this.height;var c=new e.Canvas(i);c.clipTo=this.clipTo,this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),f&&f(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):f&&f(c)}}),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.object.clone,n=i.util.toFixed,o=i.util.string.capitalize,a=i.util.degreesToRadians,u=i.StaticCanvas.supports("setLineDash"),l=!i.isLikelyNode,s=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(h){h&&this.setOptions(h)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(h){var d=i.perfLimitSizeTotal,m=h.width,v=h.height,b=i.maxCacheSideLimit,w=i.minCacheSideLimit;if(m<=b&&v<=b&&m*v<=d)return m<w&&(h.width=w),v<w&&(h.height=w),h;var C=m/v,x=i.util.limitDimsByArea(C,d),T=i.util.capValue,A=T(w,x.x,b),R=T(w,x.y,b);return m>A&&(h.zoomX/=m/A,h.width=A,h.capped=!0),v>R&&(h.zoomY/=v/R,h.height=R,h.capped=!0),h},_getCacheCanvasDimensions:function(){var h=this.getTotalObjectScaling(),d=this._getTransformedDimensions(0,0),m=d.x*h.scaleX/this.scaleX,v=d.y*h.scaleY/this.scaleY;return{width:m+s,height:v+s,zoomX:h.scaleX,zoomY:h.scaleY,x:m,y:v}},_updateCacheCanvas:function(){var h=this.canvas;if(this.noScaleCache&&h&&h._currentTransform){var d=h._currentTransform.target,m=h._currentTransform.action;if(this===d&&m.slice&&m.slice(0,5)==="scale")return!1}var v=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),w=i.minCacheSideLimit,C=b.width,x=b.height,T,A,R=b.zoomX,P=b.zoomY,D=C!==this.cacheWidth||x!==this.cacheHeight,N=this.zoomX!==R||this.zoomY!==P,K=D||N,W=0,Q=0,nt=!1;if(D){var k=this._cacheCanvas.width,z=this._cacheCanvas.height,Y=C>k||x>z,G=(C<k*.9||x<z*.9)&&k>w&&z>w;nt=Y||G,Y&&!b.capped&&(C>w||x>w)&&(W=C*.1,Q=x*.1)}return K?(nt?(v.width=Math.ceil(C+W),v.height=Math.ceil(x+Q)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,v.width,v.height)),T=b.x/2,A=b.y/2,this.cacheTranslationX=Math.round(v.width/2-T)+T,this.cacheTranslationY=Math.round(v.height/2-A)+A,this.cacheWidth=C,this.cacheHeight=x,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(R,P),this.zoomX=R,this.zoomY=P,!0):!1},setOptions:function(h){this._setOptions(h),this._initGradient(h.fill,"fill"),this._initGradient(h.stroke,"stroke"),this._initClipping(h),this._initPattern(h.fill,"fill"),this._initPattern(h.stroke,"stroke")},transform:function(h){var d;this.group&&!this.group._transformDone?d=this.calcTransformMatrix():d=this.calcOwnMatrix(),h.transform(d[0],d[1],d[2],d[3],d[4],d[5])},toObject:function(h){var d=i.Object.NUM_FRACTION_DIGITS,m={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:n(this.left,d),top:n(this.top,d),width:n(this.width,d),height:n(this.height,d),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,d),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,d),scaleX:n(this.scaleX,d),scaleY:n(this.scaleY,d),angle:n(this.angle,d),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,d),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:n(this.skewX,d),skewY:n(this.skewY,d)};return this.clipPath&&(m.clipPath=this.clipPath.toObject(h),m.clipPath.inverted=this.clipPath.inverted,m.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,m,h),this.includeDefaultValues||(m=this._removeDefaultValues(m)),m},toDatalessObject:function(h){return this.toObject(h)},_removeDefaultValues:function(h){var d=i.util.getKlass(h.type).prototype,m=d.stateProperties;return m.forEach(function(v){if(!(v==="left"||v==="top")){h[v]===d[v]&&delete h[v];var b=Object.prototype.toString.call(h[v])==="[object Array]"&&Object.prototype.toString.call(d[v])==="[object Array]";b&&h[v].length===0&&d[v].length===0&&delete h[v]}}),h},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var h=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(h.scaleX),scaleY:Math.abs(h.scaleY)}},getTotalObjectScaling:function(){var h=this.getObjectScaling(),d=h.scaleX,m=h.scaleY;if(this.canvas){var v=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();d*=v*b,m*=v*b}return{scaleX:d,scaleY:m}},getObjectOpacity:function(){var h=this.opacity;return this.group&&(h*=this.group.getObjectOpacity()),h},_set:function(h,d){var m=h==="scaleX"||h==="scaleY",v=this[h]!==d,b=!1;return m&&(d=this._constrainScale(d)),h==="scaleX"&&d<0?(this.flipX=!this.flipX,d*=-1):h==="scaleY"&&d<0?(this.flipY=!this.flipY,d*=-1):h==="shadow"&&d&&!(d instanceof i.Shadow)?d=new i.Shadow(d):h==="dirty"&&this.group&&this.group.set("dirty",d),this[h]=d,v&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(h)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(h)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||this.width===0&&this.height===0&&this.strokeWidth===0||!this.visible},render:function(h){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(h.save(),this._setupCompositeOperation(h),this.drawSelectionBackground(h),this.transform(h),this._setOpacity(h),this._setShadow(h,this),this.transformMatrix&&h.transform.apply(h,this.transformMatrix),this.clipTo&&i.util.clipContext(this,h),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(h)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(h),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&h.restore(),h.restore())},renderCache:function(h){h=h||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,h.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(h){var d=this.clipPath;if(h.save(),d.inverted?h.globalCompositeOperation="destination-out":h.globalCompositeOperation="destination-in",d.absolutePositioned){var m=i.util.invertTransform(this.calcTransformMatrix());h.transform(m[0],m[1],m[2],m[3],m[4],m[5])}d.transform(h),h.scale(1/d.zoomX,1/d.zoomY),h.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),h.restore()},drawObject:function(h,d){var m=this.fill,v=this.stroke;d?(this.fill="black",this.stroke="",this._setClippingProperties(h)):(this._renderBackground(h),this._setStrokeStyles(h,this),this._setFillStyles(h,this)),this._render(h),this._drawClipPath(h),this.fill=m,this.stroke=v},_drawClipPath:function(h){var d=this.clipPath;!d||(d.canvas=this.canvas,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCache(h))},drawCacheOnCanvas:function(h){h.scale(1/this.zoomX,1/this.zoomY),h.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(h){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!h&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!h){var d=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-m/2,d,m)}return!0}return!1},_renderBackground:function(h){if(!!this.backgroundColor){var d=this._getNonTransformedDimensions();h.fillStyle=this.backgroundColor,h.fillRect(-d.x/2,-d.y/2,d.x,d.y),this._removeShadow(h)}},_setOpacity:function(h){this.group&&!this.group._transformDone?h.globalAlpha=this.getObjectOpacity():h.globalAlpha*=this.opacity},_setStrokeStyles:function(h,d){d.stroke&&(h.lineWidth=d.strokeWidth,h.lineCap=d.strokeLineCap,h.lineDashOffset=d.strokeDashOffset,h.lineJoin=d.strokeLineJoin,h.miterLimit=d.strokeMiterLimit,h.strokeStyle=d.stroke.toLive?d.stroke.toLive(h,this):d.stroke)},_setFillStyles:function(h,d){d.fill&&(h.fillStyle=d.fill.toLive?d.fill.toLive(h,this):d.fill)},_setClippingProperties:function(h){h.globalAlpha=1,h.strokeStyle="transparent",h.fillStyle="#000000"},_setLineDash:function(h,d,m){!d||d.length===0||(1&d.length&&d.push.apply(d,d),u?h.setLineDash(d):m&&m(h))},_renderControls:function(h,d){var m=this.getViewportTransform(),v=this.calcTransformMatrix(),b,w,C;d=d||{},w=typeof d.hasBorders!="undefined"?d.hasBorders:this.hasBorders,C=typeof d.hasControls!="undefined"?d.hasControls:this.hasControls,v=i.util.multiplyTransformMatrices(m,v),b=i.util.qrDecompose(v),h.save(),h.translate(b.translateX,b.translateY),h.lineWidth=1*this.borderScaleFactor,this.group||(h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),d.forActiveSelection?(h.rotate(a(b.angle)),w&&this.drawBordersInGroup(h,b,d)):(h.rotate(a(this.angle)),w&&this.drawBorders(h,d)),C&&this.drawControls(h,d),h.restore()},_setShadow:function(h){if(!!this.shadow){var d=this.shadow,m=this.canvas,v,b=m&&m.viewportTransform[0]||1,w=m&&m.viewportTransform[3]||1;d.nonScaling?v={scaleX:1,scaleY:1}:v=this.getObjectScaling(),m&&m._isRetinaScaling()&&(b*=i.devicePixelRatio,w*=i.devicePixelRatio),h.shadowColor=d.color,h.shadowBlur=d.blur*i.browserShadowBlurConstant*(b+w)*(v.scaleX+v.scaleY)/4,h.shadowOffsetX=d.offsetX*b*v.scaleX,h.shadowOffsetY=d.offsetY*w*v.scaleY}},_removeShadow:function(h){!this.shadow||(h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0)},_applyPatternGradientTransform:function(h,d){if(!d||!d.toLive)return{offsetX:0,offsetY:0};var m=d.gradientTransform||d.patternTransform,v=-this.width/2+d.offsetX||0,b=-this.height/2+d.offsetY||0;return d.gradientUnits==="percentage"?h.transform(this.width,0,0,this.height,v,b):h.transform(1,0,0,1,v,b),m&&h.transform(m[0],m[1],m[2],m[3],m[4],m[5]),{offsetX:v,offsetY:b}},_renderPaintInOrder:function(h){this.paintFirst==="stroke"?(this._renderStroke(h),this._renderFill(h)):(this._renderFill(h),this._renderStroke(h))},_render:function(){},_renderFill:function(h){!this.fill||(h.save(),this._applyPatternGradientTransform(h,this.fill),this.fillRule==="evenodd"?h.fill("evenodd"):h.fill(),h.restore())},_renderStroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(h),h.save(),this.strokeUniform&&this.group){var d=this.getObjectScaling();h.scale(1/d.scaleX,1/d.scaleY)}else this.strokeUniform&&h.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(h,this.strokeDashArray,this._renderDashedStroke),this.stroke.toLive&&this.stroke.gradientUnits==="percentage"?this._applyPatternForTransformedGradient(h,this.stroke):this._applyPatternGradientTransform(h,this.stroke),h.stroke(),h.restore()}},_applyPatternForTransformedGradient:function(h,d){var m=this._limitCacheSize(this._getCacheCanvasDimensions()),v=i.util.createCanvasElement(),b,w=this.canvas.getRetinaScaling(),C=m.x/this.scaleX/w,x=m.y/this.scaleY/w;v.width=C,v.height=x,b=v.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(C,0),b.lineTo(C,x),b.lineTo(0,x),b.closePath(),b.translate(C/2,x/2),b.scale(m.zoomX/this.scaleX/w,m.zoomY/this.scaleY/w),this._applyPatternGradientTransform(b,d),b.fillStyle=d.toLive(h),b.fill(),h.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),h.scale(w*this.scaleX/m.zoomX,w*this.scaleY/m.zoomY),h.strokeStyle=b.createPattern(v,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var h=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",h.scaleX),this.set("scaleY",h.scaleY),this.angle=h.angle,this.skewX=h.skewX,this.skewY=0}},_removeTransformMatrix:function(h){var d=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),d=i.util.transformPoint(d,this.transformMatrix)),this.transformMatrix=null,h&&(this.scaleX*=h.scaleX,this.scaleY*=h.scaleY,this.cropX=h.cropX,this.cropY=h.cropY,d.x+=h.offsetLeft,d.y+=h.offsetTop,this.width=h.width,this.height=h.height),this.setPositionByOrigin(d,"center","center")},clone:function(h,d){var m=this.toObject(d);this.constructor.fromObject?this.constructor.fromObject(m,h):i.Object._fromObject("Object",m,h)},cloneAsImage:function(h,d){var m=this.toCanvasElement(d);return h&&h(new i.Image(m)),this},toCanvasElement:function(h){h||(h={});var d=i.util,m=d.saveObjectTransform(this),v=this.group,b=this.shadow,w=Math.abs,C=(h.multiplier||1)*(h.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,h.withoutTransform&&d.resetObjectTransform(this),h.withoutShadow&&(this.shadow=null);var x=i.util.createCanvasElement(),T=this.getBoundingRect(!0,!0),A=this.shadow,R,P={x:0,y:0},D,N,K;A&&(D=A.blur,A.nonScaling?R={scaleX:1,scaleY:1}:R=this.getObjectScaling(),P.x=2*Math.round(w(A.offsetX)+D)*w(R.scaleX),P.y=2*Math.round(w(A.offsetY)+D)*w(R.scaleY)),N=T.width+P.x,K=T.height+P.y,x.width=Math.ceil(N),x.height=Math.ceil(K);var W=new i.StaticCanvas(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});h.format==="jpeg"&&(W.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(W.width/2,W.height/2),"center","center");var Q=this.canvas;W.add(this);var nt=W.toCanvasElement(C||1,h);return this.shadow=b,this.set("canvas",Q),v&&(this.group=v),this.set(m).setCoords(),W._objects=[],W.dispose(),W=null,nt},toDataURL:function(h){return h||(h={}),i.util.toDataURL(this.toCanvasElement(h),h.format||"png",h.quality||1)},isType:function(h){return this.type===h},complexity:function(){return 1},toJSON:function(h){return this.toObject(h)},setGradient:function(h,d){d||(d={});var m={colorStops:[]};return m.type=d.type||(d.r1||d.r2?"radial":"linear"),m.coords={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2},m.gradientUnits=d.gradientUnits||"pixels",(d.r1||d.r2)&&(m.coords.r1=d.r1,m.coords.r2=d.r2),m.gradientTransform=d.gradientTransform,i.Gradient.prototype.addColorStop.call(m,d.colorStops),this.set(h,i.Gradient.forObject(this,m))},setPatternFill:function(h,d){return this.set("fill",new i.Pattern(h,d))},setShadow:function(h){return this.set("shadow",h?new i.Shadow(h):null)},setColor:function(h){return this.set("fill",h),this},rotate:function(h){var d=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return d&&this._setOriginToCenter(),this.set("angle",h),d&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(h,d){d=d||this.canvas.getPointer(h);var m=new i.Point(d.x,d.y),v=this._getLeftTopCoords();return this.angle&&(m=i.util.rotatePoint(m,v,a(-this.angle))),{x:m.x-v.x,y:m.y-v.y}},_setupCompositeOperation:function(h){this.globalCompositeOperation&&(h.globalCompositeOperation=this.globalCompositeOperation)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),c(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object._fromObject=function(h,d,m,v){var b=i[h];d=r(d,!0),i.util.enlivenPatterns([d.fill,d.stroke],function(w){typeof w[0]!="undefined"&&(d.fill=w[0]),typeof w[1]!="undefined"&&(d.stroke=w[1]),i.util.enlivenObjects([d.clipPath],function(C){d.clipPath=C[0];var x=v?new b(d[v],d):new b(d);m&&m(x)})})},i.Object.__uid=0)}(t),function(){var f=e.util.degreesToRadians,i={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(r,n,o,a,u){var l=r.x,s=r.y,h,d,m;return typeof n=="string"?n=i[n]:n-=.5,typeof a=="string"?a=i[a]:a-=.5,h=a-n,typeof o=="string"?o=c[o]:o-=.5,typeof u=="string"?u=c[u]:u-=.5,d=u-o,(h||d)&&(m=this._getTransformedDimensions(),l=r.x+h*m.x,s=r.y+d*m.y),new e.Point(l,s)},translateToCenterPoint:function(r,n,o){var a=this.translateToGivenOrigin(r,n,o,"center","center");return this.angle?e.util.rotatePoint(a,r,f(this.angle)):a},translateToOriginPoint:function(r,n,o){var a=this.translateToGivenOrigin(r,"center","center",n,o);return this.angle?e.util.rotatePoint(a,r,f(this.angle)):a},getCenterPoint:function(){var r=new e.Point(this.left,this.top);return this.translateToCenterPoint(r,this.originX,this.originY)},getPointByOrigin:function(r,n){var o=this.getCenterPoint();return this.translateToOriginPoint(o,r,n)},toLocalPoint:function(r,n,o){var a=this.getCenterPoint(),u,l;return typeof n!="undefined"&&typeof o!="undefined"?u=this.translateToGivenOrigin(a,"center","center",n,o):u=new e.Point(this.left,this.top),l=new e.Point(r.x,r.y),this.angle&&(l=e.util.rotatePoint(l,a,-f(this.angle))),l.subtractEquals(u)},setPositionByOrigin:function(r,n,o){var a=this.translateToCenterPoint(r,n,o),u=this.translateToOriginPoint(a,this.originX,this.originY);this.set("left",u.x),this.set("top",u.y)},adjustPosition:function(r){var n=f(this.angle),o=this.getScaledWidth(),a=e.util.cos(n)*o,u=e.util.sin(n)*o,l,s;typeof this.originX=="string"?l=i[this.originX]:l=this.originX-.5,typeof r=="string"?s=i[r]:s=r-.5,this.left+=a*(s-l),this.top+=u*(s-l),this.setCoords(),this.originX=r},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var r=this.getCenterPoint();this.originX="center",this.originY="center",this.left=r.x,this.top=r.y},_resetOrigin:function(){var r=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=r.x,this.top=r.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(n){return[new e.Point(n.tl.x,n.tl.y),new e.Point(n.tr.x,n.tr.y),new e.Point(n.br.x,n.br.y),new e.Point(n.bl.x,n.bl.y)]}var i=e.util.degreesToRadians,c=e.util.multiplyTransformMatrices,r=e.util.transformPoint;e.util.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(n,o){this.oCoords||this.setCoords();var a=n?this.aCoords:this.oCoords;return f(o?this.calcCoords(n):a)},intersectsWithRect:function(n,o,a,u){var l=this.getCoords(a,u),s=e.Intersection.intersectPolygonRectangle(l,n,o);return s.status==="Intersection"},intersectsWithObject:function(n,o,a){var u=e.Intersection.intersectPolygonPolygon(this.getCoords(o,a),n.getCoords(o,a));return u.status==="Intersection"||n.isContainedWithinObject(this,o,a)||this.isContainedWithinObject(n,o,a)},isContainedWithinObject:function(n,o,a){for(var u=this.getCoords(o,a),l=0,s=n._getImageLines(a?n.calcCoords(o):o?n.aCoords:n.oCoords);l<4;l++)if(!n.containsPoint(u[l],s))return!1;return!0},isContainedWithinRect:function(n,o,a,u){var l=this.getBoundingRect(a,u);return l.left>=n.x&&l.left+l.width<=o.x&&l.top>=n.y&&l.top+l.height<=o.y},containsPoint:function(n,o,a,u){var o=o||this._getImageLines(u?this.calcCoords(a):a?this.aCoords:this.oCoords),l=this._findCrossPoints(n,o);return l!==0&&l%2==1},isOnScreen:function(n){if(!this.canvas)return!1;for(var o=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br,u=this.getCoords(!0,n),l,s=0;s<4;s++)if(l=u[s],l.x<=a.x&&l.x>=o.x&&l.y<=a.y&&l.y>=o.y)return!0;return this.intersectsWithRect(o,a,!0,n)?!0:this._containsCenterOfCanvas(o,a,n)},_containsCenterOfCanvas:function(n,o,a){var u={x:(n.x+o.x)/2,y:(n.y+o.y)/2};return!!this.containsPoint(u,null,!0,a)},isPartiallyOnScreen:function(n){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;return this.intersectsWithRect(o,a,!0,n)?!0:this._containsCenterOfCanvas(o,a,n)},_getImageLines:function(n){return{topline:{o:n.tl,d:n.tr},rightline:{o:n.tr,d:n.br},bottomline:{o:n.br,d:n.bl},leftline:{o:n.bl,d:n.tl}}},_findCrossPoints:function(n,o){var a,u,l,s,h,d=0,m;for(var v in o)if(m=o[v],!(m.o.y<n.y&&m.d.y<n.y)&&!(m.o.y>=n.y&&m.d.y>=n.y)&&(m.o.x===m.d.x&&m.o.x>=n.x?h=m.o.x:(a=0,u=(m.d.y-m.o.y)/(m.d.x-m.o.x),l=n.y-a*n.x,s=m.o.y-u*m.o.x,h=-(l-s)/(a-u)),h>=n.x&&(d+=1),d===2))break;return d},getBoundingRect:function(n,o){var a=this.getCoords(n,o);return e.util.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(n){return Math.abs(n)<this.minScaleLimit?n<0?-this.minScaleLimit:this.minScaleLimit:n===0?1e-4:n},scale:function(n){return this._set("scaleX",n),this._set("scaleY",n),this.setCoords()},scaleToWidth:function(n,o){var a=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(n/this.width/a)},scaleToHeight:function(n,o){var a=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(n/this.height/a)},calcCoords:function(n){var o=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),u=c(a,o),l=this.getViewportTransform(),s=n?u:c(l,u),h=this._getTransformedDimensions(),d=h.x/2,m=h.y/2,v=r({x:-d,y:-m},s),b=r({x:d,y:-m},s),w=r({x:-d,y:m},s),C=r({x:d,y:m},s);if(!n){var x=this.padding,T=i(this.angle),A=e.util.cos(T),R=e.util.sin(T),P=A*x,D=R*x,N=P+D,K=P-D;x&&(v.x-=K,v.y-=N,b.x+=N,b.y-=K,w.x-=N,w.y+=K,C.x+=K,C.y+=N);var W=new e.Point((v.x+w.x)/2,(v.y+w.y)/2),Q=new e.Point((b.x+v.x)/2,(b.y+v.y)/2),nt=new e.Point((C.x+b.x)/2,(C.y+b.y)/2),k=new e.Point((C.x+w.x)/2,(C.y+w.y)/2),z=new e.Point(Q.x+R*this.rotatingPointOffset,Q.y-A*this.rotatingPointOffset)}var Y={tl:v,tr:b,br:C,bl:w};return n||(Y.ml=W,Y.mt=Q,Y.mr=nt,Y.mb=k,Y.mtr=z),Y},setCoords:function(n,o){return this.oCoords=this.calcCoords(n),o||(this.aCoords=this.calcCoords(!0)),n||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){return e.util.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var n=this.getCenterPoint();return[1,0,0,1,n.x,n.y]},transformMatrixKey:function(n){var o="_",a="";return!n&&this.group&&(a=this.group.transformMatrixKey(n)+o),a+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(n){if(n)return this.calcOwnMatrix();var o=this.transformMatrixKey(),a=this.matrixCache||(this.matrixCache={});if(a.key===o)return a.value;var u=this.calcOwnMatrix();return this.group&&(u=c(this.group.calcTransformMatrix(),u)),a.key=o,a.value=u,u},calcOwnMatrix:function(){var n=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===n)return o.value;var a=this._calcTranslateMatrix();return this.translateX=a[4],this.translateY=a[5],o.key=n,o.value=e.util.composeMatrix(this),o.value},_calcDimensionsTransformMatrix:function(n,o,a){return e.util.calcDimensionsMatrix({skewX:n,skewY:o,scaleX:this.scaleX*(a&&this.flipX?-1:1),scaleY:this.scaleY*(a&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var n=this.strokeWidth,o=this.width+n,a=this.height+n;return{x:o,y:a}},_getTransformedDimensions:function(n,o){typeof n=="undefined"&&(n=this.skewX),typeof o=="undefined"&&(o=this.skewY);var a=this._getNonTransformedDimensions(),u,l,s=n===0&&o===0;if(this.strokeUniform?(u=this.width,l=this.height):(u=a.x,l=a.y),s)return this._finalizeDimensions(u*this.scaleX,l*this.scaleY);u/=2,l/=2;var h=[{x:-u,y:-l},{x:u,y:-l},{x:-u,y:l},{x:u,y:l}],d=e.util.calcDimensionsMatrix({scaleX:this.scaleX,scaleY:this.scaleY,skewX:n,skewY:o}),m=e.util.makeBoundingBoxFromPoints(h,d);return this._finalizeDimensions(m.width,m.height)},_finalizeDimensions:function(n,o){return this.strokeUniform?{x:n+this.strokeWidth,y:o+this.strokeWidth}:{x:n,y:o}},_calculateCurrentDimensions:function(){var n=this.getViewportTransform(),o=this._getTransformedDimensions(),a=e.util.transformPoint(o,n,!0);return a.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(c,r){if(r){if(r.toLive)return c+": url(#SVGID_"+r.id+"); ";var n=new e.Color(r),o=c+": "+n.toRgb()+"; ",a=n.getAlpha();return a!==1&&(o+=c+"-opacity: "+a.toString()+"; "),o}else return c+": none; "}var i=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var r=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",l=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=typeof this.opacity!="undefined"?this.opacity:"1",d=this.visible?"":" visibility: hidden;",m=c?"":this.getSvgFilter(),v=f("fill",this.fill),b=f("stroke",this.stroke);return[b,"stroke-width: ",n,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",l,"; ","stroke-miterlimit: ",s,"; ",v,"fill-rule: ",r,"; ","opacity: ",h,";",m,d].join("")},getSvgSpanStyles:function(c,r){var n="; ",o=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+n:"",a=c.strokeWidth?"stroke-width: "+c.strokeWidth+n:"",o=o,u=c.fontSize?"font-size: "+c.fontSize+"px"+n:"",l=c.fontStyle?"font-style: "+c.fontStyle+n:"",s=c.fontWeight?"font-weight: "+c.fontWeight+n:"",h=c.fill?f("fill",c.fill):"",d=c.stroke?f("stroke",c.stroke):"",m=this.getSvgTextDecoration(c),v=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return m&&(m="text-decoration: "+m+n),[d,a,o,u,l,s,m,h,v,r?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(r){return c[r.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,r){var n=c?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+e.util.matrixToSVG(n);return o+(r||"")+this.getSvgTransformMatrix()+'" '},getSvgTransformMatrix:function(){return this.transformMatrix?" "+e.util.matrixToSVG(this.transformMatrix):""},_setSVGBg:function(c){if(this.backgroundColor){var r=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,r),'" y="',i(-this.height/2,r),'" width="',i(this.width,r),'" height="',i(this.height,r),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,r){r=r||{};var n=r.reviver,o=r.additionalTransform||"",a=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),u=c.indexOf("COMMON_PARTS");return c[u]=a,n?n(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,r){r=r||{};var n=r.noStyle,o=r.reviver,a=n?"":'style="'+this.getSvgStyles()+'" ',u=r.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,d=this.stroke,m=this.fill,v=this.shadow,b,w=[],C,x=c.indexOf("COMMON_PARTS"),T=r.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+e.Object.__uid++,C='<clipPath id="'+l.clipPathId+`" >
`+l.toClipPathSVG(o)+`</clipPath>
`),h&&w.push("<g ",u,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),h?"":u+this.getSvgCommons(),` >
`),b=[a,s,n?"":this.addPaintOrder()," ",T?'transform="'+T+'" ':""].join(""),c[x]=b,m&&m.toLive&&w.push(m.toSVG(this)),d&&d.toLive&&w.push(d.toSVG(this)),v&&w.push(v.toSVG(this)),l&&w.push(C),w.push(c.join("")),w.push(`</g>
`),h&&w.push(`</g>
`),o?o(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=e.util.object.extend,i="stateProperties";function c(n,o,a){var u={},l=!0;a.forEach(function(s){u[s]=n[s]}),f(n[o],u,l)}function r(n,o,a){if(n===o)return!0;if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(var u=0,l=n.length;u<l;u++)if(!r(n[u],o[u]))return!1;return!0}else if(n&&typeof n=="object"){var s=Object.keys(n),h;if(!o||typeof o!="object"||!a&&s.length!==Object.keys(o).length)return!1;for(var u=0,l=s.length;u<l;u++)if(h=s[u],h!=="canvas"&&!r(n[h],o[h]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(n){n=n||i;var o="_"+n;return Object.keys(this[o]).length<this[n].length?!0:!r(this[o],this,!0)},saveState:function(n){var o=n&&n.propertySet||i,a="_"+o;return this[a]?(c(this,a,this[o]),n&&n.stateProperties&&c(this,a,n.stateProperties),this):this.setupState(n)},setupState:function(n){n=n||{};var o=n.propertySet||i;return n.propertySet=o,this["_"+o]={},this.saveState(n),this}})}(),function(){var f=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(i){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=i.x,r=i.y,n,o;this.__corner=0;for(var a in this.oCoords)if(!!this.isControlVisible(a)&&!(a==="mtr"&&!this.hasRotatingPoint)&&!(this.get("lockUniScaling")&&(a==="mt"||a==="mr"||a==="mb"||a==="ml"))&&(o=this._getImageLines(this.oCoords[a].corner),n=this._findCrossPoints({x:c,y:r},o),n!==0&&n%2==1))return this.__corner=a,a;return!1},_setCornerCoords:function(){var i=this.oCoords,c=f(45-this.angle),r=this.cornerSize*.707106,n=r*e.util.cos(c),o=r*e.util.sin(c),a,u;for(var l in i)a=i[l].x,u=i[l].y,i[l].corner={tl:{x:a-o,y:u-n},tr:{x:a+n,y:u-o},bl:{x:a-n,y:u+o},br:{x:a+o,y:u+n}}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var c=this.getCenterPoint(),r=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return i.translate(c.x,c.y),i.scale(1/n[0],1/n[3]),i.rotate(f(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-r.x/2,-r.y/2,r.x,r.y),i.restore(),this},drawBorders:function(i,c){c=c||{};var r=this._calculateCurrentDimensions(),n=this.borderScaleFactor,o=r.x+n,a=r.y+n,u=typeof c.hasRotatingPoint!="undefined"?c.hasRotatingPoint:this.hasRotatingPoint,l=typeof c.hasControls!="undefined"?c.hasControls:this.hasControls,s=typeof c.rotatingPointOffset!="undefined"?c.rotatingPointOffset:this.rotatingPointOffset;if(i.save(),i.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(i,c.borderDashArray||this.borderDashArray,null),i.strokeRect(-o/2,-a/2,o,a),u&&this.isControlVisible("mtr")&&l){var h=-a/2;i.beginPath(),i.moveTo(0,h),i.lineTo(0,h-s),i.stroke()}return i.restore(),this},drawBordersInGroup:function(i,c,r){r=r||{};var n={x:this.width,y:this.height},o=e.util.composeMatrix({scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX}),a=e.util.transformPoint(n,o),u=this.strokeWidth,l=this.borderScaleFactor,s=a.x+u*(this.strokeUniform?this.canvas.getZoom():c.scaleX)+l,h=a.y+u*(this.strokeUniform?this.canvas.getZoom():c.scaleY)+l;return i.save(),this._setLineDash(i,r.borderDashArray||this.borderDashArray,null),i.strokeStyle=r.borderColor||this.borderColor,i.strokeRect(-s/2,-h/2,s,h),i.restore(),this},drawControls:function(i,c){c=c||{};var r=this._calculateCurrentDimensions(),n=r.x,o=r.y,a=c.cornerSize||this.cornerSize,u=-(n+a)/2,l=-(o+a)/2,s=typeof c.transparentCorners!="undefined"?c.transparentCorners:this.transparentCorners,h=typeof c.hasRotatingPoint!="undefined"?c.hasRotatingPoint:this.hasRotatingPoint,d=s?"stroke":"fill";return i.save(),i.strokeStyle=i.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,c.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",i,d,u,l,c),this._drawControl("tr",i,d,u+n,l,c),this._drawControl("bl",i,d,u,l+o,c),this._drawControl("br",i,d,u+n,l+o,c),this.get("lockUniScaling")||(this._drawControl("mt",i,d,u+n/2,l,c),this._drawControl("mb",i,d,u+n/2,l+o,c),this._drawControl("mr",i,d,u+n,l+o/2,c),this._drawControl("ml",i,d,u,l+o/2,c)),h&&this._drawControl("mtr",i,d,u+n/2,l-this.rotatingPointOffset,c),i.restore(),this},_drawControl:function(i,c,r,n,o,a){if(a=a||{},!!this.isControlVisible(i)){var u=this.cornerSize,l=!this.transparentCorners&&this.cornerStrokeColor;switch(a.cornerStyle||this.cornerStyle){case"circle":c.beginPath(),c.arc(n+u/2,o+u/2,u/2,0,2*Math.PI,!1),c[r](),l&&c.stroke();break;default:this.transparentCorners||c.clearRect(n,o,u,u),c[r+"Rect"](n,o,u,u),l&&c.strokeRect(n,o,u,u)}}},isControlVisible:function(i){return this._getControlsVisibility()[i]},setControlVisible:function(i,c){return this._getControlsVisibility()[i]=c,this},setControlsVisibility:function(i){i||(i={});for(var c in i)this.setControlVisible(c,i[c]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,i){i=i||{};var c=function(){},r=i.onComplete||c,n=i.onChange||c,o=this;return e.util.animate({startValue:f.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(a){f.set("left",a),o.requestRenderAll(),n()},onComplete:function(){f.setCoords(),r()}}),this},fxCenterObjectV:function(f,i){i=i||{};var c=function(){},r=i.onComplete||c,n=i.onChange||c,o=this;return e.util.animate({startValue:f.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(a){f.set("top",a),o.requestRenderAll(),n()},onComplete:function(){f.setCoords(),r()}}),this},fxRemove:function(f,i){i=i||{};var c=function(){},r=i.onComplete||c,n=i.onChange||c,o=this;return e.util.animate({startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(a){f.set("opacity",a),o.requestRenderAll(),n()},onComplete:function(){o.remove(f),r()}}),this}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],i,c;for(i in arguments[0])f.push(i);for(var r=0,n=f.length;r<n;r++)i=f[r],c=r!==n-1,this._animate(i,arguments[0][i],arguments[1],c)}else this._animate.apply(this,arguments);return this},_animate:function(f,i,c,r){var n=this,o;i=i.toString(),c?c=e.util.object.clone(c):c={},~f.indexOf(".")&&(o=f.split("."));var a=o?this.get(o[0])[o[1]]:this.get(f);"from"in c||(c.from=a),~i.indexOf("=")?i=a+parseFloat(i.replace("=","")):i=parseFloat(i),e.util.animate({startValue:c.from,endValue:i,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(){return c.abort.call(n)},onChange:function(u,l,s){o?n[o[0]][o[1]]=u:n.set(f,u),!r&&c.onChange&&c.onChange(u,l,s)},onComplete:function(u,l,s){r||(n.setCoords(),c.onComplete&&c.onComplete(u,l,s))}})}}),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.object.clone,n={x1:1,x2:1,y1:1,y2:1},o=i.StaticCanvas.supports("setLineDash");if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(u,l){u||(u=[0,0,0,0]),this.callSuper("initialize",l),this.set("x1",u[0]),this.set("y1",u[1]),this.set("x2",u[2]),this.set("y2",u[3]),this._setWidthHeight(l)},_setWidthHeight:function(u){u||(u={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in u?u.left:this._getLeftToOriginX(),this.top="top"in u?u.top:this._getTopToOriginY()},_set:function(u,l){return this.callSuper("_set",u,l),typeof n[u]!="undefined"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(u){if(u.beginPath(),!this.strokeDashArray||this.strokeDashArray&&o){var l=this.calcLinePoints();u.moveTo(l.x1,l.y1),u.lineTo(l.x2,l.y2)}u.lineWidth=this.strokeWidth;var s=u.strokeStyle;u.strokeStyle=this.stroke||u.fillStyle,this.stroke&&this._renderStroke(u),u.strokeStyle=s},_renderDashedStroke:function(u){var l=this.calcLinePoints();u.beginPath(),i.util.drawDashedLine(u,l.x1,l.y1,l.x2,l.y2,this.strokeDashArray),u.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(u){return c(this.callSuper("toObject",u),this.calcLinePoints())},_getNonTransformedDimensions:function(){var u=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(u.y-=this.strokeWidth),this.height===0&&(u.x-=this.strokeWidth)),u},calcLinePoints:function(){var u=this.x1<=this.x2?-1:1,l=this.y1<=this.y2?-1:1,s=u*this.width*.5,h=l*this.height*.5,d=u*this.width*-.5,m=l*this.height*-.5;return{x1:s,x2:d,y1:h,y2:m}},_toSVG:function(){var u=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(u,l,s){s=s||{};var h=i.parseAttributes(u,i.Line.ATTRIBUTE_NAMES),d=[h.x1||0,h.y1||0,h.x2||0,h.y2||0];l(new i.Line(d,c(h,s)))},i.Line.fromObject=function(u,l){function s(d){delete d.points,l&&l(d)}var h=r(u,!0);h.points=[u.x1,u.y1,u.x2,u.y2],i.Object._fromObject("Line",h,s,"points")};function a(u,l){var s=u.origin,h=u.axis1,d=u.axis2,m=u.dimension,v=l.nearest,b=l.center,w=l.farthest;return function(){switch(this.get(s)){case v:return Math.min(this.get(h),this.get(d));case b:return Math.min(this.get(h),this.get(d))+.5*this.get(m);case w:return Math.max(this.get(h),this.get(d))}}}}(t),function(f){var i=f.fabric||(f.fabric={}),c=Math.PI;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:c*2,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,o){return this.callSuper("_set",n,o),n==="radius"&&this.setRadius(o),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,o=0,a=0,u=(this.endAngle-this.startAngle)%(2*c);if(u===0)n=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+a+'" ','r="',this.radius,`" />
`];else{var l=i.util.cos(this.startAngle)*this.radius,s=i.util.sin(this.startAngle)*this.radius,h=i.util.cos(this.endAngle)*this.radius,d=i.util.sin(this.endAngle)*this.radius,m=u>c?"1":"0";n=['<path d="M '+l+" "+s," A "+this.radius+" "+this.radius," 0 ",+m+" 1"," "+h+" "+d,'" ',"COMMON_PARTS",` />
`]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",n*2).set("height",n*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(n,o){var a=i.parseAttributes(n,i.Circle.ATTRIBUTE_NAMES);if(!r(a))throw new Error("value of `r` attribute is required and can not be negative");a.left=(a.left||0)-a.radius,a.top=(a.top||0)-a.radius,o(new i.Circle(a))};function r(n){return"radius"in n&&n.radius>=0}i.Circle.fromObject=function(n,o){return i.Object._fromObject("Circle",n,o)}}(t),function(f){var i=f.fabric||(f.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(c){var r=this.width/2,n=this.height/2;c.beginPath(),c.moveTo(-r,n),c.lineTo(0,-n),c.lineTo(r,n),c.closePath(),this._renderPaintInOrder(c)},_renderDashedStroke:function(c){var r=this.width/2,n=this.height/2;c.beginPath(),i.util.drawDashedLine(c,-r,n,0,-n,this.strokeDashArray),i.util.drawDashedLine(c,0,-n,r,n,this.strokeDashArray),i.util.drawDashedLine(c,r,n,-r,n,this.strokeDashArray),c.closePath()},_toSVG:function(){var c=this.width/2,r=this.height/2,n=[-c+" "+r,"0 "+-r,c+" "+r].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),i.Triangle.fromObject=function(c,r){return i.Object._fromObject("Triangle",c,r)}}(t),function(f){var i=f.fabric||(f.fabric={}),c=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(r){this.callSuper("initialize",r),this.set("rx",r&&r.rx||0),this.set("ry",r&&r.ry||0)},_set:function(r,n){switch(this.callSuper("_set",r,n),r){case"rx":this.rx=n,this.set("width",n*2);break;case"ry":this.ry=n,this.set("height",n*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(r){return this.callSuper("toObject",["rx","ry"].concat(r))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(r){r.beginPath(),r.save(),r.transform(1,0,0,this.ry/this.rx,0,0),r.arc(0,0,this.rx,0,c,!1),r.restore(),this._renderPaintInOrder(r)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(r,n){var o=i.parseAttributes(r,i.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,n(new i.Ellipse(o))},i.Ellipse.fromObject=function(r,n){return i.Object._fromObject("Ellipse",r,n)}}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(r){this.callSuper("initialize",r),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(r){var n=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,u=this.height,l=-this.width/2,s=-this.height/2,h=n!==0||o!==0,d=1-.5522847498;r.beginPath(),r.moveTo(l+n,s),r.lineTo(l+a-n,s),h&&r.bezierCurveTo(l+a-d*n,s,l+a,s+d*o,l+a,s+o),r.lineTo(l+a,s+u-o),h&&r.bezierCurveTo(l+a,s+u-d*o,l+a-d*n,s+u,l+a-n,s+u),r.lineTo(l+n,s+u),h&&r.bezierCurveTo(l+d*n,s+u,l,s+u-d*o,l,s+u-o),r.lineTo(l,s+o),h&&r.bezierCurveTo(l,s+d*o,l+d*n,s,l+n,s),r.closePath(),this._renderPaintInOrder(r)},_renderDashedStroke:function(r){var n=-this.width/2,o=-this.height/2,a=this.width,u=this.height;r.beginPath(),i.util.drawDashedLine(r,n,o,n+a,o,this.strokeDashArray),i.util.drawDashedLine(r,n+a,o,n+a,o+u,this.strokeDashArray),i.util.drawDashedLine(r,n+a,o+u,n,o+u,this.strokeDashArray),i.util.drawDashedLine(r,n,o+u,n,o,this.strokeDashArray),r.closePath()},toObject:function(r){return this.callSuper("toObject",["rx","ry"].concat(r))},_toSVG:function(){var r=-this.width/2,n=-this.height/2;return["<rect ","COMMON_PARTS",'x="',r,'" y="',n,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(r,n,o){if(!r)return n(null);o=o||{};var a=i.parseAttributes(r,i.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var u=new i.Rect(c(o?i.util.object.clone(o):{},a));u.visible=u.visible&&u.width>0&&u.height>0,n(u)},i.Rect.fromObject=function(r,n){return i.Object._fromObject("Rect",r,n)}}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.array.min,n=i.util.array.max,o=i.util.toFixed;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(a,u){u=u||{},this.points=a||[],this.callSuper("initialize",u),this._setPositionDimensions(u)},_setPositionDimensions:function(a){var u=this._calcDimensions(a),l;this.width=u.width,this.height=u.height,a.fromSVG||(l=this.translateToGivenOrigin({x:u.left-this.strokeWidth/2,y:u.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof a.left=="undefined"&&(this.left=a.fromSVG?u.left:l.x),typeof a.top=="undefined"&&(this.top=a.fromSVG?u.top:l.y),this.pathOffset={x:u.left+this.width/2,y:u.top+this.height/2}},_calcDimensions:function(){var a=this.points,u=r(a,"x")||0,l=r(a,"y")||0,s=n(a,"x")||0,h=n(a,"y")||0,d=s-u,m=h-l;return{left:u,top:l,width:d,height:m}},toObject:function(a){return c(this.callSuper("toObject",a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],u=this.pathOffset.x,l=this.pathOffset.y,s=i.Object.NUM_FRACTION_DIGITS,h=0,d=this.points.length;h<d;h++)a.push(o(this.points[h].x-u,s),",",o(this.points[h].y-l,s)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),`" />
`]},commonRender:function(a){var u,l=this.points.length,s=this.pathOffset.x,h=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-s,this.points[0].y-h);for(var d=0;d<l;d++)u=this.points[d],a.lineTo(u.x-s,u.y-h);return!0},_render:function(a){!this.commonRender(a)||this._renderPaintInOrder(a)},_renderDashedStroke:function(a){var u,l;a.beginPath();for(var s=0,h=this.points.length;s<h;s++)u=this.points[s],l=this.points[s+1]||u,i.util.drawDashedLine(a,u.x,u.y,l.x,l.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(a){return function(u,l,s){if(!u)return l(null);s||(s={});var h=i.parsePointsAttribute(u.getAttribute("points")),d=i.parseAttributes(u,i[a].ATTRIBUTE_NAMES);d.fromSVG=!0,l(new i[a](h,c(d,s)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(a,u){return i.Object._fromObject("Polyline",a,u,"points")}}(t),function(f){var i=f.fabric||(f.fabric={});if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_render:function(c){!this.commonRender(c)||(c.closePath(),this._renderPaintInOrder(c))},_renderDashedStroke:function(c){this.callSuper("_renderDashedStroke",c),c.closePath()}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(c,r){return i.Object._fromObject("Polygon",c,r,"points")}}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.array.min,r=i.util.array.max,n=i.util.object.extend,o=Object.prototype.toString,a=i.util.drawArc,u=i.util.toFixed,l={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},s={m:"l",M:"L"};if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(h,d){d=d||{},this.callSuper("initialize",d),h||(h=[]);var m=o.call(h)==="[object Array]";this.path=m?h:h.match&&h.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),!!this.path&&(m||(this.path=this._parsePath()),i.Polyline.prototype._setPositionDimensions.call(this,d))},_renderPathCommands:function(h){var d,m=null,v=0,b=0,w=0,C=0,x=0,T=0,A,R,P=-this.pathOffset.x,D=-this.pathOffset.y;h.beginPath();for(var N=0,K=this.path.length;N<K;++N){switch(d=this.path[N],d[0]){case"l":w+=d[1],C+=d[2],h.lineTo(w+P,C+D);break;case"L":w=d[1],C=d[2],h.lineTo(w+P,C+D);break;case"h":w+=d[1],h.lineTo(w+P,C+D);break;case"H":w=d[1],h.lineTo(w+P,C+D);break;case"v":C+=d[1],h.lineTo(w+P,C+D);break;case"V":C=d[1],h.lineTo(w+P,C+D);break;case"m":w+=d[1],C+=d[2],v=w,b=C,h.moveTo(w+P,C+D);break;case"M":w=d[1],C=d[2],v=w,b=C,h.moveTo(w+P,C+D);break;case"c":A=w+d[5],R=C+d[6],x=w+d[3],T=C+d[4],h.bezierCurveTo(w+d[1]+P,C+d[2]+D,x+P,T+D,A+P,R+D),w=A,C=R;break;case"C":w=d[5],C=d[6],x=d[3],T=d[4],h.bezierCurveTo(d[1]+P,d[2]+D,x+P,T+D,w+P,C+D);break;case"s":A=w+d[3],R=C+d[4],m[0].match(/[CcSs]/)===null?(x=w,T=C):(x=2*w-x,T=2*C-T),h.bezierCurveTo(x+P,T+D,w+d[1]+P,C+d[2]+D,A+P,R+D),x=w+d[1],T=C+d[2],w=A,C=R;break;case"S":A=d[3],R=d[4],m[0].match(/[CcSs]/)===null?(x=w,T=C):(x=2*w-x,T=2*C-T),h.bezierCurveTo(x+P,T+D,d[1]+P,d[2]+D,A+P,R+D),w=A,C=R,x=d[1],T=d[2];break;case"q":A=w+d[3],R=C+d[4],x=w+d[1],T=C+d[2],h.quadraticCurveTo(x+P,T+D,A+P,R+D),w=A,C=R;break;case"Q":A=d[3],R=d[4],h.quadraticCurveTo(d[1]+P,d[2]+D,A+P,R+D),w=A,C=R,x=d[1],T=d[2];break;case"t":A=w+d[1],R=C+d[2],m[0].match(/[QqTt]/)===null?(x=w,T=C):(x=2*w-x,T=2*C-T),h.quadraticCurveTo(x+P,T+D,A+P,R+D),w=A,C=R;break;case"T":A=d[1],R=d[2],m[0].match(/[QqTt]/)===null?(x=w,T=C):(x=2*w-x,T=2*C-T),h.quadraticCurveTo(x+P,T+D,A+P,R+D),w=A,C=R;break;case"a":a(h,w+P,C+D,[d[1],d[2],d[3],d[4],d[5],d[6]+w+P,d[7]+C+D]),w+=d[6],C+=d[7];break;case"A":a(h,w+P,C+D,[d[1],d[2],d[3],d[4],d[5],d[6]+P,d[7]+D]),w=d[6],C=d[7];break;case"z":case"Z":w=v,C=b,h.closePath();break}m=d}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return n(this.callSuper("toObject",h),{path:this.path.map(function(d){return d.slice()})})},toDatalessObject:function(h){var d=this.toObject(["sourcePath"].concat(h));return d.sourcePath&&delete d.path,d},_toSVG:function(){var h=this.path.map(function(d){return d.join(" ")}).join(" ");return["<path ","COMMON_PARTS",'d="',h,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var h=i.Object.NUM_FRACTION_DIGITS;return" translate("+u(-this.pathOffset.x,h)+", "+u(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var d=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:d})},toSVG:function(h){var d=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:d})},complexity:function(){return this.path.length},_parsePath:function(){for(var h=[],d=[],m,v,b=i.rePathCommand,w,C,x=0,T,A=this.path.length;x<A;x++){for(m=this.path[x],C=m.slice(1).trim(),d.length=0;w=b.exec(C);)d.push(w[0]);T=[m.charAt(0)];for(var R=0,P=d.length;R<P;R++)v=parseFloat(d[R]),isNaN(v)||T.push(v);var D=T[0],N=l[D.toLowerCase()],K=s[D]||D;if(T.length-1>N)for(var W=1,Q=T.length;W<Q;W+=N)h.push([D].concat(T.slice(W,W+N))),D=K;else h.push(T)}return h},_calcDimensions:function(){for(var h=[],d=[],m,v=null,b=0,w=0,C=0,x=0,T=0,A=0,R,P,D,N=0,K=this.path.length;N<K;++N){switch(m=this.path[N],m[0]){case"l":C+=m[1],x+=m[2],D=[];break;case"L":C=m[1],x=m[2],D=[];break;case"h":C+=m[1],D=[];break;case"H":C=m[1],D=[];break;case"v":x+=m[1],D=[];break;case"V":x=m[1],D=[];break;case"m":C+=m[1],x+=m[2],b=C,w=x,D=[];break;case"M":C=m[1],x=m[2],b=C,w=x,D=[];break;case"c":R=C+m[5],P=x+m[6],T=C+m[3],A=x+m[4],D=i.util.getBoundsOfCurve(C,x,C+m[1],x+m[2],T,A,R,P),C=R,x=P;break;case"C":T=m[3],A=m[4],D=i.util.getBoundsOfCurve(C,x,m[1],m[2],T,A,m[5],m[6]),C=m[5],x=m[6];break;case"s":R=C+m[3],P=x+m[4],v[0].match(/[CcSs]/)===null?(T=C,A=x):(T=2*C-T,A=2*x-A),D=i.util.getBoundsOfCurve(C,x,T,A,C+m[1],x+m[2],R,P),T=C+m[1],A=x+m[2],C=R,x=P;break;case"S":R=m[3],P=m[4],v[0].match(/[CcSs]/)===null?(T=C,A=x):(T=2*C-T,A=2*x-A),D=i.util.getBoundsOfCurve(C,x,T,A,m[1],m[2],R,P),C=R,x=P,T=m[1],A=m[2];break;case"q":R=C+m[3],P=x+m[4],T=C+m[1],A=x+m[2],D=i.util.getBoundsOfCurve(C,x,T,A,T,A,R,P),C=R,x=P;break;case"Q":T=m[1],A=m[2],D=i.util.getBoundsOfCurve(C,x,T,A,T,A,m[3],m[4]),C=m[3],x=m[4];break;case"t":R=C+m[1],P=x+m[2],v[0].match(/[QqTt]/)===null?(T=C,A=x):(T=2*C-T,A=2*x-A),D=i.util.getBoundsOfCurve(C,x,T,A,T,A,R,P),C=R,x=P;break;case"T":R=m[1],P=m[2],v[0].match(/[QqTt]/)===null?(T=C,A=x):(T=2*C-T,A=2*x-A),D=i.util.getBoundsOfCurve(C,x,T,A,T,A,R,P),C=R,x=P;break;case"a":D=i.util.getBoundsOfArc(C,x,m[1],m[2],m[3],m[4],m[5],m[6]+C,m[7]+x),C+=m[6],x+=m[7];break;case"A":D=i.util.getBoundsOfArc(C,x,m[1],m[2],m[3],m[4],m[5],m[6],m[7]),C=m[6],x=m[7];break;case"z":case"Z":C=b,x=w;break}v=m,D.forEach(function(G){h.push(G.x),d.push(G.y)}),h.push(C),d.push(x)}var W=c(h)||0,Q=c(d)||0,nt=r(h)||0,k=r(d)||0,z=nt-W,Y=k-Q;return{left:W,top:Q,width:z,height:Y}}}),i.Path.fromObject=function(h,d){if(typeof h.sourcePath=="string"){var m=h.sourcePath;i.loadSVGFromURL(m,function(v){var b=v[0];b.setOptions(h),d&&d(b)})}else i.Object._fromObject("Path",h,d,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(h,d,m){var v=i.parseAttributes(h,i.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,d(new i.Path(v.d,n(v,m)))}}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.array.min,r=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,o,a){o=o||{},this._objects=[],a&&this.callSuper("initialize",o),this._objects=n||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;if(a)this._updateObjectsACoords();else{var l=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),l||this._calcBounds(),this._updateObjectsCoords(l),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var n=!0,o=!0,a=this._objects.length;a--;)this._objects[a].setCoords(n,o)},_updateObjectsCoords:function(n){for(var n=n||this.getCenterPoint(),o=this._objects.length;o--;)this._updateObjectCoords(this._objects[o],n)},_updateObjectCoords:function(n,o){var a=n.left,u=n.top,l=!0,s=!0;n.set({left:a-o.x,top:u-o.y}),n.group=this,n.setCoords(l,s)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){return this._restoreObjectsState(),i.util.resetObjectTransform(this),n&&(this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(n){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,o){var a=this._objects.length;if(this.useSetOnGroup)for(;a--;)this._objects[a].setOnGroup(n,o);if(n==="canvas")for(;a--;)this._objects[a]._set(n,o);i.Object.prototype._set.call(this,n,o)},toObject:function(n){var o=this.includeDefaultValues,a=this._objects.map(function(l){var s=l.includeDefaultValues;l.includeDefaultValues=o;var h=l.toObject(n);return l.includeDefaultValues=s,h}),u=i.Object.prototype.toObject.call(this,n);return u.objects=a,u},toDatalessObject:function(n){var o,a=this.sourcePath;if(a)o=a;else{var u=this.includeDefaultValues;o=this._objects.map(function(s){var h=s.includeDefaultValues;s.includeDefaultValues=u;var d=s.toDatalessObject(n);return s.includeDefaultValues=h,d})}var l=i.Object.prototype.toDatalessObject.call(this,n);return l.objects=o,l},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=i.Object.prototype.shouldCache.call(this);if(n){for(var o=0,a=this._objects.length;o<a;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return n},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,o=this._objects.length;n<o;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var o=0,a=this._objects.length;o<a;o++)this._objects[o].render(n);this._drawClipPath(n)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var o=0,a=this._objects.length;o<a;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var u=this.cacheWidth/this.zoomX,l=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-u/2,-l/2,u,l)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(n){var o=n.calcTransformMatrix(),a=i.util.qrDecompose(o),u=new i.Point(a.translateX,a.translateY);return n.flipX=!1,n.flipY=!1,n.set("scaleX",a.scaleX),n.set("scaleY",a.scaleY),n.skewX=a.skewX,n.skewY=a.skewY,n.angle=a.angle,n.setPositionByOrigin(u,"center","center"),n},_restoreObjectState:function(n){return this.realizeTransform(n),n.setCoords(),delete n.group,this},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var n=this._objects,o=this.canvas;this._objects=[];var a=this.toObject();delete a.objects;var u=new i.ActiveSelection([]);return u.set(a),u.type="activeSelection",o.remove(this),n.forEach(function(l){l.group=u,l.dirty=!0,o.add(l)}),u.canvas=o,u._objects=n,o._activeObject=u,u.setCoords(),u}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var n=!0,o=!0;return this.forEachObject(function(a){a.setCoords(n,o)}),this},_calcBounds:function(n){for(var o=[],a=[],u,l,s=["tr","br","bl","tl"],h=0,d=this._objects.length,m,v=s.length,b=!0;h<d;++h)for(u=this._objects[h],u.setCoords(b),m=0;m<v;m++)l=s[m],o.push(u.oCoords[l].x),a.push(u.oCoords[l].y);this._getBounds(o,a,n)},_getBounds:function(n,o,a){var u=new i.Point(c(n),c(o)),l=new i.Point(r(n),r(o)),s=u.y||0,h=u.x||0,d=l.x-u.x||0,m=l.y-u.y||0;this.width=d,this.height=m,a||this.setPositionByOrigin({x:h,y:s},"left","top")},_toSVG:function(n){for(var o=["<g ","COMMON_PARTS",` >
`],a=0,u=this._objects.length;a<u;a++)o.push("		",this._objects[a].toSVG(n));return o.push(`</g>
`),o},getSvgStyles:function(){var n=typeof this.opacity!="undefined"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[n,this.getSvgFilter(),o].join("")},toClipPathSVG:function(n){for(var o=[],a=0,u=this._objects.length;a<u;a++)o.push("	",this._objects[a].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(o,{reviver:n})}}),i.Group.fromObject=function(n,o){var a=n.objects,u=i.util.object.clone(n,!0);if(delete u.objects,typeof a=="string"){i.loadSVGFromURL(a,function(l){var s=i.util.groupSVGElements(l,n,a);s.set(u),o&&o(s)});return}i.util.enlivenObjects(a,function(l){i.util.enlivenObjects([n.clipPath],function(s){var h=i.util.object.clone(n,!0);h.clipPath=s[0],delete h.objects,o&&o(new i.Group(l,h,!0))})})})}(t),function(f){var i=f.fabric||(f.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(c,r){r=r||{},this._objects=c||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;r.originX&&(this.originX=r.originX),r.originY&&(this.originY=r.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,r),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var r=i.Object.prototype.toObject.call(this),n=new i.Group([]);if(delete r.type,n.set(r),c.forEach(function(a){a.canvas.remove(a),a.group=n}),n._objects=c,!this.canvas)return n;var o=this.canvas;return o.add(n),o._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,r,n){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,r),n=n||{},typeof n.hasControls=="undefined"&&(n.hasControls=!1),typeof n.hasRotatingPoint=="undefined"&&(n.hasRotatingPoint=!1),n.forActiveSelection=!0;for(var o=0,a=this._objects.length;o<a;o++)this._objects[o]._renderControls(c,n);c.restore()}}),i.ActiveSelection.fromObject=function(c,r){i.util.enlivenObjects(c.objects,function(n){delete c.objects,r&&r(new i.ActiveSelection(n,c,!0))})})}(t),function(f){var i=e.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",crossOrigin:"",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(c,r){r||(r={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",r),this._initElement(c,r)},getElement:function(){return this._element||{}},setElement:function(c,r){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(r),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var r=e.filterBackend;r&&r.evictCachesForKey&&r.evictCachesForKey(c)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}.bind(this))},setCrossOrigin:function(c){return this.crossOrigin=c,this._element.crossOrigin=c,this},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var r=this.width/2,n=this.height/2;c.beginPath(),c.moveTo(-r,-n),c.lineTo(r,-n),c.lineTo(r,n),c.lineTo(-r,n),c.lineTo(-r,-n),c.closePath()}},_renderDashedStroke:function(c){var r=-this.width/2,n=-this.height/2,o=this.width,a=this.height;c.save(),this._setStrokeStyles(c,this),c.beginPath(),e.util.drawDashedLine(c,r,n,r+o,n,this.strokeDashArray),e.util.drawDashedLine(c,r+o,n,r+o,n+a,this.strokeDashArray),e.util.drawDashedLine(c,r+o,n+a,r,n+a,this.strokeDashArray),e.util.drawDashedLine(c,r,n+a,r,n,this.strokeDashArray),c.closePath(),c.restore()},toObject:function(c){var r=[];this.filters.forEach(function(o){o&&r.push(o.toObject())});var n=i(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(c)),{src:this.getSrc(),filters:r});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],r=[],n,o=-this.width/2,a=-this.height/2,u="";if(this.hasCrop()){var l=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+l+`">
`,'	<rect x="'+o+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+l+')" '}if(r.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',a-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'"',u,`></image>
`),this.stroke||this.strokeDashArray){var s=this.fill;this.fill=null,n=["	<rect ",'x="',o,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=s}return this.paintFirst!=="fill"?c=c.concat(n,r):c=c.concat(r,n),c},getSrc:function(c){var r=c?this._element:this._originalElement;return r?r.toDataURL?r.toDataURL():this.srcFromAttribute?r.getAttribute("src"):r.src:this.src||""},setSrc:function(c,r,n){return e.util.loadImage(c,function(o){this.setElement(o,n),this._setWidthHeight(),r&&r(this)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,r=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),o=n.scaleX,a=n.scaleY,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||o>r&&a>r){this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=a;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var l=e.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,h=u.width,d=u.height;l.width=h,l.height=d,this._element=l,this._lastScaleX=c.scaleX=o,this._lastScaleY=c.scaleY=a,e.filterBackend.applyFilters([c],u,h,d,this._element,s),this._filterScalingX=l.width/this._originalElement.width,this._filterScalingY=l.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(u){return u&&!u.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var r=this._originalElement,n=r.naturalWidth||r.width,o=r.naturalHeight||r.height;if(this._element===this._originalElement){var a=e.util.createCanvasElement();a.width=n,a.height=o,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,o),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,n,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var r=this._element,n=this.width,o=this.height,a=Math.min(r.naturalWidth||r.width,n*this._filterScalingX),u=Math.min(r.naturalHeight||r.height,o*this._filterScalingY),l=-n/2,s=-o/2,h=Math.max(0,this.cropX*this._filterScalingX),d=Math.max(0,this.cropY*this._filterScalingY);r&&c.drawImage(r,h,d,a,u,l,s,n,o)},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,r){this.setElement(e.util.getById(c),r),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(c,r){c&&c.length?e.util.enlivenObjects(c,function(n){r&&r(n)},"fabric.Image.filters"):r&&r()},_setWidthHeight:function(c){c||(c={});var r=this.getElement();this.width=c.width||r.naturalWidth||r.width||0,this.height=c.height||r.naturalHeight||r.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),r=this._element.width,n=this._element.height,o=1,a=1,u=0,l=0,s=0,h=0,d,m=this.width,v=this.height,b={width:m,height:v};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(o=a=e.util.findScaleToFit(this._element,b),d=(m-r*o)/2,c.alignX==="Min"&&(u=-d),c.alignX==="Max"&&(u=d),d=(v-n*a)/2,c.alignY==="Min"&&(l=-d),c.alignY==="Max"&&(l=d)),c.meetOrSlice==="slice"&&(o=a=e.util.findScaleToCover(this._element,b),d=r-m/o,c.alignX==="Mid"&&(s=d/2),c.alignX==="Max"&&(s=d),d=n-v/a,c.alignY==="Mid"&&(h=d/2),c.alignY==="Max"&&(h=d),r=m/o,n=v/a)):(o=m/r,a=v/n),{width:r,height:n,scaleX:o,scaleY:a,offsetLeft:u,offsetTop:l,cropX:s,cropY:h}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,r){var n=e.util.object.clone(c);e.util.loadImage(n.src,function(o,a){if(a){r&&r(null,a);return}e.Image.prototype._initFilters.call(n,n.filters,function(u){n.filters=u||[],e.Image.prototype._initFilters.call(n,[n.resizeFilter],function(l){n.resizeFilter=l[0],e.util.enlivenObjects([n.clipPath],function(s){n.clipPath=s[0];var h=new e.Image(o,n);r(h)})})})},null,n.crossOrigin)},e.Image.fromURL=function(c,r,n){e.util.loadImage(c,function(o){r&&r(new e.Image(o,n))},null,n&&n.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),e.Image.fromElement=function(c,r,n){var o=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(o["xlink:href"],r,i(n?e.util.object.clone(n):{},o))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(f){f=f||{};var i=function(){},c=f.onComplete||i,r=f.onChange||i,n=this;return e.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){n.rotate(o),r()},onComplete:function(){n.setCoords(),c()}}),this}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function f(c,r){var n="precision "+r+` float;
void main(){}`,o=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(o,n),c.compileShader(o),!!c.getShaderParameter(o,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var r=document.createElement("canvas"),n=r.getContext("webgl")||r.getContext("experimental-webgl"),o=!1;if(n){e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),o=e.maxTextureSize>=c;for(var a=["highp","mediump","lowp"],u=0;u<3;u++)if(f(n,a[u])){e.webGlPrecision=a[u];break}}return this.isSupported=o,o},e.WebglFilterBackend=i;function i(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(c,r){this.dispose(),this.createWebGLCanvas(c,r),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,r)},chooseFastestCopyGLTo2DMethod:function(c,r){var n=typeof window.performance!="undefined",o;try{new ImageData(1,1),o=!0}catch{o=!1}var a=typeof ArrayBuffer!="undefined",u=typeof Uint8ClampedArray!="undefined";if(!!(n&&o&&a&&u)){var l=e.util.createCanvasElement(),s=new ArrayBuffer(c*r*4);if(e.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=S;return}var h={imageBuffer:s,destinationWidth:c,destinationHeight:r,targetCanvas:l},d,m,v;l.width=c,l.height=r,d=window.performance.now(),y.call(h,this.gl,h),m=window.performance.now()-d,d=window.performance.now(),S.call(h,this.gl,h),v=window.performance.now()-d,m>v?(this.imageBuffer=s,this.copyGLTo2D=S):this.copyGLTo2D=y}},createWebGLCanvas:function(c,r){var n=e.util.createCanvasElement();n.width=c,n.height=r;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=n.getContext("webgl",o);a||(a=n.getContext("experimental-webgl",o)),!!a&&(a.clearColor(0,0,0,0),this.canvas=n,this.gl=a)},applyFilters:function(c,r,n,o,a,u){var l=this.gl,s;u&&(s=this.getCachedTexture(u,r));var h={originalWidth:r.width||r.originalWidth,originalHeight:r.height||r.originalHeight,sourceWidth:n,sourceHeight:o,destinationWidth:n,destinationHeight:o,context:l,sourceTexture:this.createTexture(l,n,o,!s&&r),targetTexture:this.createTexture(l,n,o),originalTexture:s||this.createTexture(l,n,o,!s&&r),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},d=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,d),c.forEach(function(m){m&&m.applyTo(h)}),_(h),this.copyGLTo2D(l,h),l.bindTexture(l.TEXTURE_2D,null),l.deleteTexture(h.sourceTexture),l.deleteTexture(h.targetTexture),l.deleteFramebuffer(d),a.getContext("2d").setTransform(1,0,0,1,0,0),h},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,r,n,o){var a=c.createTexture();return c.bindTexture(c.TEXTURE_2D,a),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),o?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,o):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,r,n,0,c.RGBA,c.UNSIGNED_BYTE,null),a},getCachedTexture:function(c,r){if(this.textureCache[c])return this.textureCache[c];var n=this.createTexture(this.gl,r.width,r.height,r);return this.textureCache[c]=n,n},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:y,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,r={renderer:"",vendor:""};if(!c)return r;var n=c.getExtension("WEBGL_debug_renderer_info");if(n){var o=c.getParameter(n.UNMASKED_RENDERER_WEBGL),a=c.getParameter(n.UNMASKED_VENDOR_WEBGL);o&&(r.renderer=o.toLowerCase()),a&&(r.vendor=a.toLowerCase())}return this.gpuInfo=r,r}}}();function _(f){var i=f.targetCanvas,c=i.width,r=i.height,n=f.destinationWidth,o=f.destinationHeight;(c!==n||r!==o)&&(i.width=n,i.height=o)}function y(f,i){var c=f.canvas,r=i.targetCanvas,n=r.getContext("2d");n.translate(0,r.height),n.scale(1,-1);var o=c.height-r.height;n.drawImage(c,0,o,r.width,r.height,0,0,r.width,r.height)}function S(f,i){var c=i.targetCanvas,r=c.getContext("2d"),n=i.destinationWidth,o=i.destinationHeight,a=n*o*4,u=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);f.readPixels(0,0,n,o,f.RGBA,f.UNSIGNED_BYTE,u);var s=new ImageData(l,n,o);r.putImageData(s,0,0)}(function(){var f=function(){};e.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(c,r,n,o,a){var u=a.getContext("2d");u.drawImage(r,0,0,n,o);var l=u.getImageData(0,0,n,o),s=u.getImageData(0,0,n,o),h={sourceWidth:n,sourceHeight:o,imageData:l,originalEl:r,originalImageData:s,canvasEl:a,ctx:u,filterBackend:this};return c.forEach(function(d){d.applyTo(h)}),(h.imageData.width!==n||h.imageData.height!==o)&&(a.width=h.imageData.width,a.height=h.imageData.height),u.putImageData(h.imageData,0,0),h}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var i in f)this[i]=f[i]},createProgram:function(f,i,c){i=i||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var r=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(r,c),f.compileShader(r),!f.getShaderParameter(r,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(r));var n=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(n,i),f.compileShader(n),!f.getShaderParameter(n,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(n));var o=f.createProgram();if(f.attachShader(o,r),f.attachShader(o,n),f.linkProgram(o),!f.getProgramParameter(o,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(o));var a=this.getAttributeLocations(f,o),u=this.getUniformLocations(f,o)||{};return u.uStepW=f.getUniformLocation(o,"uStepW"),u.uStepH=f.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:u}},getAttributeLocations:function(f,i){return{aPosition:f.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,i,c){var r=i.aPosition,n=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,n),f.enableVertexAttribArray(r),f.vertexAttribPointer(r,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,c,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var i=f.context,c,r;f.passes>1?(c=f.destinationWidth,r=f.destinationHeight,(f.sourceWidth!==c||f.sourceHeight!==r)&&(i.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(i,c,r)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,f.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(f){f.passes--,f.pass++;var i=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=i},isNeutralState:function(){var f=this.mainParameter,i=e.Image.filters[this.type].prototype;if(f)if(Array.isArray(i[f])){for(var c=i[f].length;c--;)if(this[f][c]!==i[f][c])return!1;return!0}else return i[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var i=f.context,c=this.retrieveShader(f);f.pass===0&&f.originalTexture?i.bindTexture(i.TEXTURE_2D,f.originalTexture):i.bindTexture(i.TEXTURE_2D,f.sourceTexture),i.useProgram(c.program),this.sendAttributeData(i,c.attributeLocations,f.aPosition),i.uniform1f(c.uniformLocations.uStepW,1/f.sourceWidth),i.uniform1f(c.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(i,c.uniformLocations),i.viewport(0,0,f.destinationWidth,f.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,i,c){f.activeTexture(c),f.bindTexture(f.TEXTURE_2D,i),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,i){f.activeTexture(i),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var i=document.createElement("canvas");i.width=f.sourceWidth,i.height=f.sourceHeight,f.helpLayer=i}},toObject:function(){var f={type:this.type},i=this.mainParameter;return i&&(f[i]=this[i]),f},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(f,i){var c=new e.Image.filters[f.type](f);return i&&i(c),c},function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.ColorMatrix=r(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var o=n.imageData,a=o.data,u=a.length,l=this.matrix,s,h,d,m,v,b=this.colorsOnly;for(v=0;v<u;v+=4)s=a[v],h=a[v+1],d=a[v+2],b?(a[v]=s*l[0]+h*l[1]+d*l[2]+l[4]*255,a[v+1]=s*l[5]+h*l[6]+d*l[7]+l[9]*255,a[v+2]=s*l[10]+h*l[11]+d*l[12]+l[14]*255):(m=a[v+3],a[v]=s*l[0]+h*l[1]+d*l[2]+m*l[3]+l[4]*255,a[v+1]=s*l[5]+h*l[6]+d*l[7]+m*l[8]+l[9]*255,a[v+2]=s*l[10]+h*l[11]+d*l[12]+m*l[13]+l[14]*255,a[v+3]=s*l[15]+h*l[16]+d*l[17]+m*l[18]+l[19]*255)},getUniformLocations:function(n,o){return{uColorMatrix:n.getUniformLocation(o,"uColorMatrix"),uConstants:n.getUniformLocation(o,"uConstants")}},sendUniformData:function(n,o){var a=this.matrix,u=[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]],l=[a[4],a[9],a[14],a[19]];n.uniformMatrix4fv(o.uColorMatrix,!1,u),n.uniform4fv(o.uConstants,l)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Brightness=r(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(this.brightness!==0){var o=n.imageData,a=o.data,u,l=a.length,s=Math.round(this.brightness*255);for(u=0;u<l;u+=4)a[u]=a[u]+s,a[u+1]=a[u+1]+s,a[u+2]=a[u+2]+s}},getUniformLocations:function(n,o){return{uBrightness:n.getUniformLocation(o,"uBrightness")}},sendUniformData:function(n,o){n.uniform1f(o.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.Image.filters,n=i.util.createClass;r.Convolute=n(r.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var a=Math.sqrt(this.matrix.length),u=this.type+"_"+a+"_"+(this.opaque?1:0),l=this.fragmentSource[u];return o.programCache.hasOwnProperty(u)||(o.programCache[u]=this.createProgram(o.context,l)),o.programCache[u]},applyTo2d:function(o){var a=o.imageData,u=a.data,l=this.matrix,s=Math.round(Math.sqrt(l.length)),h=Math.floor(s/2),d=a.width,m=a.height,v=o.ctx.createImageData(d,m),b=v.data,w=this.opaque?1:0,C,x,T,A,R,P,D,N,K,W,Q,nt,k;for(Q=0;Q<m;Q++)for(W=0;W<d;W++){for(R=(Q*d+W)*4,C=0,x=0,T=0,A=0,k=0;k<s;k++)for(nt=0;nt<s;nt++)D=Q+k-h,P=W+nt-h,!(D<0||D>=m||P<0||P>=d)&&(N=(D*d+P)*4,K=l[k*s+nt],C+=u[N]*K,x+=u[N+1]*K,T+=u[N+2]*K,w||(A+=u[N+3]*K));b[R]=C,b[R+1]=x,b[R+2]=T,w?b[R+3]=u[R+3]:b[R+3]=A}o.imageData=v},getUniformLocations:function(o,a){return{uMatrix:o.getUniformLocation(a,"uMatrix"),uOpaque:o.getUniformLocation(a,"uOpaque"),uHalfSize:o.getUniformLocation(a,"uHalfSize"),uSize:o.getUniformLocation(a,"uSize")}},sendUniformData:function(o,a){o.uniform1fv(a.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Grayscale=r(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(n){var o=n.imageData,a=o.data,u,l=a.length,s,h=this.mode;for(u=0;u<l;u+=4)h==="average"?s=(a[u]+a[u+1]+a[u+2])/3:h==="lightness"?s=(Math.min(a[u],a[u+1],a[u+2])+Math.max(a[u],a[u+1],a[u+2]))/2:h==="luminosity"&&(s=.21*a[u]+.72*a[u+1]+.07*a[u+2]),a[u]=s,a[u+1]=s,a[u+2]=s},retrieveShader:function(n){var o=this.type+"_"+this.mode;if(!n.programCache.hasOwnProperty(o)){var a=this.fragmentSource[this.mode];n.programCache[o]=this.createProgram(n.context,a)}return n.programCache[o]},getUniformLocations:function(n,o){return{uMode:n.getUniformLocation(o,"uMode")}},sendUniformData:function(n,o){var a=1;n.uniform1i(o.uMode,a)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Invert=r(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(n){var o=n.imageData,a=o.data,u,l=a.length;for(u=0;u<l;u+=4)a[u]=255-a[u],a[u+1]=255-a[u+1],a[u+2]=255-a[u+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,o){return{uInvert:n.getUniformLocation(o,"uInvert")}},sendUniformData:function(n,o){n.uniform1i(o.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.Image.filters,n=i.util.createClass;r.Noise=n(r.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var a=o.imageData,u=a.data,l,s=u.length,h=this.noise,d;for(l=0,s=u.length;l<s;l+=4)d=(.5-Math.random())*h,u[l]+=d,u[l+1]+=d,u[l+2]+=d}},getUniformLocations:function(o,a){return{uNoise:o.getUniformLocation(a,"uNoise"),uSeed:o.getUniformLocation(a,"uSeed")}},sendUniformData:function(o,a){o.uniform1f(a.uNoise,this.noise/255),o.uniform1f(a.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Pixelate=r(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(n){var o=n.imageData,a=o.data,u=o.height,l=o.width,s,h,d,m,v,b,w,C,x,T,A;for(h=0;h<u;h+=this.blocksize)for(d=0;d<l;d+=this.blocksize)for(s=h*4*l+d*4,m=a[s],v=a[s+1],b=a[s+2],w=a[s+3],T=Math.min(h+this.blocksize,u),A=Math.min(d+this.blocksize,l),C=h;C<T;C++)for(x=d;x<A;x++)s=C*4*l+x*4,a[s]=m,a[s+1]=v,a[s+2]=b,a[s+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(n,o){return{uBlocksize:n.getUniformLocation(o,"uBlocksize"),uStepW:n.getUniformLocation(o,"uStepW"),uStepH:n.getUniformLocation(o,"uStepH")}},sendUniformData:function(n,o){n.uniform1f(o.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.Image.filters,n=i.util.createClass;r.RemoveColor=n(r.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var a=o.imageData,u=a.data,l,s=this.distance*255,h,d,m,v=new i.Color(this.color).getSource(),b=[v[0]-s,v[1]-s,v[2]-s],w=[v[0]+s,v[1]+s,v[2]+s];for(l=0;l<u.length;l+=4)h=u[l],d=u[l+1],m=u[l+2],h>b[0]&&d>b[1]&&m>b[2]&&h<w[0]&&d<w[1]&&m<w[2]&&(u[l+3]=0)},getUniformLocations:function(o,a){return{uLow:o.getUniformLocation(a,"uLow"),uHigh:o.getUniformLocation(a,"uHigh")}},sendUniformData:function(o,a){var u=new i.Color(this.color).getSource(),l=parseFloat(this.distance),s=[0+u[0]/255-l,0+u[1]/255-l,0+u[2]/255-l,1],h=[u[0]/255+l,u[1]/255+l,u[2]/255+l,1];o.uniform4fv(a.uLow,s),o.uniform4fv(a.uHigh,h)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in n)c[o]=r(c.ColorMatrix,{type:o,matrix:n[o],mainParameter:!1,colorsOnly:!0}),i.Image.filters[o].fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric,c=i.Image.filters,r=i.util.createClass;c.BlendColor=r(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(n){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[n]+`}
}`},retrieveShader:function(n){var o=this.type+"_"+this.mode,a;return n.programCache.hasOwnProperty(o)||(a=this.buildSource(this.mode),n.programCache[o]=this.createProgram(n.context,a)),n.programCache[o]},applyTo2d:function(n){var o=n.imageData,a=o.data,u=a.length,l,s,h,d,m,v,b,w=1-this.alpha;b=new i.Color(this.color).getSource(),l=b[0]*this.alpha,s=b[1]*this.alpha,h=b[2]*this.alpha;for(var C=0;C<u;C+=4)switch(d=a[C],m=a[C+1],v=a[C+2],this.mode){case"multiply":a[C]=d*l/255,a[C+1]=m*s/255,a[C+2]=v*h/255;break;case"screen":a[C]=255-(255-d)*(255-l)/255,a[C+1]=255-(255-m)*(255-s)/255,a[C+2]=255-(255-v)*(255-h)/255;break;case"add":a[C]=d+l,a[C+1]=m+s,a[C+2]=v+h;break;case"diff":case"difference":a[C]=Math.abs(d-l),a[C+1]=Math.abs(m-s),a[C+2]=Math.abs(v-h);break;case"subtract":a[C]=d-l,a[C+1]=m-s,a[C+2]=v-h;break;case"darken":a[C]=Math.min(d,l),a[C+1]=Math.min(m,s),a[C+2]=Math.min(v,h);break;case"lighten":a[C]=Math.max(d,l),a[C+1]=Math.max(m,s),a[C+2]=Math.max(v,h);break;case"overlay":a[C]=l<128?2*d*l/255:255-2*(255-d)*(255-l)/255,a[C+1]=s<128?2*m*s/255:255-2*(255-m)*(255-s)/255,a[C+2]=h<128?2*v*h/255:255-2*(255-v)*(255-h)/255;break;case"exclusion":a[C]=l+d-2*l*d/255,a[C+1]=s+m-2*s*m/255,a[C+2]=h+v-2*h*v/255;break;case"tint":a[C]=l+d*w,a[C+1]=s+m*w,a[C+2]=h+v*w}},getUniformLocations:function(n,o){return{uColor:n.getUniformLocation(o,"uColor")}},sendUniformData:function(n,o){var a=new i.Color(this.color).getSource();a[0]=this.alpha*a[0]/255,a[1]=this.alpha*a[1]/255,a[2]=this.alpha*a[2]/255,a[3]=this.alpha,n.uniform4fv(o.uColor,a)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric,c=i.Image.filters,r=i.util.createClass;c.BlendImage=r(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(n){var o=this.type+"_"+this.mode,a=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(o)||(n.programCache[o]=this.createProgram(n.context,a)),n.programCache[o]},applyToWebGL:function(n){var o=n.context,a=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(o,a,o.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(n,o){return n.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var n=this.image,o=n._element.width,a=n._element.height;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/o,-n.top/a,1]},applyTo2d:function(n){var o=n.imageData,a=n.filterBackend.resources,u=o.data,l=u.length,s=o.width,h=o.height,d,m,v,b,w,C,x,T,A,R,P=this.image,D;a.blendImage||(a.blendImage=i.util.createCanvasElement()),A=a.blendImage,R=A.getContext("2d"),A.width!==s||A.height!==h?(A.width=s,A.height=h):R.clearRect(0,0,s,h),R.setTransform(P.scaleX,0,0,P.scaleY,P.left,P.top),R.drawImage(P._element,0,0,s,h),D=R.getImageData(0,0,s,h).data;for(var N=0;N<l;N+=4)switch(w=u[N],C=u[N+1],x=u[N+2],T=u[N+3],d=D[N],m=D[N+1],v=D[N+2],b=D[N+3],this.mode){case"multiply":u[N]=w*d/255,u[N+1]=C*m/255,u[N+2]=x*v/255,u[N+3]=T*b/255;break;case"mask":u[N+3]=b;break}},getUniformLocations:function(n,o){return{uTransformMatrix:n.getUniformLocation(o,"uTransformMatrix"),uImage:n.getUniformLocation(o,"uImage")}},sendUniformData:function(n,o){var a=this.calculateMatrix();n.uniform1i(o.uImage,1),n.uniformMatrix3fv(o.uTransformMatrix,!1,a)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(n,o){i.Image.fromObject(n.image,function(a){var u=i.util.object.clone(n);u.image=a,o(new i.Image.filters.BlendImage(u))})}}(t),function(f){var i=f.fabric||(f.fabric={}),c=Math.pow,r=Math.floor,n=Math.sqrt,o=Math.abs,a=Math.round,u=Math.sin,l=Math.ceil,s=i.Image.filters,h=i.util.createClass;s.Resize=h(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(d,m){return{uDelta:d.getUniformLocation(m,"uDelta"),uTaps:d.getUniformLocation(m,"uTaps")}},sendUniformData:function(d,m){d.uniform2fv(m.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),d.uniform1fv(m.uTaps,this.taps)},retrieveShader:function(d){var m=this.getFilterWindow(),v=this.type+"_"+m;if(!d.programCache.hasOwnProperty(v)){var b=this.generateShader(m);d.programCache[v]=this.createProgram(d.context,b)}return d.programCache[v]},getFilterWindow:function(){var d=this.tempScale;return Math.ceil(this.lanczosLobes/d)},getTaps:function(){for(var d=this.lanczosCreate(this.lanczosLobes),m=this.tempScale,v=this.getFilterWindow(),b=new Array(v),w=1;w<=v;w++)b[w-1]=d(w*m);return b},generateShader:function(d){for(var m=new Array(d),v=this.fragmentSourceTOP,d,b=1;b<=d;b++)m[b-1]=b+".0 * uDelta";return v+="uniform float uTaps["+d+`];
`,v+=`void main() {
`,v+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,v+=`  float sum = 1.0;
`,m.forEach(function(w,C){v+="  color += texture2D(uTexture, vTexCoord + "+w+") * uTaps["+C+`];
`,v+="  color += texture2D(uTexture, vTexCoord - "+w+") * uTaps["+C+`];
`,v+="  sum += 2.0 * uTaps["+C+`];
`}),v+=`  gl_FragColor = color / sum;
`,v+="}",v},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(d){d.webgl?(d.passes++,this.width=d.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=d.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),d.destinationWidth=this.dW,this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d),d.sourceWidth=d.destinationWidth,this.height=d.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),d.destinationHeight=this.dH,this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d),d.sourceHeight=d.destinationHeight):this.applyTo2d(d)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(d){return function(m){if(m>=d||m<=-d)return 0;if(m<11920929e-14&&m>-11920929e-14)return 1;m*=Math.PI;var v=m/d;return u(m)/m*u(v)/v}},applyTo2d:function(d){var m=d.imageData,v=this.scaleX,b=this.scaleY;this.rcpScaleX=1/v,this.rcpScaleY=1/b;var w=m.width,C=m.height,x=a(w*v),T=a(C*b),A;this.resizeType==="sliceHack"?A=this.sliceByTwo(d,w,C,x,T):this.resizeType==="hermite"?A=this.hermiteFastResize(d,w,C,x,T):this.resizeType==="bilinear"?A=this.bilinearFiltering(d,w,C,x,T):this.resizeType==="lanczos"&&(A=this.lanczosResize(d,w,C,x,T)),d.imageData=A},sliceByTwo:function(d,m,v,b,w){var C=d.imageData,x=.5,T=!1,A=!1,R=m*x,P=v*x,D=i.filterBackend.resources,N,K,W=0,Q=0,nt=m,k=0;for(D.sliceByTwo||(D.sliceByTwo=document.createElement("canvas")),N=D.sliceByTwo,(N.width<m*1.5||N.height<v)&&(N.width=m*1.5,N.height=v),K=N.getContext("2d"),K.clearRect(0,0,m*1.5,v),K.putImageData(C,0,0),b=r(b),w=r(w);!T||!A;)m=R,v=P,b<r(R*x)?R=r(R*x):(R=b,T=!0),w<r(P*x)?P=r(P*x):(P=w,A=!0),K.drawImage(N,W,Q,m,v,nt,k,R,P),W=nt,Q=k,k+=P;return K.getImageData(W,Q,b,w)},lanczosResize:function(d,m,v,b,w){function C(Y){var G,lt,F,O,L,j,X,V,tt,$,rt;for(k.x=(Y+.5)*P,z.x=r(k.x),G=0;G<w;G++){for(k.y=(G+.5)*D,z.y=r(k.y),L=0,j=0,X=0,V=0,tt=0,lt=z.x-W;lt<=z.x+W;lt++)if(!(lt<0||lt>=m)){$=r(1e3*o(lt-k.x)),nt[$]||(nt[$]={});for(var E=z.y-Q;E<=z.y+Q;E++)E<0||E>=v||(rt=r(1e3*o(E-k.y)),nt[$][rt]||(nt[$][rt]=R(n(c($*N,2)+c(rt*K,2))/1e3)),F=nt[$][rt],F>0&&(O=(E*m+lt)*4,L+=F,j+=F*x[O],X+=F*x[O+1],V+=F*x[O+2],tt+=F*x[O+3]))}O=(G*b+Y)*4,A[O]=j/L,A[O+1]=X/L,A[O+2]=V/L,A[O+3]=tt/L}return++Y<b?C(Y):T}var x=d.imageData.data,T=d.ctx.createImageData(b,w),A=T.data,R=this.lanczosCreate(this.lanczosLobes),P=this.rcpScaleX,D=this.rcpScaleY,N=2/this.rcpScaleX,K=2/this.rcpScaleY,W=l(P*this.lanczosLobes/2),Q=l(D*this.lanczosLobes/2),nt={},k={},z={};return C(0)},bilinearFiltering:function(d,m,v,b,w){var C,x,T,A,R,P,D,N,K,W,Q,nt,k=0,z,Y=this.rcpScaleX,G=this.rcpScaleY,lt=4*(m-1),F=d.imageData,O=F.data,L=d.ctx.createImageData(b,w),j=L.data;for(D=0;D<w;D++)for(N=0;N<b;N++)for(R=r(Y*N),P=r(G*D),K=Y*N-R,W=G*D-P,z=4*(P*m+R),Q=0;Q<4;Q++)C=O[z+Q],x=O[z+4+Q],T=O[z+lt+Q],A=O[z+lt+4+Q],nt=C*(1-K)*(1-W)+x*K*(1-W)+T*W*(1-K)+A*K*W,j[k++]=nt;return L},hermiteFastResize:function(d,m,v,b,w){for(var C=this.rcpScaleX,x=this.rcpScaleY,T=l(C/2),A=l(x/2),R=d.imageData,P=R.data,D=d.ctx.createImageData(b,w),N=D.data,K=0;K<w;K++)for(var W=0;W<b;W++){for(var Q=(W+K*b)*4,nt=0,k=0,z=0,Y=0,G=0,lt=0,F=0,O=(K+.5)*x,L=r(K*x);L<(K+1)*x;L++)for(var j=o(O-(L+.5))/A,X=(W+.5)*C,V=j*j,tt=r(W*C);tt<(W+1)*C;tt++){var $=o(X-(tt+.5))/T,rt=n(V+$*$);rt>1&&rt<-1||(nt=2*rt*rt*rt-3*rt*rt+1,nt>0&&($=4*(tt+L*m),F+=nt*P[$+3],z+=nt,P[$+3]<255&&(nt=nt*P[$+3]/250),Y+=nt*P[$],G+=nt*P[$+1],lt+=nt*P[$+2],k+=nt))}N[Q]=Y/k,N[Q+1]=G/k,N[Q+2]=lt/k,N[Q+3]=F/z}return D},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Contrast=r(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(this.contrast!==0){var o=n.imageData,a,u,l=o.data,u=l.length,s=Math.floor(this.contrast*255),h=259*(s+255)/(255*(259-s));for(a=0;a<u;a+=4)l[a]=h*(l[a]-128)+128,l[a+1]=h*(l[a+1]-128)+128,l[a+2]=h*(l[a+2]-128)+128}},getUniformLocations:function(n,o){return{uContrast:n.getUniformLocation(o,"uContrast")}},sendUniformData:function(n,o){n.uniform1f(o.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Saturation=r(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(this.saturation!==0){var o=n.imageData,a=o.data,u=a.length,l=-this.saturation,s,h;for(s=0;s<u;s+=4)h=Math.max(a[s],a[s+1],a[s+2]),a[s]+=h!==a[s]?(h-a[s])*l:0,a[s+1]+=h!==a[s+1]?(h-a[s+1])*l:0,a[s+2]+=h!==a[s+2]?(h-a[s+2])*l:0}},getUniformLocations:function(n,o){return{uSaturation:n.getUniformLocation(o,"uSaturation")}},sendUniformData:function(n,o){n.uniform1f(o.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Blur=r(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var o=n.filterBackend.resources,a,u,l=n.imageData.width,s=n.imageData.height;o.blurLayer1||(o.blurLayer1=i.util.createCanvasElement(),o.blurLayer2=i.util.createCanvasElement()),a=o.blurLayer1,u=o.blurLayer2,(a.width!==l||a.height!==s)&&(u.width=a.width=l,u.height=a.height=s);var h=a.getContext("2d"),d=u.getContext("2d"),m=15,v,b,w,C,x=this.blur*.06*.5;for(h.putImageData(n.imageData,0,0),d.clearRect(0,0,l,s),C=-m;C<=m;C++)v=(Math.random()-.5)/4,b=C/m,w=x*b*l+v,d.globalAlpha=1-Math.abs(b),d.drawImage(a,w,v),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);for(C=-m;C<=m;C++)v=(Math.random()-.5)/4,b=C/m,w=x*b*s+v,d.globalAlpha=1-Math.abs(b),d.drawImage(a,v,w),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);n.ctx.drawImage(a,0,0);var T=n.ctx.getImageData(0,0,a.width,a.height);return h.globalAlpha=1,h.clearRect(0,0,a.width,a.height),T},getUniformLocations:function(n,o){return{delta:n.getUniformLocation(o,"uDelta")}},sendUniformData:function(n,o){var a=this.chooseRightDelta();n.uniform2fv(o.delta,a)},chooseRightDelta:function(){var n=1,o=[0,0],a;return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),a=n*this.blur*.12,this.horizontal?o[0]=a:o[1]=a,o}}),c.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Gamma=r(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var o=n.imageData,a=o.data,u=this.gamma,l=a.length,s=1/u[0],h=1/u[1],d=1/u[2],m;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),m=0,l=256;m<l;m++)this.rVals[m]=Math.pow(m/255,s)*255,this.gVals[m]=Math.pow(m/255,h)*255,this.bVals[m]=Math.pow(m/255,d)*255;for(m=0,l=a.length;m<l;m+=4)a[m]=this.rVals[a[m]],a[m+1]=this.gVals[a[m+1]],a[m+2]=this.bVals[a[m+2]]},getUniformLocations:function(n,o){return{uGamma:n.getUniformLocation(o,"uGamma")}},sendUniformData:function(n,o){n.uniform3fv(o.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Composed=r(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(n)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(n,o){var a=n.subFilters||[],u=a.map(function(s){return new i.Image.filters[s.type](s)}),l=new i.Image.filters.Composed({subFilters:u});return o&&o(l),l}}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.HueRotation=r(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,o=i.util.cos(n),a=i.util.sin(n),u=1/3,l=Math.sqrt(u)*a,s=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+s/3,this.matrix[1]=u*s-l,this.matrix[2]=u*s+l,this.matrix[5]=u*s+l,this.matrix[6]=o+u*s,this.matrix[7]=u*s-l,this.matrix[10]=u*s-l,this.matrix[11]=u*s+l,this.matrix[12]=o+u*s},isNeutralState:function(n){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,n)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),cacheProperties:i.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,n){this.styles=n?n.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",n),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,n,o,a,u,l,s,h=0,d=this._textLines.length;h<d;h++)if(!(this.textAlign!=="justify"&&(h===d-1||this.isEndOfWrapping(h)))&&(a=0,u=this._textLines[h],n=this.getLineWidth(h),n<this.width&&(s=this.textLines[h].match(this._reSpacesAndTabs)))){o=s.length,r=(this.width-n)/o;for(var m=0,v=u.length;m<=v;m++)l=this.__charBounds[h][m],this._reSpaceAndTab.test(u[m])?(l.width+=r,l.kernedWidth+=r,l.left+=a,a+=r):l.left+=a}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),n=this.fontSize;return r.width+=n*r.zoomX,r.height+=n*r.zoomY,r},_render:function(r){this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,n,o){r.textBaseline="alphabetic",r.font=this._getFontDeclaration(n,o)},calcTextWidth:function(){for(var r=this.getLineWidth(0),n=1,o=this._textLines.length;n<o;n++){var a=this.getLineWidth(n);a>r&&(r=a)}return r},_renderTextLine:function(r,n,o,a,u,l){this._renderChars(r,n,o,a,u,l)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var n=0,o,a,u=r.fillStyle,l,s,h=this._getLeftOffset(),d=this._getTopOffset(),m=0,v=0,b,w,C=0,x=this._textLines.length;C<x;C++){if(o=this.getHeightOfLine(C),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",C)){n+=o;continue}l=this._textLines[C],a=this._getLineLeftOffset(C),v=0,m=0,s=this.getValueOfPropertyAt(C,0,"textBackgroundColor");for(var T=0,A=l.length;T<A;T++)b=this.__charBounds[C][T],w=this.getValueOfPropertyAt(C,T,"textBackgroundColor"),w!==s?(r.fillStyle=s,s&&r.fillRect(h+a+m,d+n,v,o/this.lineHeight),m=b.left,v=b.width,s=w):v+=b.kernedWidth;w&&(r.fillStyle=w,r.fillRect(h+a+m,d+n,v,o/this.lineHeight)),n+=o}r.fillStyle=u,this._removeShadow(r)}},getFontCache:function(r){var n=r.fontFamily.toLowerCase();i.charWidthsCache[n]||(i.charWidthsCache[n]={});var o=i.charWidthsCache[n],a=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return o[a]||(o[a]={}),o[a]},_applyCharStyles:function(r,n,o,a,u){this._setFillStyles(n,u),this._setStrokeStyles(n,u),n.font=this._getFontDeclaration(u)},_measureChar:function(r,n,o,a){var u=this.getFontCache(n),l=this._getFontDeclaration(n),s=this._getFontDeclaration(a),h=o+r,d=l===s,m,v,b,w=n.fontSize/this.CACHE_FONT_SIZE,C;if(o&&u[o]!==void 0&&(b=u[o]),u[r]!==void 0&&(C=m=u[r]),d&&u[h]!==void 0&&(v=u[h],C=v-b),m===void 0||b===void 0||v===void 0){var x=this.getMeasuringContext();this._setTextStyles(x,n,!0)}return m===void 0&&(C=m=x.measureText(r).width,u[r]=m),b===void 0&&d&&o&&(b=x.measureText(o).width,u[o]=b),d&&v===void 0&&(v=x.measureText(h).width,u[h]=v,C=v-b),{width:m*w,kernedWidth:C*w}},getHeightOfChar:function(r,n){return this.getValueOfPropertyAt(r,n,"fontSize")},measureLine:function(r){var n=this._measureLine(r);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n},_measureLine:function(r){var n=0,o,a,u=this._textLines[r],l,s,h=0,d=new Array(u.length);for(this.__charBounds[r]=d,o=0;o<u.length;o++)a=u[o],s=this._getGraphemeBox(a,r,o,l),d[o]=s,n+=s.kernedWidth,l=a;return d[o]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:n,numOfSpaces:h}},_getGraphemeBox:function(r,n,o,a,u){var l=this.getCompleteStyleDeclaration(n,o),s=a?this.getCompleteStyleDeclaration(n,o-1):{},h=this._measureChar(r,l,a,s),d=h.kernedWidth,m=h.width,v;this.charSpacing!==0&&(v=this._getWidthOfCharSpacing(),m+=v,d+=v);var b={width:m,left:0,height:l.fontSize,kernedWidth:d,deltaY:l.deltaY};if(o>0&&!u){var w=this.__charBounds[n][o-1];b.left=w.left+w.width+h.kernedWidth-h.width}return b},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var n=this._textLines[r],o=this.getHeightOfChar(r,0),a=1,u=n.length;a<u;a++)o=Math.max(this.getHeightOfChar(r,a),o);return this.__lineHeights[r]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,n=0,o=0,a=this._textLines.length;o<a;o++)r=this.getHeightOfLine(o),n+=o===a-1?r/this.lineHeight:r;return n},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_applyPatternGradientTransform:function(r,n){if(!n||!n.toLive)return{offsetX:0,offsetY:0};var o=-this.width/2+n.offsetX||0,a=-this.height/2+n.offsetY||0;return r.transform(1,0,0,1,o,a),{offsetX:o,offsetY:a}},_renderTextCommon:function(r,n){r.save();for(var o=0,a=this._getLeftOffset(),u=this._getTopOffset(),l=this._applyPatternGradientTransform(r,n==="fillText"?this.fill:this.stroke),s=0,h=this._textLines.length;s<h;s++){var d=this.getHeightOfLine(s),m=d/this.lineHeight,v=this._getLineLeftOffset(s);this._renderTextLine(n,r,this._textLines[s],a+v-l.offsetX,u+o+m-l.offsetY,s),o+=d}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,n,o,a,u,l){var s=this.getHeightOfLine(l),h=this.textAlign.indexOf("justify")!==-1,d,m,v="",b,w=0,C,x=!h&&this.charSpacing===0&&this.isEmptyStyles(l);if(n.save(),u-=s*this._fontSizeFraction/this.lineHeight,x){this._renderChar(r,n,l,0,this.textLines[l],a,u,s),n.restore();return}for(var T=0,A=o.length-1;T<=A;T++)C=T===A||this.charSpacing,v+=o[T],b=this.__charBounds[l][T],w===0?(a+=b.kernedWidth-b.width,w+=b.width):w+=b.kernedWidth,h&&!C&&this._reSpaceAndTab.test(o[T])&&(C=!0),C||(d=d||this.getCompleteStyleDeclaration(l,T),m=this.getCompleteStyleDeclaration(l,T+1),C=this._hasStyleChanged(d,m)),C&&(this._renderChar(r,n,l,T,v,a,u,s),v="",d=m,a+=w,w=0);n.restore()},_renderChar:function(r,n,o,a,u,l,s){var h=this._getStyleDeclaration(o,a),d=this.getCompleteStyleDeclaration(o,a),m=r==="fillText"&&d.fill,v=r==="strokeText"&&d.stroke&&d.strokeWidth;!v&&!m||(h&&n.save(),this._applyCharStyles(r,n,o,a,d),h&&h.textBackgroundColor&&this._removeShadow(n),h&&h.deltaY&&(s+=h.deltaY),m&&n.fillText(u,l,s),v&&n.strokeText(u,l,s),h&&n.restore())},setSuperscript:function(r,n){return this._setScript(r,n,this.superscript)},setSubscript:function(r,n){return this._setScript(r,n,this.subscript)},_setScript:function(r,n,o){var a=this.get2DCursorLocation(r,!0),u=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),l=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),s={fontSize:u*o.size,deltaY:l+u*o.baseline};return this.setSelectionStyles(s,r,n),this},_hasStyleChanged:function(r,n){return r.fill!==n.fill||r.stroke!==n.stroke||r.strokeWidth!==n.strokeWidth||r.fontSize!==n.fontSize||r.fontFamily!==n.fontFamily||r.fontWeight!==n.fontWeight||r.fontStyle!==n.fontStyle||r.deltaY!==n.deltaY},_hasStyleChangedForSvg:function(r,n){return this._hasStyleChanged(r,n)||r.overline!==n.overline||r.underline!==n.underline||r.linethrough!==n.linethrough},_getLineLeftOffset:function(r){var n=this.getLineWidth(r);return this.textAlign==="center"?(this.width-n)/2:this.textAlign==="right"?this.width-n:this.textAlign==="justify-center"&&this.isEndOfWrapping(r)?(this.width-n)/2:this.textAlign==="justify-right"&&this.isEndOfWrapping(r)?this.width-n:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r])return this.__lineWidths[r];var n,o=this._textLines[r],a;return o===""?n=0:(a=this.measureLine(r),n=a.width),this.__lineWidths[r]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,n,o){var a=this._getStyleDeclaration(r,n);return a&&typeof a[o]!="undefined"?a[o]:this[o]},_renderTextDecoration:function(r,n){if(!(!this[n]&&!this.styleHas(n))){for(var o,a,u,l,s,h,d,m,v=this._getLeftOffset(),b=this._getTopOffset(),w,C,x,T,A,R,P,D,N=this._getWidthOfCharSpacing(),K=0,W=this._textLines.length;K<W;K++){if(o=this.getHeightOfLine(K),!this[n]&&!this.styleHas(n,K)){b+=o;continue}d=this._textLines[K],R=o/this.lineHeight,l=this._getLineLeftOffset(K),C=0,x=0,m=this.getValueOfPropertyAt(K,0,n),D=this.getValueOfPropertyAt(K,0,"fill"),w=b+R*(1-this._fontSizeFraction),a=this.getHeightOfChar(K,0),s=this.getValueOfPropertyAt(K,0,"deltaY");for(var Q=0,nt=d.length;Q<nt;Q++)T=this.__charBounds[K][Q],A=this.getValueOfPropertyAt(K,Q,n),P=this.getValueOfPropertyAt(K,Q,"fill"),u=this.getHeightOfChar(K,Q),h=this.getValueOfPropertyAt(K,Q,"deltaY"),(A!==m||P!==D||u!==a||h!==s)&&x>0?(r.fillStyle=D,m&&D&&r.fillRect(v+l+C,w+this.offsets[n]*a+s,x,this.fontSize/15),C=T.left,x=T.width,m=A,D=P,a=u,s=h):x+=T.kernedWidth;r.fillStyle=P,A&&P&&r.fillRect(v+l+C,w+this.offsets[n]*a+s,x-N,this.fontSize/15),b+=o}this._removeShadow(r)}},_getFontDeclaration:function(r,n){var o=r||this,a=this.fontFamily,u=i.Text.genericFonts.indexOf(a.toLowerCase())>-1,l=a===void 0||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||u?o.fontFamily:'"'+o.fontFamily+'"';return[i.isLikelyNode?o.fontWeight:o.fontStyle,i.isLikelyNode?o.fontStyle:o.fontWeight,n?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",l].join(" ")},render:function(r){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r))},_splitTextIntoLines:function(r){for(var n=r.split(this._reNewline),o=new Array(n.length),a=[`
`],u=[],l=0;l<n.length;l++)o[l]=i.util.string.graphemeSplit(n[l]),u=u.concat(o[l],a);return u.pop(),{_unwrappedLines:o,lines:n,graphemeText:u,graphemeLines:o}},toObject:function(r){var n=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(r),o=this.callSuper("toObject",n);return o.styles=c(this.styles,!0),o},set:function(r,n){this.callSuper("set",r,n);var o=!1;if(typeof r=="object")for(var a in r)o=o||this._dimensionAffectingProps.indexOf(a)!==-1;else o=this._dimensionAffectingProps.indexOf(r)!==-1;return o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(r,n,o){if(!r)return n(null);var a=i.parseAttributes(r,i.Text.ATTRIBUTE_NAMES),u=a.textAnchor||"left";if(o=i.util.object.extend(o?c(o):{},a),o.top=o.top||0,o.left=o.left||0,a.textDecoration){var l=a.textDecoration;l.indexOf("underline")!==-1&&(o.underline=!0),l.indexOf("overline")!==-1&&(o.overline=!0),l.indexOf("line-through")!==-1&&(o.linethrough=!0),delete o.textDecoration}"dx"in a&&(o.left+=a.dx),"dy"in a&&(o.top+=a.dy),"fontSize"in o||(o.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var s="";"textContent"in r?s=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(s=r.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var h=o.strokeWidth;o.strokeWidth=0;var d=new i.Text(s,o),m=d.getScaledHeight()/d.height,v=(d.height+d.strokeWidth)*d.lineHeight-d.height,b=v*m,w=d.getScaledHeight()+b,C=0;u==="center"&&(C=d.getScaledWidth()/2),u==="right"&&(C=d.getScaledWidth()),d.set({left:d.left-C,top:d.top-(w-d.fontSize*(.07+d._fontSizeFraction))/d.lineHeight,strokeWidth:typeof h!="undefined"?h:1}),n(d)},i.Text.fromObject=function(r,n){return i.Object._fromObject("Text",r,n,"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f!="undefined"&&!this.styles[f])return!0;var i=typeof f=="undefined"?this.styles:{line:this.styles[f]};for(var c in i)for(var r in i[c])for(var n in i[c][r])return!1;return!0},styleHas:function(f,i){if(!this.styles||!f||f===""||typeof i!="undefined"&&!this.styles[i])return!1;var c=typeof i=="undefined"?this.styles:{0:this.styles[i]};for(var r in c)for(var n in c[r])if(typeof c[r][n][f]!="undefined")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var i=this.styles,c=0,r,n,o=!0,a=0,u;for(var l in i){r=0;for(var s in i[l]){var u=i[l][s],h=u.hasOwnProperty(f);c++,h?(n?u[f]!==n&&(o=!1):n=u[f],u[f]===this[f]&&delete u[f]):o=!1,Object.keys(u).length!==0?r++:delete i[l][s]}r===0&&delete i[l]}for(var d=0;d<this._textLines.length;d++)a+=this._textLines[d].length;o&&c===a&&(this[f]=n,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var i=this.styles,c,r,n;for(r in i){c=i[r];for(n in c)delete c[n][f],Object.keys(c[n]).length===0&&delete c[n];Object.keys(c).length===0&&delete i[r]}}},_extendStyles:function(f,i){var c=this.get2DCursorLocation(f);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),i)},get2DCursorLocation:function(f,i){typeof f=="undefined"&&(f=this.selectionStart);for(var c=i?this._unwrappedTextLines:this._textLines,r=c.length,n=0;n<r;n++){if(f<=c[n].length)return{lineIndex:n,charIndex:f};f-=c[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:c[n-1].length<f?c[n-1].length:f}},getSelectionStyles:function(f,i,c){typeof f=="undefined"&&(f=this.selectionStart||0),typeof i=="undefined"&&(i=this.selectionEnd||f);for(var r=[],n=f;n<i;n++)r.push(this.getStyleAtPosition(n,c));return r},getStyleAtPosition:function(f,i){var c=this.get2DCursorLocation(f),r=i?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return r||{}},setSelectionStyles:function(f,i,c){typeof i=="undefined"&&(i=this.selectionStart||0),typeof c=="undefined"&&(c=this.selectionEnd||i);for(var r=i;r<c;r++)this._extendStyles(r,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,i){var c=this.styles&&this.styles[f];return c?c[i]:null},getCompleteStyleDeclaration:function(f,i){for(var c=this._getStyleDeclaration(f,i)||{},r={},n,o=0;o<this._styleProperties.length;o++)n=this._styleProperties[o],r[n]=typeof c[n]=="undefined"?this[n]:c[n];return r},_setStyleDeclaration:function(f,i,c){this.styles[f][i]=c},_deleteStyleDeclaration:function(f,i){delete this.styles[f][i]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,c){this.callSuper("initialize",i,c),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,c){this[i]!==c&&(this._fireSelectionChanged(),this[i]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,r=this.canvas.viewportTransform;c.save(),c.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(c),this.transformMatrix&&c.transform.apply(c,this.transformMatrix),this._clearTextArea(c),i||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,c):this.renderSelection(i,c),c.restore()}},_clearTextArea:function(i){var c=this.width+4,r=this.height+4;i.clearRect(-c/2,-r/2,c,r)},_getCursorBoundaries:function(i){typeof i=="undefined"&&(i=this.selectionStart);var c=this._getLeftOffset(),r=this._getTopOffset(),n=this._getCursorBoundariesOffsets(i);return{left:c,top:r,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,r,n,o=0,a=0,u,l=this.get2DCursorLocation(i);n=l.charIndex,r=l.lineIndex;for(var s=0;s<r;s++)o+=this.getHeightOfLine(s);c=this._getLineLeftOffset(r);var h=this.__charBounds[r][n];return h&&(a=h.left),this.charSpacing!==0&&n===this._textLines[r].length&&(a-=this._getWidthOfCharSpacing()),u={top:o,left:c+(a>0?a:0)},this.cursorOffsetCache=u,this.cursorOffsetCache},renderCursor:function(i,c){var r=this.get2DCursorLocation(),n=r.lineIndex,o=r.charIndex>0?r.charIndex-1:0,a=this.getValueOfPropertyAt(n,o,"fontSize"),u=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/u,s=i.topOffset,h=this.getValueOfPropertyAt(n,o,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,c),c.fillStyle=this.getValueOfPropertyAt(n,o,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(i.left+i.leftOffset-l/2,s+i.top+h,l,a)},renderSelection:function(i,c){for(var r=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,a=this.get2DCursorLocation(r),u=this.get2DCursorLocation(n),l=a.lineIndex,s=u.lineIndex,h=a.charIndex<0?0:a.charIndex,d=u.charIndex<0?0:u.charIndex,m=l;m<=s;m++){var v=this._getLineLeftOffset(m)||0,b=this.getHeightOfLine(m),w=0,C=0,x=0;if(m===l&&(C=this.__charBounds[l][h].left),m>=l&&m<s)x=o&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===s)if(d===0)x=this.__charBounds[s][d].left;else{var T=this._getWidthOfCharSpacing();x=this.__charBounds[s][d-1].left+this.__charBounds[s][d-1].width-T}w=b,(this.lineHeight<1||m===s&&this.lineHeight>1)&&(b/=this.lineHeight),this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",c.fillRect(i.left+v+C,i.top+i.topOffset+b,x-C,1)):(c.fillStyle=this.selectionColor,c.fillRect(i.left+v+C,i.top+i.topOffset,x-C,b)),i.topOffset+=w}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),c=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c}}}),e.IText.fromObject=function(i,c){if(f(i),i.styles)for(var r in i.styles)for(var n in i.styles[r])f(i.styles[r][n]);e.Object._fromObject("IText",i,c,"text")}}(),function(){var f=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var c=i.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,i._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var c=i.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,i),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,i._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,c,r,n){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",c,{duration:r,onComplete:function(){o.isAborted||i[n]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var c=this,r=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},r)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var c=0,r=i-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)c++,r--;for(;/\S/.test(this._text[r])&&r>-1;)c++,r--;return i-c},findWordBoundaryRight:function(i){var c=0,r=i;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)c++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)c++,r++;return i+c},findLineBoundaryLeft:function(i){for(var c=0,r=i-1;!/\n/.test(this._text[r])&&r>-1;)c++,r--;return i-c},findLineBoundaryRight:function(i){for(var c=0,r=i;!/\n/.test(this._text[r])&&r<this._text.length;)c++,r++;return i+c},searchWordBoundary:function(i,c){for(var r=this._text,n=this._reSpace.test(r[i])?i-1:i,o=r[n],a=e.reNonWord;!a.test(o)&&n>0&&n<r.length;)n+=c,o=r[n];return a.test(o)&&(n+=c===1?0:1),n},selectWord:function(i){i=i||this.selectionStart;var c=this.searchWordBoundary(i,-1),r=this.searchWordBoundary(i,1);this.selectionStart=c,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var c=this.findLineBoundaryLeft(i),r=this.findLineBoundaryRight(i);return this.selectionStart=c,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){var c=this.getSelectionStartFromPointer(i.e),r=this.selectionStart,n=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||r===n)&&(r===c||n===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==r||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,c,r){var n=r.slice(0,i),o=e.util.string.graphemeSplit(n).length;if(i===c)return{selectionStart:o,selectionEnd:o};var a=r.slice(i,c),u=e.util.string.graphemeSplit(a).length;return{selectionStart:o,selectionEnd:o+u}},fromGraphemeToStringSelection:function(i,c,r){var n=r.slice(0,i),o=n.join("").length;if(i===c)return{selectionStart:o,selectionEnd:o};var a=r.slice(i,c),u=a.join("").length;return{selectionStart:o,selectionEnd:o+u}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(i),r=this.get2DCursorLocation(i),n=r.lineIndex,o=r.charIndex,a=this.getValueOfPropertyAt(n,o,"fontSize")*this.lineHeight,u=c.leftOffset,l=this.calcTransformMatrix(),s={x:c.left+u,y:c.top+c.topOffset+a},h=this.canvas.getRetinaScaling(),d=this.canvas.upperCanvasEl,m=d.width/h,v=d.height/h,b=m-a,w=v-a,C=d.clientWidth/m,x=d.clientHeight/v;return s=e.util.transformPoint(s,l),s=e.util.transformPoint(s,this.canvas.viewportTransform),s.x*=C,s.y*=x,s.x<0&&(s.x=0),s.x>b&&(s.x=b),s.y<0&&(s.y=0),s.y>w&&(s.y=w),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,c){var r=this.get2DCursorLocation(i,!0),n=this.get2DCursorLocation(c,!0),o=r.lineIndex,a=r.charIndex,u=n.lineIndex,l=n.charIndex,s,h;if(o!==u){if(this.styles[o])for(s=a;s<this._unwrappedTextLines[o].length;s++)delete this.styles[o][s];if(this.styles[u])for(s=l;s<this._unwrappedTextLines[u].length;s++)h=this.styles[u][s],h&&(this.styles[o]||(this.styles[o]={}),this.styles[o][a+s-l]=h);for(s=o+1;s<=u;s++)delete this.styles[s];this.shiftLineStyles(u,o-u)}else if(this.styles[o]){h=this.styles[o];var d=l-a,m,v;for(s=a;s<l;s++)delete h[s];for(v in this.styles[o])m=parseInt(v,10),m>=l&&(h[m-d]=h[v],delete h[v])}},shiftLineStyles:function(i,c){var r=f(this.styles);for(var n in this.styles){var o=parseInt(n,10);o>i&&(this.styles[o+c]=r[o],r[o-c]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,c,r,n){var o,a={},u=!1;r||(r=1),this.shiftLineStyles(i,r),this.styles[i]&&(o=this.styles[i][c===0?c:c-1]);for(var l in this.styles[i]){var s=parseInt(l,10);s>=c&&(u=!0,a[s-c]=this.styles[i][l],delete this.styles[i][l])}for(u?this.styles[i+r]=a:delete this.styles[i+r];r>1;)r--,n&&n[r]?this.styles[i+r]={0:f(n[r])}:o?this.styles[i+r]={0:f(o)}:delete this.styles[i+r];this._forceClearCache=!0},insertCharStyleObject:function(i,c,r,n){this.styles||(this.styles={});var o=this.styles[i],a=o?f(o):{};r||(r=1);for(var u in a){var l=parseInt(u,10);l>=c&&(o[l+r]=a[l],a[l-r]||delete o[l])}if(this._forceClearCache=!0,n){for(;r--;)!Object.keys(n[r]).length||(this.styles[i]||(this.styles[i]={}),this.styles[i][c+r]=f(n[r]));return}if(!!o)for(var s=o[c?c-1:1];s&&r--;)this.styles[i][c+r]=f(s)},insertNewStyleBlock:function(i,c,r){for(var n=this.get2DCursorLocation(c,!0),o=[0],a=0,u=0;u<i.length;u++)i[u]===`
`?(a++,o[a]=0):o[a]++;o[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,o[0],r),r=r&&r.slice(o[0]+1)),a&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+o[0],a);for(var u=1;u<a;u++)o[u]>0?this.insertCharStyleObject(n.lineIndex+u,0,o[u],r):r&&(this.styles[n.lineIndex+u][0]=r[0]),r=r&&r.slice(o[u]+1);o[u]>0&&this.insertCharStyleObject(n.lineIndex+u,0,o[u],r)},setSelectionStartEndWithShift:function(i,c,r){r<=i?(c===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=r):r>i&&r<c?this._selectionDirection==="right"?this.selectionEnd=r:this.selectionStart=r:(c===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=r)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(!!this.canvas){this.__newClickTime=+new Date;var i=f.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(f.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var i=this.getSelectionStartFromPointer(f),c=this.selectionStart,r=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(c,r,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var i=this.getLocalPointer(f),c=0,r=0,n=0,o=0,a=0,u,l,s=0,h=this._textLines.length;s<h&&n<=i.y;s++)n+=this.getHeightOfLine(s)*this.scaleY,a=s,s>0&&(o+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));u=this._getLineLeftOffset(a),r=u*this.scaleX,l=this._textLines[a];for(var d=0,m=l.length;d<m&&(c=r,r+=this.__charBounds[a][d].kernedWidth*this.scaleX,r<=i.x);d++)o++;return this._getNewSelectionStartFromOffset(i,c,r,o,m)},_getNewSelectionStartFromOffset:function(f,i,c,r,n){var o=f.x-i,a=c-f.x,u=a>o||a<0?0:1,l=r+u;return this.flipX&&(l=n-l),l>this._text.length&&(l=this._text.length),l}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+f.fontSize+";",e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(!(!this.isEditing||this.inCompositionMode)){if(f.keyCode in this.keysMap)this[this.keysMap[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var i=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,r=this._text.length,n=c.length,o,a,u=n-r;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var l=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),s=this.selectionStart>l.selectionStart;this.selectionStart!==this.selectionEnd?(o=this._text.slice(this.selectionStart,this.selectionEnd),u+=this.selectionEnd-this.selectionStart):n<r&&(s?o=this._text.slice(this.selectionEnd+u,this.selectionEnd):o=this._text.slice(this.selectionStart,this.selectionStart-u)),a=c.slice(l.selectionEnd-u,l.selectionEnd),o&&o.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):s?this.removeStyleFromTo(this.selectionEnd-o.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+o.length)),a.length&&(i&&a.join("")===e.copiedText&&!e.disableStyleCopyPaste?this.insertNewStyleBlock(a,this.selectionStart,e.copiedTextStyle):this.insertNewStyleBlock(a,this.selectionStart)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(f,i){var c=this._getLineLeftOffset(f),r;return i>0&&(r=this.__charBounds[f][i-1],c+=r.left+r.width),c},getDownCursorOffset:function(f,i){var c=this._getSelectionForOffset(f,i),r=this.get2DCursorLocation(c),n=r.lineIndex;if(n===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-c;var o=r.charIndex,a=this._getWidthBeforeCursor(n,o),u=this._getIndexOnLine(n+1,a),l=this._textLines[n].slice(o);return l.length+u+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(f,i){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,i){var c=this._getSelectionForOffset(f,i),r=this.get2DCursorLocation(c),n=r.lineIndex;if(n===0||f.metaKey||f.keyCode===33)return-c;var o=r.charIndex,a=this._getWidthBeforeCursor(n,o),u=this._getIndexOnLine(n-1,a),l=this._textLines[n].slice(0,o),s=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+u-l.length+(1-s)},_getIndexOnLine:function(f,i){for(var c=this._textLines[f],r=this._getLineLeftOffset(f),n=r,o=0,a,u,l=0,s=c.length;l<s;l++)if(a=this.__charBounds[f][l].width,n+=a,n>i){u=!0;var h=n-a,d=n,m=Math.abs(h-i),v=Math.abs(d-i);o=v<m?l:l-1;break}return u||(o=c.length-1),o},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,i){var c="get"+f+"CursorOffset",r=this[c](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var i=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,i,c){var r;if(f.altKey)r=this["findWordBoundary"+c](this[i]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)r=this["findLineBoundary"+c](this[i]);else return this[i]+=c==="Left"?-1:1,!0;if(typeof r!==void 0&&this[i]!==r)return this[i]=r,!0},_moveLeft:function(f,i){return this._move(f,i,"Left")},_moveRight:function(f,i){return this._move(f,i,"Right")},moveCursorLeftWithoutShift:function(f){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,i){var c="moveCursor"+f+"With";this._currentCursorOpacity=1,i.shiftKey?c+="Shift":c+="outShift",this[c](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(f,i){typeof i=="undefined"&&(i=f+1),this.removeStyleFromTo(f,i),this._text.splice(f,i-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,i,c,r){typeof r=="undefined"&&(r=c),r>c&&this.removeStyleFromTo(c,r);var n=e.util.string.graphemeSplit(f);this.insertNewStyleBlock(n,c,i),this._text=[].concat(this._text.slice(0,c),n,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=e.util.toFixed,i=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),r=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(r)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var r=!0,n=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(r),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,r){var n=[],o=[],a=c,u;this._setSVGBg(o);for(var l=0,s=this._textLines.length;l<s;l++)u=this._getLineLeftOffset(l),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(o,l,r+u,a),this._setSVGTextLineText(n,l,r+u,a),a+=this.getHeightOfLine(l);return{textSpans:n,textBgRects:o}},_createTextCharSpan:function(c,r,n,o){var a=c!==c.trim()||c.match(i),u=this.getSvgSpanStyles(r,a),l=u?'style="'+u+'"':"",s=r.deltaY,h="",d=e.Object.NUM_FRACTION_DIGITS;return s&&(h=' dy="'+f(s,d)+'" '),['<tspan x="',f(n,d),'" y="',f(o,d),'" ',h,l,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,r,n,o){var a=this.getHeightOfLine(r),u=this.textAlign.indexOf("justify")!==-1,l,s,h="",d,m,v=0,b=this._textLines[r],w;o+=a*(1-this._fontSizeFraction)/this.lineHeight;for(var C=0,x=b.length-1;C<=x;C++)w=C===x||this.charSpacing,h+=b[C],d=this.__charBounds[r][C],v===0?(n+=d.kernedWidth-d.width,v+=d.width):v+=d.kernedWidth,u&&!w&&this._reSpaceAndTab.test(b[C])&&(w=!0),w||(l=l||this.getCompleteStyleDeclaration(r,C),s=this.getCompleteStyleDeclaration(r,C+1),w=this._hasStyleChangedForSvg(l,s)),w&&(m=this._getStyleDeclaration(r,C)||{},c.push(this._createTextCharSpan(h,m,n,o)),h="",l=s,n+=v,v=0)},_pushTextBgRect:function(c,r,n,o,a,u){var l=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(r),' x="',f(n,l),'" y="',f(o,l),'" width="',f(a,l),'" height="',f(u,l),`"></rect>
`)},_setSVGTextLineBg:function(c,r,n,o){for(var a=this._textLines[r],u=this.getHeightOfLine(r)/this.lineHeight,l=0,s=0,h,d,m=this.getValueOfPropertyAt(r,0,"textBackgroundColor"),v=0,b=a.length;v<b;v++)h=this.__charBounds[r][v],d=this.getValueOfPropertyAt(r,v,"textBackgroundColor"),d!==m?(m&&this._pushTextBgRect(c,m,n+s,o,l,u),s=h.left,l=h.width,m=d):l+=h.kernedWidth;d&&this._pushTextBgRect(c,d,n+s,o,l,u)},_getFillAttributes:function(c){var r=c&&typeof c=="string"?new e.Color(c):"";return!r||!r.getSource()||r.getAlpha()===1?'fill="'+c+'"':'opacity="'+r.getAlpha()+'" fill="'+r.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var r=0,n=0,o=0;o<c;o++)r+=this.getHeightOfLine(o);return n=this.getHeightOfLine(o),{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var r=e.Object.prototype.getSvgStyles.call(this,c);return r+" white-space: pre;"}})}(),function(f){var i=f.fabric||(f.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var r=0,n=0,o=0,a={},u=0;u<c.graphemeLines.length;u++)c.graphemeText[o]===`
`&&u>0?(n=0,o++,r++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[o])&&u>0&&(n++,o++),a[u]={line:r,offset:n},o+=c.graphemeLines[u].length,n+=c.graphemeLines[u].length;return a},styleHas:function(c,r){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[r];n&&(r=n.line)}return i.Text.prototype.styleHas.call(this,c,r)},isEmptyStyles:function(c){if(!this.styles)return!0;var r=0,n=c+1,o,a,u=!1,l=this._styleMap[c],s=this._styleMap[c+1];l&&(c=l.line,r=l.offset),s&&(n=s.line,u=n===c,o=s.offset),a=typeof c=="undefined"?this.styles:{line:this.styles[c]};for(var h in a)for(var d in a[h])if(d>=r&&(!u||d<o))for(var m in a[h][d])return!1;return!0},_getStyleDeclaration:function(c,r){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[c];if(!n)return null;c=n.line,r=n.offset+r}return this.callSuper("_getStyleDeclaration",c,r)},_setStyleDeclaration:function(c,r,n){var o=this._styleMap[c];c=o.line,r=o.offset+r,this.styles[c][r]=n},_deleteStyleDeclaration:function(c,r){var n=this._styleMap[c];c=n.line,r=n.offset+r,delete this.styles[c][r]},_getLineStyle:function(c){var r=this._styleMap[c];return!!this.styles[r.line]},_setLineStyle:function(c){var r=this._styleMap[c];this.styles[r.line]={}},_wrapText:function(c,r){var n=[],o;for(this.isWrapping=!0,o=0;o<c.length;o++)n=n.concat(this._wrapLine(c[o],o,r));return this.isWrapping=!1,n},_measureWord:function(c,r,n){var o=0,a,u=!0;n=n||0;for(var l=0,s=c.length;l<s;l++){var h=this._getGraphemeBox(c[l],r,l+n,a,u);o+=h.kernedWidth,a=c[l]}return o},_wrapLine:function(c,r,n,o){var a=0,u=this.splitByGrapheme,l=[],s=[],h=u?i.util.string.graphemeSplit(c):c.split(this._wordJoiners),d="",m=0,v=u?"":" ",b=0,w=0,C=0,x=!0,T=u?0:this._getWidthOfCharSpacing(),o=o||0;h.length===0&&h.push([]),n-=o;for(var A=0;A<h.length;A++)d=u?h[A]:i.util.string.graphemeSplit(h[A]),b=this._measureWord(d,r,m),m+=d.length,a+=w+b-T,a>=n&&!x?(l.push(s),s=[],a=b,x=!0):a+=T,!x&&!u&&s.push(v),s=s.concat(d),w=this._measureWord([v],r,m),m++,x=!1,b>C&&(C=b);return A&&l.push(s),C+o>this.dynamicMinWidth&&(this.dynamicMinWidth=C-T+o),l},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var r=i.Text.prototype._splitTextIntoLines.call(this,c),n=this._wrapText(r.lines,this.width),o=new Array(n.length),a=0;a<n.length;a++)o[a]=n[a].join("");return r.lines=o,r.graphemeLines=n,r},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var r in this._styleMap)this._textLines[r]&&(c[this._styleMap[r].line]=1);for(var r in this.styles)c[r]||delete this.styles[r]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),i.Textbox.fromObject=function(c,r){return i.Object._fromObject("Textbox",c,r,"text")}}(t)})(Lt);const St={w:140,h:40,bgColor:["#78c386","#e48484","#c28976"],lineColor:"#69b1e4",textColor:"white",fontSize:16,origin:"center",infoBg:"#595959",fontFamily:" Helvetica, 'Hiragino Sans GB', 'Microsoft Yahei', '\u5FAE\u8F6F\u96C5\u9ED1', Arial, sans-serif"};function hd(){const t=`\u2705 \u524D\u7AEF\u5FC5\u987B\u8981\u5B66\u7684\u77E5\u8BC6 \u9700\u8981\u7EC3\u4E60
\u{1F525} \u63A8\u8350\u7684\u6280\u672F\uFF0C\u8FDB\u9636\u5FC5\u5907\uFF0C\u9700\u8981\u6DF1\u5165\u7814\u7A76
\u2B50 \u53EF\u4EE5\u5148\u6536\u85CF\u8D77\u6765\uFF0C\u7528\u5230\u7684\u65F6\u5019\u518D\u5B66\u7684\u6280\u672F
\u274C \u4E2A\u4EBA\u4E0D\u63A8\u8350\u6216\u8005\u8FC7\u65F6\u7684\u6280\u672F`,e=35,g=20,p=280,_=100,{textColor:y,fontSize:S,origin:f,infoBg:i}=St,c=new Lt.fabric.Rect({fill:i,originX:f,originY:f,rx:"5",shadow:"rgba(0,0,0,.2) 2px 2px 2px",width:p,height:_}),r=new Lt.fabric.Text(t,{fill:y,originY:f,originX:f,fontWeight:"500",lineHeight:1.5,fontSize:12,fontFamily:St.fontFamily});return new Lt.fabric.Group([c,r],{left:e,top:g,lockMovementX:!0,lockMovementY:!0})}function ud(t){const e=`\u5173\u6CE8\u516C\u4F17\u53F7\uFF0C\u5B66\u4E60\u4E0D\u8FF7\u8DEF
\u6765\u6E90:https://shengxinjing.cn
\u597D\u597D\u5B66\u4E60\uFF0C\u5929\u5929\u5411\u4E0A`,g=20,p=300,_=100,{textColor:y,fontSize:S,origin:f}=St;Lt.fabric.Image.fromURL("/qrcode.jpeg",i=>{i.set({left:810,top:30,opacity:.8,scaleX:.32,scaleY:.32});const c=new Lt.fabric.Rect({fill:St.infoBg,originX:f,originY:f,rx:"5",shadow:"rgba(0,0,0,.2) 2px 2px 2px",width:p,height:_}),r=new Lt.fabric.Text(e,{fill:y,left:15,originY:f,originX:"right",fontWeight:"500",lineHeight:1.5,fontSize:12,fontFamily:St.fontFamily}),n=new Lt.fabric.Group([c,r],{left:600,top:g,lockMovementX:!0,lockMovementY:!0});t.add(n),t.add(i)})}function fd(t,e){const g=[];let p;e=e.filter(y=>y.show!==!1),t.title=e[0].title;for(let y=1;y<e.length;y++)e[y].x=e[y-1].x+(e[y].x||0),e[y].y=e[y-1].y+(e[y].y||150);t.height=e[e.length-1].y+40+20;let _=new Lt.fabric.Canvas(t,{containerClass:"roadmap-container",hoverCursor:"pointer",interactive:!1,selection:!1});return _.add(hd()),ud(_),e.forEach(y=>{const S=Sa(y,_);S.link=y.link,p&&g.push(dd(p,S)),p=S;const{left:f,right:i}=y;c(S,f,"left",1),c(S,i,"right",1);function c(r,n,o,a){if(!n||!n.length)return;typeof n=="string"&&(n=[n]),n=n.map(s=>gd(...s));const u=n.length,l=!(u&1);n.filter(s=>s).forEach((s,h)=>{o=="left"?s.x=r.left+s.x-250+a*45:s.x=r.left+s.x+272-a*45;let d=r.top-(Math.floor(u/2)-h)*(St.h+9-a*10)+(s.y||0);d+=l?St.h/2:0;const m=Sa(ni(Jt({},s),{y:d,depth:a}),_);m.link=s.link||r.link;const v=o=="left"?wa(m,r):wa(r,m);g.push(v),s.children&&c(m,s.children,o,a+1)})}}),g.forEach(y=>_.add(y)),_}function wa(t,e){const g=t.left+t.width,p=t.top+t.height/2;let _,y;t.left>e.left?(_=e.left-(t.left-e.left)/2,y=t.top+(e.top-t.top)/2):(_=t.left+(e.left+t.width-t.left)/2,y=t.top+(e.top-t.top)/2);const S=e.left,f=e.top+St.h/2;return new Lt.fabric.Path(`M ${g} ${p} S${_},${y},${S},${f}`,{fill:"",stroke:St.lineColor,strokeWidth:2,strokeDashArray:[5,5]})}function Sa(t,e){const g=["\u274C","\u2705","\u{1F525}","\u2B50"];let p;g.forEach(d=>{t.title.startsWith(d)&&(t.title=t.title.replace(d,""),p=d)});const{title:_,x:y,y:S,depth:f=0}=t,i=(t.w?t.w:St.w)-f*15,c=t.h?t.h:St.h,{textColor:r,bgColor:n,fontSize:o,origin:a}=St;let u=p=="\u274C"?St.infoBg:n[f];!t.link&&f==0&&(u="#78b0df");const l=new Lt.fabric.Rect({fill:u,originX:"origin",originY:a,rx:"5",shadow:"rgba(0,0,0,.2) 2px 2px 2px",width:i,height:c-f*7}),s=new Lt.fabric.Text(_,{fill:r,originY:a,originX:a,fontWeight:"500",fontSize:o-f*2,fontFamily:St.fontFamily}),h=new Lt.fabric.Group([l,s],{left:y,top:S,lockMovementX:!0,lockMovementY:!0});if(t.download&&(h.download=!0),e.add(h),p){const d=new Lt.fabric.Text(p,{fill:r,originY:a,originX:a,fontWeight:"500",fontSize:p=="\u274C"?10:12,fontFamily:St.fontFamily}),m=new Lt.fabric.Group([d],{left:y<=400?y+5:y+i-15,top:S+3,lockMovementX:!0,lockMovementY:!0});e.add(m),e.bringForward(m)}return h}let Rr="left";function dd(t,e){const g=t.left+St.w/2,p=t.top+St.h/2,_=Rr==="left"?t.left-St.w/3:t.left+St.w,y=t.top+(e.top-t.top)/2,S=e.left+St.w/2,f=e.top+St.h/2,i=new Lt.fabric.Path(`M ${g} ${p} Q ${_},${y},${S},${f}`,{fill:"",stroke:St.lineColor,strokeWidth:3});return Rr=Rr==="left"?"right":"left",i.globalCompositeOperation="destination-over",i}function gd(t,e,g){e?g||(typeof e[0]=="number"?g=[]:(g=e,e=[])):(e=[],g=[]);const[p=0,_=0,y=120,S=40]=e,{bgColor:f,textColor:i}=St;return{title:t,x:_,y:p,w:y,h:S,bgColor:f,textColor:i,children:g}}const md={class:"map-container"},pd={key:0},vd=Xt("p",null," \u79FB\u52A8\u7AEF\u957F\u56FE\u7ED8\u5236\u8F83\u6162\uFF0C\u663E\u793A\u9759\u6001\u56FE\u7247\uFF0C\u5927\u5BB6\u8BF7\u5728PC\u7AEF\u6253\u5F00 ",-1),_d=Xt("img",{src:sd,alt:""},null,-1),yd=[vd,_d],bd={key:1},Cd={key:0},wd=["height"],Sd={props:{height:Number,data:Object},setup(t){const e=t;console.log(Qe());let g=At();const p=un();var _=new ad,y=_.getResult();const S=At(p.path==="/"),f=At(y.device.type&&S.value);function i(r){r.target&&(r.target.download&&c(),r.target.link&&(location.href=r.target.link))}function c(){const r=g.value,n=r.toDataURL({width:r.width,height:r.height,left:0,top:0,format:"png"}),o=document.createElement("a");o.download=`${r.title}-${Date.now()}.png`,o.href=n,document.body.appendChild(o),o.click(),document.body.removeChild(o)}return te(()=>{f.value||fd(g.value,e.data).on("mouse:down",i)}),(r,n)=>(ie(),Ee("div",md,[f.value?(ie(),Ee("div",pd,yd)):(ie(),Ee("div",bd,[S.value?(ie(),Ee("p",Cd," \u7EFF\u8272\u7684\u65B9\u5757\u90FD\u53EF\u4EE5\u70B9\u51FB\u8FDB\u5165\u8BE6\u60C5 ")):Ac("",!0),Xt("button",{class:"download-btn",onClick:c},"\u5BFC\u51FA\u56FE\u7247"),Xt("canvas",{ref_key:"canvasRef",ref:g,height:t.height,width:"940"},null,8,wd)]))]))}};function xd(t,e){var g=-1,p=t.length;for(e||(e=Array(p));++g<p;)e[g]=t[g];return e}var Td=xd,Od=Math.floor,Ed=Math.random;function Pd(t,e){return t+Od(Ed()*(e-t+1))}var Ad=Pd,kd=Ad;function Dd(t,e){var g=-1,p=t.length,_=p-1;for(e=e===void 0?p:e;++g<e;){var y=kd(g,_),S=t[y];t[y]=t[g],t[g]=S}return t.length=e,t}var xa=Dd,Md=Td,Ld=xa;function Rd(t){return Ld(Md(t))}var Fd=Rd;function jd(t,e){for(var g=-1,p=t==null?0:t.length,_=Array(p);++g<p;)_[g]=e(t[g],g,t);return _}var Id=jd,Bd=Id;function Nd(t,e){return Bd(e,function(g){return t[g]})}var zd=Nd;function Xd(t,e){for(var g=-1,p=Array(t);++g<t;)p[g]=e(g);return p}var Hd=Xd,Yd=typeof ei=="object"&&ei&&ei.Object===Object&&ei,Ta=Yd,Wd=Ta,Ud=typeof self=="object"&&self&&self.Object===Object&&self,Vd=Wd||Ud||Function("return this")(),Oa=Vd,Gd=Oa,$d=Gd.Symbol,Ea=$d,Pa=Ea,Aa=Object.prototype,qd=Aa.hasOwnProperty,Kd=Aa.toString,Di=Pa?Pa.toStringTag:void 0;function Jd(t){var e=qd.call(t,Di),g=t[Di];try{t[Di]=void 0;var p=!0}catch{}var _=Kd.call(t);return p&&(e?t[Di]=g:delete t[Di]),_}var Zd=Jd,Qd=Object.prototype,tg=Qd.toString;function eg(t){return tg.call(t)}var ig=eg,ka=Ea,ng=Zd,rg=ig,sg="[object Null]",og="[object Undefined]",Da=ka?ka.toStringTag:void 0;function ag(t){return t==null?t===void 0?og:sg:Da&&Da in Object(t)?ng(t):rg(t)}var Fr=ag;function lg(t){return t!=null&&typeof t=="object"}var jr=lg,cg=Fr,hg=jr,ug="[object Arguments]";function fg(t){return hg(t)&&cg(t)==ug}var dg=fg,Ma=dg,gg=jr,La=Object.prototype,mg=La.hasOwnProperty,pg=La.propertyIsEnumerable,vg=Ma(function(){return arguments}())?Ma:function(t){return gg(t)&&mg.call(t,"callee")&&!pg.call(t,"callee")},_g=vg,yg=Array.isArray,Ra=yg,Ir={exports:{}};function bg(){return!1}var Cg=bg;(function(t,e){var g=Oa,p=Cg,_=e&&!e.nodeType&&e,y=_&&!0&&t&&!t.nodeType&&t,S=y&&y.exports===_,f=S?g.Buffer:void 0,i=f?f.isBuffer:void 0,c=i||p;t.exports=c})(Ir,Ir.exports);var wg=9007199254740991,Sg=/^(?:0|[1-9]\d*)$/;function xg(t,e){var g=typeof t;return e=e==null?wg:e,!!e&&(g=="number"||g!="symbol"&&Sg.test(t))&&t>-1&&t%1==0&&t<e}var Tg=xg,Og=9007199254740991;function Eg(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Og}var Fa=Eg,Pg=Fr,Ag=Fa,kg=jr,Dg="[object Arguments]",Mg="[object Array]",Lg="[object Boolean]",Rg="[object Date]",Fg="[object Error]",jg="[object Function]",Ig="[object Map]",Bg="[object Number]",Ng="[object Object]",zg="[object RegExp]",Xg="[object Set]",Hg="[object String]",Yg="[object WeakMap]",Wg="[object ArrayBuffer]",Ug="[object DataView]",Vg="[object Float32Array]",Gg="[object Float64Array]",$g="[object Int8Array]",qg="[object Int16Array]",Kg="[object Int32Array]",Jg="[object Uint8Array]",Zg="[object Uint8ClampedArray]",Qg="[object Uint16Array]",tm="[object Uint32Array]",wt={};wt[Vg]=wt[Gg]=wt[$g]=wt[qg]=wt[Kg]=wt[Jg]=wt[Zg]=wt[Qg]=wt[tm]=!0;wt[Dg]=wt[Mg]=wt[Wg]=wt[Lg]=wt[Ug]=wt[Rg]=wt[Fg]=wt[jg]=wt[Ig]=wt[Bg]=wt[Ng]=wt[zg]=wt[Xg]=wt[Hg]=wt[Yg]=!1;function em(t){return kg(t)&&Ag(t.length)&&!!wt[Pg(t)]}var im=em;function nm(t){return function(e){return t(e)}}var rm=nm,Br={exports:{}};(function(t,e){var g=Ta,p=e&&!e.nodeType&&e,_=p&&!0&&t&&!t.nodeType&&t,y=_&&_.exports===p,S=y&&g.process,f=function(){try{var i=_&&_.require&&_.require("util").types;return i||S&&S.binding&&S.binding("util")}catch{}}();t.exports=f})(Br,Br.exports);var sm=im,om=rm,ja=Br.exports,Ia=ja&&ja.isTypedArray,am=Ia?om(Ia):sm,lm=am,cm=Hd,hm=_g,um=Ra,fm=Ir.exports,dm=Tg,gm=lm,mm=Object.prototype,pm=mm.hasOwnProperty;function vm(t,e){var g=um(t),p=!g&&hm(t),_=!g&&!p&&fm(t),y=!g&&!p&&!_&&gm(t),S=g||p||_||y,f=S?cm(t.length,String):[],i=f.length;for(var c in t)(e||pm.call(t,c))&&!(S&&(c=="length"||_&&(c=="offset"||c=="parent")||y&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||dm(c,i)))&&f.push(c);return f}var _m=vm,ym=Object.prototype;function bm(t){var e=t&&t.constructor,g=typeof e=="function"&&e.prototype||ym;return t===g}var Cm=bm;function wm(t,e){return function(g){return t(e(g))}}var Sm=wm,xm=Sm,Tm=xm(Object.keys,Object),Om=Tm,Em=Cm,Pm=Om,Am=Object.prototype,km=Am.hasOwnProperty;function Dm(t){if(!Em(t))return Pm(t);var e=[];for(var g in Object(t))km.call(t,g)&&g!="constructor"&&e.push(g);return e}var Mm=Dm;function Lm(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rm=Lm,Fm=Fr,jm=Rm,Im="[object AsyncFunction]",Bm="[object Function]",Nm="[object GeneratorFunction]",zm="[object Proxy]";function Xm(t){if(!jm(t))return!1;var e=Fm(t);return e==Bm||e==Nm||e==Im||e==zm}var Hm=Xm,Ym=Hm,Wm=Fa;function Um(t){return t!=null&&Wm(t.length)&&!Ym(t)}var Vm=Um,Gm=_m,$m=Mm,qm=Vm;function Km(t){return qm(t)?Gm(t):$m(t)}var Jm=Km,Zm=zd,Qm=Jm;function tp(t){return t==null?[]:Zm(t,Qm(t))}var ep=tp,ip=xa,np=ep;function rp(t){return ip(np(t))}var sp=rp,op=Fd,ap=sp,lp=Ra;function cp(t){var e=lp(t)?op:ap;return e(t)}var hp=cp;var up=(t,e)=>{const g=t.__vccOpts||t;for(const[p,_]of e)g[p]=_;return g};const fp={data(){return{text:"\u636E\u8BF4\u6253\u4E71\u4E00\u4E0B\u6587\u5B57\u987A\u5E8F\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u5FAE\u535A\u9605\u8BFB\u4F53\u9A8C\uFF0C\u4F46\u662F\u53EF\u4EE5\u8D8A\u8FC7AI\u68C0\u6D4B\uFF0C\u9632\u6B62\u88AB\u5C01"}},computed:{transformText(){let t="",e=[];return this.text.split("").forEach(g=>{this.isSeperator(g)?(e=e.concat(this.reorder(this.tokenize(t))),e.push(g),t=""):t+=g}),t!=""&&(e=e.concat(this.reorder(this.tokenize(t)))),e.join("")}},methods:{copy(t,e){let g=null;if(e){if(g=document.createElement("div"),g.id="tempTarget",g.style.opacity="0",t){let p=document.querySelector("#"+t);g.innerText=p[e]}else g.innerText=e;document.body.appendChild(g)}else g=document.querySelector("#"+t);try{let p=document.createRange();p.selectNode(g),window.getSelection().removeAllRanges(),window.getSelection().addRange(p),document.execCommand("copy"),window.getSelection().removeAllRanges(),console.log("\u590D\u5236\u6210\u529F")}catch{console.log("\u590D\u5236\u5931\u8D25")}e&&g.parentElement.removeChild(g)},handleClick(){this.copy("container"),alert("\u62F7\u8D1D\u6210\u529F")},isAscii(t){return t.charCodeAt()<128},isSeperator(t){return[" ","\uFF0C","\u3002",",",";",",","?",".","\uFF1F","\uFF1B"].indexOf(t)>-1},reorder(t){let e=[2,3],g=0,p=[];for(;g<t.length;){let _=e[Math.round(Math.random())],y=Math.min(g+_,t.length);_=t.slice(g,y),_=hp(_),p=p.concat(_),g=y}return console.log(p),p},tokenize(t){let e=[],g="";return t.split("").forEach(p=>{this.isAscii(p)?g+=p:(g!=""&&(e.push(g),g=""),e.push(p))}),g!=""&&e.push(g),e}}},dp=t=>(zl("data-v-31778efc"),t=t(),Xl(),t),gp={class:"tip custom-block"},mp=dp(()=>Xt("p",{class:"custom-block-title"},null,-1));function pp(t,e,g,p,_,y){return ie(),Ee("div",null,[mc(Xt("textarea",{class:"weibo","onUpdate:modelValue":e[0]||(e[0]=S=>_.text=S),name:"",id:"",cols:"60",rows:"5"},null,512),[[_h,_.text]]),Xt("div",gp,[mp,Xt("p",{ref:"container",id:"container"},vn(y.transformText),513)]),Xt("div",null,[Xt("button",{onClick:e[1]||(e[1]=(...S)=>y.handleClick&&y.handleClick(...S)),class:"submit"},"\u590D\u5236")])])}var vp=up(fp,[["render",pp],["__scopeId","data-v-31778efc"]]),_p=Pi(({app:t,router:e,siteData:g})=>{if(t.component("roadmap",Sd),t.component("weibosafe",vp),typeof window!="undefined"){var p=p||[],_=document.createElement("script");_.src="https://hm.baidu.com/hm.js?ccf55dfd2764cf3ebf43d6b3c9da9b20";var y=document.getElementsByTagName("script")[0];y.parentNode.insertBefore(_,y),e.afterEach(function(S){p.push(["_trackPageview",S.fullPath])})}});const yp=[ef,gf,yf,rd,_p];function Ba(t,e,g){var p,_,y;e===void 0&&(e=50),g===void 0&&(g={});var S=(p=g.isImmediate)!=null&&p,f=(_=g.callback)!=null&&_,i=g.maxWait,c=Date.now(),r=[];function n(){if(i!==void 0){var a=Date.now()-c;if(a+e>=i)return i-a}return e}var o=function(){var a=[].slice.call(arguments),u=this;return new Promise(function(l,s){var h=S&&y===void 0;if(y!==void 0&&clearTimeout(y),y=setTimeout(function(){if(y=void 0,c=Date.now(),!S){var m=t.apply(u,a);f&&f(m),r.forEach(function(v){return(0,v.resolve)(m)}),r=[]}},n()),h){var d=t.apply(u,a);return f&&f(d),l(d)}r.push({resolve:l,reject:s})})};return o.cancel=function(a){y!==void 0&&clearTimeout(y),r.forEach(function(u){return(0,u.reject)(a)}),r=[]},o}const Na=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,bp=()=>window.scrollTo({top:0,behavior:"smooth"});const Cp=$t({name:"BackToTop",setup(){const t=At(0),e=xt(()=>t.value>300),g=Ba(()=>{t.value=Na()},100);te(()=>{t.value=Na(),window.addEventListener("scroll",()=>g())});const p=Et("div",{class:"back-to-top",onClick:bp});return()=>Et(hr,{name:"back-to-top"},{default:()=>e.value?p:null})}}),wp=[Cp],Sp=({headerLinkSelector:t,headerAnchorSelector:e,delay:g,offset:p=5})=>{const _=Cr(),y=Qe(),S=()=>{var i,c,r,n;const o=Array.from(document.querySelectorAll(t)),u=Array.from(document.querySelectorAll(e)).filter(m=>o.some(v=>v.hash===m.hash)),l=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),s=window.innerHeight+l,h=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.abs(h-s)<p;for(let m=0;m<u.length;m++){const v=u[m],b=u[m+1],w=m===0&&l===0,C=l>=((c=(i=v.parentElement)===null||i===void 0?void 0:i.offsetTop)!==null&&c!==void 0?c:0)-p,x=!b||l<((n=(r=b.parentElement)===null||r===void 0?void 0:r.offsetTop)!==null&&n!==void 0?n:0)-p;if(!(w||C&&x))continue;const A=decodeURIComponent(_.currentRoute.value.hash),R=decodeURIComponent(v.hash);if(A===R)return;if(d){for(let P=m+1;P<u.length;P++)if(A===decodeURIComponent(u[P].hash))return}xp(_,{hash:R,force:!0});return}},f=Ba(()=>S(),g);te(()=>{f(),window.addEventListener("scroll",()=>f())}),Yn(()=>{window.removeEventListener("scroll",()=>f())}),le(()=>y.value.path,()=>f())},xp=async(t,...e)=>{const{scrollBehavior:g}=t.options;t.options.scrollBehavior=void 0,await t.replace(...e).finally(()=>t.options.scrollBehavior=g)},Tp="a.sidebar-item",Op=".header-anchor",Ep=200,Pp=5;var Ap=Tr(()=>{Sp({headerLinkSelector:Tp,headerAnchorSelector:Op,delay:Ep,offset:Pp})}),mn={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(t,e){(function(g,p){t.exports=p()})(ei,function(){var g={};g.version="0.2.0";var p=g.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};g.configure=function(u){var l,s;for(l in u)s=u[l],s!==void 0&&u.hasOwnProperty(l)&&(p[l]=s);return this},g.status=null,g.set=function(u){var l=g.isStarted();u=_(u,p.minimum,1),g.status=u===1?null:u;var s=g.render(!l),h=s.querySelector(p.barSelector),d=p.speed,m=p.easing;return s.offsetWidth,f(function(v){p.positionUsing===""&&(p.positionUsing=g.getPositioningCSS()),i(h,S(u,d,m)),u===1?(i(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout(function(){i(s,{transition:"all "+d+"ms linear",opacity:0}),setTimeout(function(){g.remove(),v()},d)},d)):setTimeout(v,d)}),this},g.isStarted=function(){return typeof g.status=="number"},g.start=function(){g.status||g.set(0);var u=function(){setTimeout(function(){!g.status||(g.trickle(),u())},p.trickleSpeed)};return p.trickle&&u(),this},g.done=function(u){return!u&&!g.status?this:g.inc(.3+.5*Math.random()).set(1)},g.inc=function(u){var l=g.status;return l?(typeof u!="number"&&(u=(1-l)*_(Math.random()*l,.1,.95)),l=_(l+u,0,.994),g.set(l)):g.start()},g.trickle=function(){return g.inc(Math.random()*p.trickleRate)},function(){var u=0,l=0;g.promise=function(s){return!s||s.state()==="resolved"?this:(l===0&&g.start(),u++,l++,s.always(function(){l--,l===0?(u=0,g.done()):g.set((u-l)/u)}),this)}}(),g.render=function(u){if(g.isRendered())return document.getElementById("nprogress");r(document.documentElement,"nprogress-busy");var l=document.createElement("div");l.id="nprogress",l.innerHTML=p.template;var s=l.querySelector(p.barSelector),h=u?"-100":y(g.status||0),d=document.querySelector(p.parent),m;return i(s,{transition:"all 0 linear",transform:"translate3d("+h+"%,0,0)"}),p.showSpinner||(m=l.querySelector(p.spinnerSelector),m&&a(m)),d!=document.body&&r(d,"nprogress-custom-parent"),d.appendChild(l),l},g.remove=function(){n(document.documentElement,"nprogress-busy"),n(document.querySelector(p.parent),"nprogress-custom-parent");var u=document.getElementById("nprogress");u&&a(u)},g.isRendered=function(){return!!document.getElementById("nprogress")},g.getPositioningCSS=function(){var u=document.body.style,l="WebkitTransform"in u?"Webkit":"MozTransform"in u?"Moz":"msTransform"in u?"ms":"OTransform"in u?"O":"";return l+"Perspective"in u?"translate3d":l+"Transform"in u?"translate":"margin"};function _(u,l,s){return u<l?l:u>s?s:u}function y(u){return(-1+u)*100}function S(u,l,s){var h;return p.positionUsing==="translate3d"?h={transform:"translate3d("+y(u)+"%,0,0)"}:p.positionUsing==="translate"?h={transform:"translate("+y(u)+"%,0)"}:h={"margin-left":y(u)+"%"},h.transition="all "+l+"ms "+s,h}var f=function(){var u=[];function l(){var s=u.shift();s&&s(l)}return function(s){u.push(s),u.length==1&&l()}}(),i=function(){var u=["Webkit","O","Moz","ms"],l={};function s(v){return v.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(b,w){return w.toUpperCase()})}function h(v){var b=document.body.style;if(v in b)return v;for(var w=u.length,C=v.charAt(0).toUpperCase()+v.slice(1),x;w--;)if(x=u[w]+C,x in b)return x;return v}function d(v){return v=s(v),l[v]||(l[v]=h(v))}function m(v,b,w){b=d(b),v.style[b]=w}return function(v,b){var w=arguments,C,x;if(w.length==2)for(C in b)x=b[C],x!==void 0&&b.hasOwnProperty(C)&&m(v,C,x);else m(v,w[1],w[2])}}();function c(u,l){var s=typeof u=="string"?u:o(u);return s.indexOf(" "+l+" ")>=0}function r(u,l){var s=o(u),h=s+l;c(s,l)||(u.className=h.substring(1))}function n(u,l){var s=o(u),h;!c(u,l)||(h=s.replace(" "+l+" "," "),u.className=h.substring(1,h.length-1))}function o(u){return(" "+(u.className||"")+" ").replace(/\s+/gi," ")}function a(u){u&&u.parentNode&&u.parentNode.removeChild(u)}return g})})(mn);const kp=()=>{te(()=>{const t=Cr(),e=new Set;e.add(t.currentRoute.value.path),mn.exports.configure({showSpinner:!1}),t.beforeEach(g=>{e.has(g.path)||mn.exports.start()}),t.afterEach(g=>{e.add(g.path),mn.exports.done()})})};var Dp=Tr(()=>{kp()}),Mp=Tr(()=>{Vf(),Jf()});const Lp=[Ap,Dp,Mp],Rp=[["v-8daa1a0e","/",{title:"\u524D\u7AEF\u5B66\u4E60\u8DEF\u7EBF\u56FE"},["/index.html","/index.md"]],["v-760ae03a","/support.html",{title:"\u652F\u6301\u6211"},["/support","/support.md"]],["v-2d0a89b7","/fe/",{title:"\u4ECB\u7ECD"},["/fe/index.html","/fe/README.md"]],["v-6240d60f","/fe/app.html",{title:"App\u5F00\u53D1"},["/fe/app","/fe/app.md"]],["v-65adaa6c","/fe/arch.html",{title:"\u9879\u76EE\u67B6\u6784"},["/fe/arch","/fe/arch.md"]],["v-1c250430","/fe/browser.html",{title:"\u6D4F\u89C8\u5668"},["/fe/browser","/fe/browser.md"]],["v-54572926","/fe/css.html",{title:"HTML + CSS \u5165\u95E8\u63A8\u8350"},["/fe/css","/fe/css.md"]],["v-070cbd00","/fe/fis.html",{title:"\u5DE5\u7A0B\u5316"},["/fe/fis","/fe/fis.md"]],["v-0b563763","/fe/hot.html",{title:"\u70ED\u95E8\u6280\u672F"},["/fe/hot","/fe/hot.md"]],["v-03101522","/fe/interview.html",{title:"\u9762\u8BD5"},["/fe/interview","/fe/interview.md"]],["v-88a59616","/fe/javascript.html",{title:"Javascript"},["/fe/javascript","/fe/javascript.md"]],["v-35690f80","/fe/node.html",{title:"Node.js"},["/fe/node","/fe/node.md"]],["v-3556a88e","/fe/perf.html",{title:"\u6027\u80FD\u4F18\u5316"},["/fe/perf","/fe/perf.md"]],["v-7d10a6d2","/fe/project.html",{title:"\u5B9E\u6218\u5F00\u53D1"},["/fe/project","/fe/project.md"]],["v-c52ce09e","/fe/react.html",{title:"React"},["/fe/react","/fe/react.md"]],["v-eb779d42","/fe/server.html",{title:"\u7F51\u7AD9\u642D\u5EFA"},["/fe/server","/fe/server.md"]],["v-f99f08a0","/fe/test.html",{title:"test \u81EA\u52A8\u5316\u6D4B\u8BD5"},["/fe/test","/fe/test.md"]],["v-1a829e46","/fe/typescript.html",{title:"Typescript"},["/fe/typescript","/fe/typescript.md"]],["v-4519446c","/fe/vue.html",{title:"Vue.js"},["/fe/vue","/fe/vue.md"]],["v-2d0a96cb","/it/",{title:"\u7A0B\u5E8F\u5458\u901A\u7528\u6280\u80FD"},["/it/index.html","/it/README.md"]],["v-25cc5155","/it/algorithm.html",{title:"\u7B97\u6CD5\u6570\u636E\u7ED3\u6784"},["/it/algorithm","/it/algorithm.md"]],["v-2da0e54d","/it/internet.html",{title:"\u8BA1\u7B97\u673A\u7F51\u7EDC"},["/it/internet","/it/internet.md"]],["v-1e823484","/it/soft.html",{title:"\u7A0B\u5E8F\u5458\u8F6F\u6280\u80FD"},["/it/soft","/it/soft.md"]],["v-5c7b669e","/tools/weibo.html",{title:"\u5B89\u5168\u53D1\u5FAE\u535A"},["/tools/weibo","/tools/weibo.md"]],["v-3706649a","/404.html",{},["/404"]]],Fp=Rp.reduce((t,[e,g,p,_])=>(t.push({name:e,path:g,component:aa,meta:p},..._.map(y=>({path:y,redirect:g}))),t),[{name:"404",path:"/:catchAll(.*)",component:aa}]),jp=(t,e)=>{const g=xt(()=>Wu(Le.value.locales,e.currentRoute.value.path)),p=xt(()=>Gu(Le.value,g.value)),_=xt(()=>Mu(ye.value)),y=xt(()=>Xu(ye.value,p.value)),S=xt(()=>Nu(y.value,_.value,p.value)),f=xt(()=>Yu(ye.value));t.provide(Sr,g),t.provide(oa,p),t.provide(ea,_),t.provide(zu,y),t.provide(ra,S),t.provide(sa,f),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get:()=>_.value},$headTitle:{get:()=>y.value},$lang:{get:()=>f.value},$page:{get:()=>ye.value},$routeLocale:{get:()=>g.value},$site:{get:()=>Le.value},$siteLocale:{get:()=>p.value},$withBase:{get:()=>Qu}})},Ip=t=>{t.component("ClientOnly",Ou),t.component("Content",xr)},Bp=Ch,Np=Xh,zp=async()=>{const t=Bp({name:"VuepressApp",setup(){qu();for(const g of Lp)g();return()=>[Et(Jo),...wp.map(g=>Et(g))]}}),e=xu({history:Np(ju(Le.value.base)),routes:Fp,scrollBehavior:(g,p,_)=>_||(g.hash?{el:g.hash}:{top:0})});e.beforeResolve(async(g,p)=>{var _;(g.path!==p.path||p===ce)&&([ye.value]=await Promise.all([ku(g.name),(_=Qo[g.name])===null||_===void 0?void 0:_.__asyncLoader()]))}),jp(t,e),Ip(t);for(const g of yp)await g({app:t,router:e,siteData:Le});return t.use(e),{app:t,router:e}};zp().then(({app:t,router:e})=>{e.isReady().then(()=>{t.mount("#app")})});export{Vu as A,qp as B,Kp as C,Et as D,Qu as E,It as F,Ou as G,ri as H,Iu as I,ju as J,At as K,le as L,mc as M,Up as N,Cr as O,Ct as P,$f as Q,te as R,Mi as S,hr as T,Qe as U,Jp as V,ia as W,Wn as X,Kf as Y,up as _,Tt as a,Xt as b,Ee as c,zp as createVueApp,Jn as d,Yp as e,$t as f,Dr as g,se as h,Du as i,xt as j,ut as k,Wp as l,Ac as m,un as n,ie as o,Hp as p,Kn as q,Sc as r,kc as s,vn as t,$p as u,Ks as v,ws as w,Fu as x,Vp as y,Gp as z};
